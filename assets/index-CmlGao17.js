import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang-Ol7lh7zH.js";import{c as p,w as a,u as k,a as u,p as h,o as g,e as m,d as e,f as s,g as i}from"./app-D4mOEXGx.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-2dBBvf8A.js";import"./YunCard.vue_vue_type_script_setup_true_lang-DKJUq1wz.js";import"./index-C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-BXjpUC3i.js";import"./post-C-a1Duln.js";const F="/assets/2024-07-01-19-55-46-qzQT9iOl.webp",_="/assets/2024-07-01-20-08-26-cFOX8bdW.webp",C=s("p",null,"最近在写一些小东西的时候需要用到显卡, 但是 Windows 的开发体验又很差 (尤其是对于 Python), 所以就在 WSL 上安装了 CUDA 以供使用.",-1),y=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"TIP"),s("span",{lang:"zh-CN"},"提示")]),s("p",null,"本文环境:"),s("ul",null,[s("li",null,"OS: WSL2 Debian bookworm"),s("li",null,"GPU: RTX 3060 Laptop")])],-1),b=s("h2",{id:"更新驱动",tabindex:"-1"},[i("更新驱动 "),s("a",{class:"header-anchor",href:"#更新驱动","aria-label":'Permalink to "更新驱动"'},"​")],-1),v=s("p",null,[i("CUDA 所需要的驱动版本一般挺新的, 所以需要"),s("strong",null,"在 Windows 上"),i("更新显卡驱动. 使用 Geforce Experience 或者去 "),s("a",{href:"https://www.nvidia.com/download/index.aspx",target:"_blank",rel:"noreferrer"},"官网下载页面"),i(" 寻找符合你型号的驱动版本即可.")],-1),D=s("div",{class:"warning custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"WARNING"),s("span",{lang:"zh-CN"},"注意")]),s("p",null,[i("注意是直接在 Windows 上更新, 不要跑去 WSL 里安装英伟达"),s("s",null,"那恶心"),i("的 Linux 驱动了.")])],-1),f=s("p",null,[i("更新完成后重启 WSL, 使用 "),s("code",null,"nvidia-smi"),i(" 查看信息:")],-1),E=s("figure",null,[s("img",{src:F,alt:"0",loading:"lazy",decoding:"async"})],-1),A=s("h2",{id:"安装-cuda-toolkit",tabindex:"-1"},[i("安装 CUDA Toolkit "),s("a",{class:"header-anchor",href:"#安装-cuda-toolkit","aria-label":'Permalink to "安装 CUDA Toolkit"'},"​")],-1),w=s("p",null,[i("在 "),s("a",{href:"https://developer.nvidia.com/cuda-downloads",target:"_blank",rel:"noreferrer"},"英伟达下载页面"),i(" 选择 WSL-Ubuntu 发行版, 选择 "),s("strong",null,"runfile (local)"),i(" 进行下载.")],-1),N=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"wget"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," https://developer.download.nvidia.com/compute/cuda/12.4.1/local_installers/cuda_12.4.1_550.54.15_linux.run")])])]),s("button",{class:"collapse"})],-1),B=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"TIP"),s("span",{lang:"zh-CN"},"提示")]),s("p",null,[i("留意你所需要的版本, 历史版本可去 "),s("a",{href:"https://developer.nvidia.com/cuda-toolkit-archive",target:"_blank",rel:"noreferrer"},"归档页"),i(" 下载, 本文下载的是 12.4 版本.")])],-1),L=s("p",null,"下载完成后运行安装:",-1),T=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," sh"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," cuda_12.4.1_550.54.15_linux.run")])])]),s("button",{class:"collapse"})],-1),$=s("p",null,[i("安装过程中会询问 EULA, 输入 "),s("code",null,"accept"),i(" 即可.")],-1),U=s("div",{class:"warning custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"WARNING"),s("span",{lang:"zh-CN"},"注意")]),s("p",null,"不要更改默认安装选项, 同意 EULA 后应直接开始安装. 否则大概会卡住…")],-1),W=s("p",null,[i("安装完成后, 更新 "),s("code",null,"PATH"),i(" 和 "),s("code",null,"LD_LIBRARY_PATH"),i(", 将下述内容添加到你的配置文件里 (如 "),s("code",null,"~/.bashrc"),i(" 或 "),s("code",null,"~/.zshrc"),i("):")],-1),P=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"export"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," PATH"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"/usr/local/cuda-12.4/bin:"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"$PATH"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"export"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," LD_LIBRARY_PATH"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"/usr/local/cuda-12.4/lib64:"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"$LD_LIBRARY_PATH"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')])])]),s("button",{class:"collapse"})],-1),S=s("p",null,[i("重启终端使配置生效, 使用 "),s("code",null,"nvcc --version"),i(" 查看版本信息:")],-1),x=s("figure",null,[s("img",{src:_,alt:"1",loading:"lazy",decoding:"async"})],-1),R=s("h2",{id:"安装-cudnn",tabindex:"-1"},[i("安装 cuDNN "),s("a",{class:"header-anchor",href:"#安装-cudnn","aria-label":'Permalink to "安装 cuDNN"'},"​")],-1),z=s("p",null,[i("在 "),s("a",{href:"https://developer.nvidia.com/cudnn-downloads",target:"_blank",rel:"noreferrer"},"英伟达下载页面"),i(" 下载 cuDNN, 选择与你环境相符的版本下载. 本文下载 cuDNN 9.2.0 for CUDA 12.4:")],-1),I=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"wget"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," https://developer.download.nvidia.com/compute/cudnn/9.2.0/local_installers/cudnn-local-repo-debian12-9.2.0_1.0-1_amd64.deb")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," apt"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," install"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ./cudnn-local-repo-debian12-9.2.0_1.0-1_amd64.deb")])])]),s("button",{class:"collapse"})],-1),H=s("p",null,"添加 keyring 和源:",-1),O=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," cp"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," /var/cuda-repo-debian12-9-2-local/cudnn-"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#EEFFFF"}},"*"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"-keyring.gpg"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," /usr/share/keyrings/")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," sed"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -i"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},' "'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"s|^Components: main$|& contrib|"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," /etc/apt/sources.list.d/cudnn-local-debian12-9.2.0.list")])])]),s("button",{class:"collapse"})],-1),G=s("p",null,[s("em",null,"注意根据 apt 的输出修改上述两行命令.")],-1),V=s("p",null,"安装 cuDNN:",-1),Z=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," apt"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," update")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," apt"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," install"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -y"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," cudnn-cuda-12")])])]),s("button",{class:"collapse"})],-1),as={__name:"index",setup(Y,{expose:r}){const l=JSON.parse('{"title":"在 WSL2 上安装 CUDA","description":"","frontmatter":{"title":"在 WSL2 上安装 CUDA","date":"2024-07-01T19:32:40.000Z","updated":"2024-07-01T19:32:40.000Z","tags":["CUDA","WSL"],"categories":"小技术","hide":null,"author":"Krau","copyright":true,"icon":null,"cover":null,"color":"#76b900","comment":true,"end":true,"encrypt":false,"time_warning":false},"headers":[{"level":2,"title":"更新驱动","slug":"更新驱动","link":"#更新驱动","children":[]},{"level":2,"title":"安装 CUDA Toolkit","slug":"安装-cuda-toolkit","link":"#安装-cuda-toolkit","children":[]},{"level":2,"title":"安装 cuDNN","slug":"安装-cudnn","link":"#安装-cudnn","children":[]}],"relativePath":"pages/posts/install-cuda-on-wsl/index.md","path":"/home/runner/work/blog-source-valaxy/blog-source-valaxy/pages/posts/install-cuda-on-wsl/index.md","lastUpdated":1720502365000}'),o=u(),n=l.frontmatter||{};return o.meta.frontmatter=Object.assign(o.meta.frontmatter||{},l.frontmatter||{}),h("pageData",l),h("valaxy:frontmatter",n),globalThis.$frontmatter=n,r({frontmatter:{title:"在 WSL2 上安装 CUDA",date:"2024-07-01T19:32:40.000Z",updated:"2024-07-01T19:32:40.000Z",tags:["CUDA","WSL"],categories:"小技术",hide:null,author:"Krau",copyright:!0,icon:null,cover:null,color:"#76b900",comment:!0,end:!0,encrypt:!1,time_warning:!1}}),(t,X)=>{const d=c;return g(),p(d,{frontmatter:k(n)},{"main-content-md":a(()=>[C,m(" more "),y,b,v,D,f,E,A,w,N,B,L,T,$,U,W,P,S,x,R,z,I,H,O,G,V,Z]),"main-header":a(()=>[e(t.$slots,"main-header")]),"main-header-after":a(()=>[e(t.$slots,"main-header-after")]),"main-nav":a(()=>[e(t.$slots,"main-nav")]),"main-content":a(()=>[e(t.$slots,"main-content")]),"main-content-after":a(()=>[e(t.$slots,"main-content-after")]),"main-nav-before":a(()=>[e(t.$slots,"main-nav-before")]),"main-nav-after":a(()=>[e(t.$slots,"main-nav-after")]),comment:a(()=>[e(t.$slots,"comment")]),footer:a(()=>[e(t.$slots,"footer")]),aside:a(()=>[e(t.$slots,"aside")]),"aside-custom":a(()=>[e(t.$slots,"aside-custom")]),default:a(()=>[e(t.$slots,"default")]),_:3},8,["frontmatter"])}}};export{as as default};
