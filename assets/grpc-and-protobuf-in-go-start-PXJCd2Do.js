import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang-DNhaLOq7.js";import{c as d,w as h,u as g,a as D,p as n,o,e as y,d as t,f as i,g as s}from"./app-DTjO6UXc.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-C2H1ONgX.js";import"./YunCard.vue_vue_type_script_setup_true_lang-CstcHiEk.js";import"./index-C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-CGvVL0hK.js";import"./index-C7yU5XnD.js";import"./post-BAshzv4s.js";const E=i("h2",{id:"protocol-buffers",tabindex:"-1"},[s("Protocol Buffers "),i("a",{class:"header-anchor",href:"#protocol-buffers","aria-label":'Permalink to "Protocol Buffers"'},"​")],-1),c=i("p",null,"Protocol Buffers (Protobuf) 是一种语言无关、平台无关、可扩展的序列化结构化数据的方法, 可以像 XML, json 等一样用于程序间数据通信. 而相较于上列二者, Protobuf 有更高的效率.",-1),C=i("p",null,[s("使用 Protobuf 需要在 "),i("code",null,".proto"),s(" 文件中定义数据结构, 并安装其编译器来生成对应语言的模型. 本文以 Go 为例.")],-1),A=i("h3",{id:"安装",tabindex:"-1"},[s("安装 "),i("a",{class:"header-anchor",href:"#安装","aria-label":'Permalink to "安装"'},"​")],-1),f=i("div",{class:"tip custom-block"},[i("p",{class:"custom-block-title"},[i("span",{lang:"en"},"TIP"),i("span",{lang:"zh-CN"},"提示")]),i("p",null,"本文环境:"),i("ul",null,[i("li",null,"Debian 12 amd64"),i("li",null,"Go 1.21.3"),i("li",null,"Protoc 24.4")])],-1),u=i("p",null,[s("安装 Protobuf 编译器最简单的方法是在 "),i("a",{href:"https://github.com/protocolbuffers/protobuf/releases",target:"_blank",rel:"noreferrer"},"Github Release"),s(" 页面下载对应平台的二进制文件, 并加入 "),i("code",null,"PATH"),s(" 环境变量.")],-1),m=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"wget"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," https://github.com/protocolbuffers/protobuf/releases/download/v24.4/protoc-24.4-linux-x86_64.zip")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"mkdir"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," protoc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," &&"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," unzip"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," protoc-24.4-linux-x86_64.zip"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -d"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," protoc")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"export"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," PATH"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"$PATH:/path/to/protoc/bin "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"# 将此行加入终端配置文件中")])])]),i("button",{class:"collapse"})],-1),B=i("p",null,[s("为了在 Go 中使用 Protobuf 和默认使用 Protobuf 的 gRPC, 还需要安装 "),i("code",null,"protoc-gen-go"),s(" 和 "),i("code",null,"protoc-gen-go-grpc")],-1),_=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"go"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," install"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," google.golang.org/protobuf/cmd/protoc-gen-go@latest")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"go"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," install"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"export"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," PATH"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"$PATH"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"$("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"go"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," env GOPATH"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"/bin"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," # 把 GOBIN 加入 PATH")])])]),i("button",{class:"collapse"})],-1),v=i("h3",{id:"语法和规范",tabindex:"-1"},[s("语法和规范 "),i("a",{class:"header-anchor",href:"#语法和规范","aria-label":'Permalink to "语法和规范"'},"​")],-1),b=i("p",null,"Protobuf 的主要语法很简单也很 Go, 下例:",-1),w=i("div",{class:"language-proto vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"proto"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"syntax"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},' "proto3"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 指定版本")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"option"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#EEFFFF"}}," go_package"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},' "example/proto"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 指定 Go 代码生成的包名")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"package"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," artwork"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 包名, 用于区分不同的 proto 文件. 注意此包名并不是 Go 中的包名")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 定义消息类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"message"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," ArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," artworkID "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    string"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," title "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    SourceName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," source "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 引用枚举类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    repeated"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," string"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," tags "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // repeated 表示为数组")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    bool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," r18 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    repeated"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," PictureInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," pictures "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 引用嵌套消息类型")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 定义枚举类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"    enum"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," SourceName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        Pixiv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        Twitter "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        // ...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 定义嵌套消息类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"    message"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," PictureInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"        uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," pictureID "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"        uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," width "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"        uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," height "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"}")])])]),i("button",{class:"collapse"})],-1),P=i("p",null,"可以看到 Proto 的消息定义和 Go 的结构体定义很像, 简要总结:",-1),x=i("ul",null,[i("li",null,[s("消息类型定义: "),i("code",null,"message"),s(" 关键字 + 消息名, 在大括号内定义字段")]),i("li",null,"字段定义: 字段类型, 字段名, 编号. 编号是不可省略且在同一消息定义下不可重复的. 可以理解成字段的唯一ID.")],-1),I=i("p",null,"在规范上, Protobuf 有如下约定:",-1),S=i("ul",null,[i("li",null,[s("包名应为小写, 且使用和目录结构一致的点分法, 如 "),i("code",null,"example.package")]),i("li",null,[s("使用驼峰命名法命名消息类型和服务, 如 "),i("code",null,"ExampleMessage"),s(", "),i("code",null,"ExampleService")]),i("li",null,[s("使用蛇形命名法命名字段, 如 "),i("code",null,"example_field")]),i("li",null,[s("使用双斜杠注释, 如 "),i("code",null,"// 注释内容")])],-1),G=i("p",null,[s("关于 Protobuf 的数据类型和各语言中的对应, 可以参考 "),i("a",{href:"https://developers.google.com/protocol-buffers/docs/proto3#scalar",target:"_blank",rel:"noreferrer"},"官方文档#scalar")],-1),R=i("h3",{id:"编译生成-go-代码",tabindex:"-1"},[s("编译生成 Go 代码 "),i("a",{class:"header-anchor",href:"#编译生成-go-代码","aria-label":'Permalink to "编译生成 Go 代码"'},"​")],-1),T=i("p",null,[s("在 "),i("code",null,".proto"),s(" 文件所在目录下执行:")],-1),N=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"protoc"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," --go_out=."),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," example.proto")])])]),i("button",{class:"collapse"})],-1),$=i("p",null,[s("protoc 会在当前目录下生成 "),i("code",null,"proto/example.pb.go"),s(" 文件, 其中包含了 "),i("code",null,"example.proto"),s(" 中定义的消息类型, 并且提供了一些方便的方法.")],-1),q=i("p",null,[s("由 protoc 生成的文件不应直接修改, 如需更改, 应修改 "),i("code",null,".proto"),s(" 文件后重新编译生成.")],-1),L=i("p",null,"Protobuf 常与 gRPC 结合使用, 作为服务之间远程调用的数据传输格式.",-1),H=i("h2",{id:"grpc",tabindex:"-1"},[s("gRPC "),i("a",{class:"header-anchor",href:"#grpc","aria-label":'Permalink to "gRPC"'},"​")],-1),z=i("p",null,[i("a",{href:"https://grpc.io/",target:"_blank",rel:"noreferrer"},"gRPC"),s(' 是一个基于 HTTP/2 的"高性能、开源和通用的 '),i("a",{href:"https://zh.wikipedia.org/wiki/%E8%BF%9C%E7%A8%8B%E8%BF%87%E7%A8%8B%E8%B0%83%E7%94%A8",target:"_blank",rel:"noreferrer"},"RPC"),s(' 框架". gRPC 默认使用 Protobuf 作为接口定义语言和数据传输格式.')],-1),O=i("p",null,[s("gRPC、 Protobuf 和 Go 都是由 Google 开发的, "),i("s",null,"这三者结合使用具有套装效果.")],-1),U=i("h3",{id:"安装-1",tabindex:"-1"},[s("安装 "),i("a",{class:"header-anchor",href:"#安装-1","aria-label":'Permalink to "安装"'},"​")],-1),V=i("p",null,"在项目目录下执行:",-1),Z=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"go"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," get"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -u"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," google.golang.org/grpc")])])]),i("button",{class:"collapse"})],-1),M=i("h3",{id:"定义-grpc-服务和方法",tabindex:"-1"},[s("定义 gRPC 服务和方法 "),i("a",{class:"header-anchor",href:"#定义-grpc-服务和方法","aria-label":'Permalink to "定义 gRPC 服务和方法"'},"​")],-1),Q=i("p",null,"定义一个服务, 并指定其可以被远程调用的方法, 以及方法的参数和返回值类型. 这即是 gRPc 定义服务的思想.",-1),W=i("p",null,[s("在上文的 "),i("code",null,"example.proto"),s(" 中定义一个服务:")],-1),j=i("div",{class:"language-proto vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"proto"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker has-diff vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"syntax"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},' "proto3"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 指定版本")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"option"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#EEFFFF"}}," go_package"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},' "example/proto"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 指定 Go 代码生成的包名")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"package"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," artwork"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 包名, 用于区分不同的 proto 文件. 注意此包名并不是 Go 中的包名")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 定义消息类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"message"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," ArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," artworkID "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    string"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," title "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    SourceName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," source "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 引用枚举类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    repeated"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," string"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," tags "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // repeated 表示为数组")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    bool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," r18 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    repeated"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," PictureInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," pictures "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 引用嵌套消息类型")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 定义枚举类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"    enum"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," SourceName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        Pixiv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        Twitter "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        // ...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 定义嵌套消息类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"    message"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," PictureInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"        uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," pictureID "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"        uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," width "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"        uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," height "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"message"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," { ")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," artworkID "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"} ")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 定义服务")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"service"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," ArtworkService"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," { ")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 定义方法")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"    rpc"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," GetArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"returns"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},")"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line diff add"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"} ")])])]),i("button",{class:"collapse"})],-1),K=i("h4",{id:"grpc-方法",tabindex:"-1"},[s("gRPC 方法 "),i("a",{class:"header-anchor",href:"#grpc-方法","aria-label":'Permalink to "gRPC 方法"'},"​")],-1),J=i("p",null,"gRPC 有四种方法类型:",-1),X=i("ol",null,[i("li",null,"一元方法"),i("li",null,"服务端流式方法"),i("li",null,"客户端流式方法"),i("li",null,"双向流式方法")],-1),Y=i("h5",{id:"一元方法",tabindex:"-1"},[s("一元方法 "),i("a",{class:"header-anchor",href:"#一元方法","aria-label":'Permalink to "一元方法"'},"​")],-1),ii=i("p",null,"一元方法是最简单常用的方法. 客户端将请求消息作为参数发送给服务, 服务返回一个响应消息. 一元方法调用完成.",-1),si=i("p",null,"在实际代码中, 一元方法的调用就像是调用一个普通的函数.",-1),hi=i("p",null,[s("上文的 "),i("code",null,"GetArtworkInfo"),s(" 方法就是一个一元方法.")],-1),li=i("h5",{id:"服务端流式方法",tabindex:"-1"},[s("服务端流式方法 "),i("a",{class:"header-anchor",href:"#服务端流式方法","aria-label":'Permalink to "服务端流式方法"'},"​")],-1),ti=i("p",null,"服务端流式方法是指客户端发送一个请求消息, 服务端返回一个流式响应消息. 客户端从返回的流中读取响应消息, 直到没有消息为止.",-1),ki=i("p",null,[s("定义流式方法, 需要在参数或返回值前加上 "),i("code",null,"stream"),s(" 关键字.")],-1),ai=i("p",null,[s("例如, 定义一个 "),i("code",null,"GetArtworkInfoList"),s(" 方法, 用于获取多个作品的信息:")],-1),ei=i("div",{class:"language-proto vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"proto"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"syntax"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},' "proto3"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 指定版本")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"option"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#EEFFFF"}}," go_package"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},' "example/proto"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 指定 Go 代码生成的包名")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"package"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," artwork"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 包名, 用于区分不同的 proto 文件. 注意此包名并不是 Go 中的包名")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 定义消息类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"message"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," ArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," artworkID "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    string"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," title "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    SourceName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," source "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 引用枚举类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    repeated"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," string"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," tags "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 4"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // repeated 表示为数组")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    bool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," r18 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 5"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    repeated"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," PictureInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," pictures "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 6"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 引用嵌套消息类型")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 定义枚举类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"    enum"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," SourceName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        Pixiv "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        Twitter "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        // ...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    }")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 定义嵌套消息类型")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"    message"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," PictureInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"        uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," pictureID "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"        uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," width "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 2"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"        uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," height "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 3"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"message"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"    uint64"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," artworkID "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"// 定义服务")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"service"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," ArtworkService"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 定义方法")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"    rpc"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," GetArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"returns"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},")"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"    rpc"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," GetArtworkInfoList"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"returns"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"stream"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," ArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},")"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 定义流式方法 //[!code ++]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"}")])])]),i("button",{class:"collapse"})],-1),ni=i("h5",{id:"客户端流式方法",tabindex:"-1"},[s("客户端流式方法 "),i("a",{class:"header-anchor",href:"#客户端流式方法","aria-label":'Permalink to "客户端流式方法"'},"​")],-1),Fi=i("p",null,"与服务端流式方法相反, 客户端向数据流中写入并发送一系列消息, 服务端从流中读取这些消息, 直到没有消息为止, 然后返回一个响应消息.",-1),ri=i("p",null,[s("在方法参数前加上 "),i("code",null,"stream"),s(" 关键字即可定义客户端流式方法.")],-1),pi=i("h5",{id:"双向流式方法",tabindex:"-1"},[s("双向流式方法 "),i("a",{class:"header-anchor",href:"#双向流式方法","aria-label":'Permalink to "双向流式方法"'},"​")],-1),di=i("p",null,"双向流式方法是指客户端和服务端都可以通过一个读写数据流来发送一系列消息. 这两个流独立运行, 因此客户端和服务端可以以任意顺序读写: 例如, 服务端可以在写入响应前等待接收所有客户端消息, 或者可以先读取一个消息, 然后再写入一个消息, 或者读取或写入多个消息, 甚至可以同时读写.",-1),gi=i("p",null,[s("在方法参数和返回值前加上 "),i("code",null,"stream"),s(" 关键字即可定义双向流式方法.")],-1),Di=i("h3",{id:"生成-go-代码",tabindex:"-1"},[s("生成 Go 代码 "),i("a",{class:"header-anchor",href:"#生成-go-代码","aria-label":'Permalink to "生成 Go 代码"'},"​")],-1),oi=i("p",null,[s("上文所述的内容都还是在 "),i("code",null,"proto"),s(" 文件中完成, 要想在 Go 中使用, 还需要生成 Go 代码.")],-1),yi=i("p",null,"在项目目录下执行:",-1),Ei=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"protoc"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," --go_out=."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," --go-grpc_out=."),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," example.proto")])])]),i("button",{class:"collapse"})],-1),ci=i("p",null,[s("protoc 会在当前目录下生成 "),i("code",null,"proto/example.pb.go"),s(" 和 "),i("code",null,"proto/example_grpc.pb.go"),s(" 两个文件, 前者包含了 "),i("code",null,"example.proto"),s(" 中定义的消息类型, 后者包含了 "),i("code",null,"example.proto"),s(" 中定义的服务和方法.")],-1),Ci=i("h3",{id:"服务端实现",tabindex:"-1"},[s("服务端实现 "),i("a",{class:"header-anchor",href:"#服务端实现","aria-label":'Permalink to "服务端实现"'},"​")],-1),Ai=i("p",null,[s("实现上文定义的 "),i("code",null,"ArtworkService"),s(" 服务, 需要做两部分工作:")],-1),fi=i("ol",null,[i("li",null,[s("实现 "),i("code",null,"ArtworkService"),s(" 服务中定义的所有方法. 即实现 "),i("code",null,"example_grpc.pb.go"),s(" 中的 "),i("code",null,"ArtworkServiceServer"),s(" 接口.")]),i("li",null,"运行一个 gRPC 服务器, 监听来自客户端的请求并返回响应.")],-1),ui=i("h4",{id:"实现服务方法",tabindex:"-1"},[s("实现服务方法 "),i("a",{class:"header-anchor",href:"#实现服务方法","aria-label":'Permalink to "实现服务方法"'},"​")],-1),mi=i("p",null,[s("打开 "),i("code",null,"example_grpc.pb.go"),s(" 文件, 可以看到 "),i("code",null,"ArtworkServiceServer"),s(" 接口的定义:")],-1),Bi=i("div",{class:"language-go vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"// ArtworkServiceServer is the server API for ArtworkService service.")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"// All implementations must embed UnimplementedArtworkServiceServer")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"// for forward compatibility")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," ArtworkServiceServer"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," interface"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," GetArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"Context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," *"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," error"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," GetArtworkInfoList"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," ArtworkService_GetArtworkInfoListServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," error")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," mustEmbedUnimplementedArtworkServiceServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"}")])])]),i("button",{class:"collapse"})],-1),_i=i("p",null,[s("在项目中导入 "),i("code",null,"example/proto"),s(" 包, 并实现 "),i("code",null,"ArtworkServiceServer"),s(" 接口:")],-1),vi=i("div",{class:"language-go vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"package"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," main")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," (")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"context"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"log"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"net"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"example/proto"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"google.golang.org/grpc"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"type"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," ArtworkServiceServer"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," struct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"    proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"UnimplementedArtworkServiceServer"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 为了实现向前兼容, 需要嵌入此结构体")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"func"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"s "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkServiceServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," GetArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"ctx"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"Context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," req"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," *"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," error"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 实现")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    return"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," &"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{},"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"func"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"s "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkServiceServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," GetArtworkInfoList"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"req"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," *"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," stream"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkService_GetArtworkInfoListServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," error"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 实现")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    for"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," i "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," i "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"++"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," stream"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Send"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"&"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{})")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"            return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"var"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," server "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," &"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkServiceServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"func"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," main"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"}")])])]),i("button",{class:"collapse"})],-1),bi=i("p",null,"可以看到, 流式方法和一元方法的区别在于, 流式方法的参数或返回值是一个流, 需要向流中写入或读取消息.",-1),wi=i("div",{class:"language-go vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"func"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"s "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"*"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkServiceServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," GetArtworkInfoList"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"req"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," *"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," stream"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkService_GetArtworkInfoListServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," error"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // 实现")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    for"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," i "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 0"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," i "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"<"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},";"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," i"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"++"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," stream"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Send"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"&"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"ArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{})")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"            return"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    return"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"}")])])]),i("button",{class:"collapse"})],-1),Pi=i("h4",{id:"运行-grpc-服务器",tabindex:"-1"},[s("运行 gRPC 服务器 "),i("a",{class:"header-anchor",href:"#运行-grpc-服务器","aria-label":'Permalink to "运行 gRPC 服务器"'},"​")],-1),xi=i("p",null,[s("在 "),i("code",null,"main"),s(" 函数中, 创建一个 gRPC 服务器, 并注册 "),i("code",null,"ArtworkServiceServer"),s(":")],-1),Ii=i("div",{class:"language-go vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"func"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," main"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    lis"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," net"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Listen"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"tcp"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},' "'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},":8080"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        log"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Fatalf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"failed to listen: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%v"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    s "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," grpc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"NewServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"RegisterArtworkServiceServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"s"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," server"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," s"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Serve"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"lis"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},");"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        log"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Fatalf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"failed to serve: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%v"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"}")])])]),i("button",{class:"collapse"})],-1),Si=i("div",{class:"warning custom-block"},[i("p",{class:"custom-block-title"},[i("span",{lang:"en"},"WARNING"),i("span",{lang:"zh-CN"},"注意")]),i("p",null,"此处没有使用任何安全措施")],-1),Gi=i("h3",{id:"客户端调用",tabindex:"-1"},[s("客户端调用 "),i("a",{class:"header-anchor",href:"#客户端调用","aria-label":'Permalink to "客户端调用"'},"​")],-1),Ri=i("p",null,"在客户端调用 gRPC 服务, 只需要初始化连接, 并创建客户端, 然后直接调用定义的方法.",-1),Ti=i("div",{class:"language-go vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"package"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," main")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," (")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"context"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"log"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"example/proto"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"google.golang.org/grpc"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"google.golang.org/grpc/credentials/insecure"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"func"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," main"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    conn"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," grpc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Dial"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"localhost:8080"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," grpc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"WithTransportCredentials"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"insecure"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"NewCredentials"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        log"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Fatalf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"did not connect: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%v"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    defer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," conn"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Close"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    client "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"NewArtworkServiceClient"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"conn"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    resp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," client"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"GetArtworkInfo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Background"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"(),"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," &"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ArtworkID"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"})")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        log"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Fatalf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"could not get artwork info: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%v"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    log"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Println"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"resp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"}")])])]),i("button",{class:"collapse"})],-1),Ni=i("p",null,"而对于流式方法, 客户端需要从流中读取响应消息, 直到没有消息为止.",-1),$i=i("div",{class:"language-go vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"package"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," main")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," (")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"context"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"log"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"io"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"example/proto"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"google.golang.org/grpc"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"google.golang.org/grpc/credentials/insecure"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"func"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," main"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    conn"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," grpc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Dial"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"localhost:8080"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," grpc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"WithTransportCredentials"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"insecure"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"NewCredentials"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        log"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Fatalf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"did not connect: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%v"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    defer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," conn"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Close"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    client "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"NewArtworkServiceClient"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"conn"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    stream"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," client"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"GetArtworkInfoList"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Background"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"(),"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," &"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"GetArtworkInfoRequest"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ArtworkID"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"})")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        log"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Fatalf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"could not get artwork info: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%v"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    }")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    for"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        resp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," stream"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Recv"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"=="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," io"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"EOF "),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 判断是否已结束")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"            break")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"            log"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Fatalf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"could not get artwork info: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%v"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"        }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        log"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Println"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"resp"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"}")])])]),i("button",{class:"collapse"})],-1),qi=i("h2",{id:"参考",tabindex:"-1"},[s("参考 "),i("a",{class:"header-anchor",href:"#参考","aria-label":'Permalink to "参考"'},"​")],-1),Li=i("ul",null,[i("li",null,[i("a",{href:"https://grpc.io/docs/",target:"_blank",rel:"noreferrer"},"gRPC Docs")]),i("li",null,[i("a",{href:"https://protobuf.dev/programming-guides/proto3/",target:"_blank",rel:"noreferrer"},"Protocol Buffers Docs")])],-1),Ji={__name:"grpc-and-protobuf-in-go-start",setup(Hi,{expose:F}){const k=JSON.parse('{"title":"Go 的 gRPC 和 Protocol Buffers---Quick Start","description":"","frontmatter":{"title":"Go 的 gRPC 和 Protocol Buffers---Quick Start","date":"2023-10-21T21:27:48.000Z","updated":"2023-10-21T21:27:48.000Z","tags":["代码","Go","gRPC","Protobuf"],"categories":"小技术","hide":null,"author":"Krau","copyright":true,"icon":null,"cover":null,"color":"#79d4fd","comment":true,"end":false,"encrypt":false},"headers":[{"level":2,"title":"Protocol Buffers","slug":"protocol-buffers","link":"#protocol-buffers","children":[{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":3,"title":"语法和规范","slug":"语法和规范","link":"#语法和规范","children":[]},{"level":3,"title":"编译生成 Go 代码","slug":"编译生成-go-代码","link":"#编译生成-go-代码","children":[]}]},{"level":2,"title":"gRPC","slug":"grpc","link":"#grpc","children":[{"level":3,"title":"安装","slug":"安装-1","link":"#安装-1","children":[]},{"level":3,"title":"定义 gRPC 服务和方法","slug":"定义-grpc-服务和方法","link":"#定义-grpc-服务和方法","children":[]},{"level":3,"title":"生成 Go 代码","slug":"生成-go-代码","link":"#生成-go-代码","children":[]},{"level":3,"title":"服务端实现","slug":"服务端实现","link":"#服务端实现","children":[]},{"level":3,"title":"客户端调用","slug":"客户端调用","link":"#客户端调用","children":[]}]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}],"relativePath":"pages/posts/grpc-and-protobuf-in-go-start.md","path":"/home/runner/work/blog-source-valaxy/blog-source-valaxy/pages/posts/grpc-and-protobuf-in-go-start.md","lastUpdated":1718969024000}'),e=D(),a=k.frontmatter||{};return e.meta.frontmatter=Object.assign(e.meta.frontmatter||{},k.frontmatter||{}),n("pageData",k),n("valaxy:frontmatter",a),globalThis.$frontmatter=a,F({frontmatter:{title:"Go 的 gRPC 和 Protocol Buffers---Quick Start",date:"2023-10-21T21:27:48.000Z",updated:"2023-10-21T21:27:48.000Z",tags:["代码","Go","gRPC","Protobuf"],categories:"小技术",hide:null,author:"Krau",copyright:!0,icon:null,cover:null,color:"#79d4fd",comment:!0,end:!1,encrypt:!1}}),(l,Oi)=>{const r=p;return o(),d(r,{frontmatter:g(a)},{"main-content-md":h(()=>[E,c,C,y(" more "),A,f,u,m,B,_,v,b,w,P,x,I,S,G,R,T,N,$,q,L,H,z,O,U,V,Z,M,Q,W,j,K,J,X,Y,ii,si,hi,li,ti,ki,ai,ei,ni,Fi,ri,pi,di,gi,Di,oi,yi,Ei,ci,Ci,Ai,fi,ui,mi,Bi,_i,vi,bi,wi,Pi,xi,Ii,Si,Gi,Ri,Ti,Ni,$i,qi,Li]),"main-header":h(()=>[t(l.$slots,"main-header")]),"main-header-after":h(()=>[t(l.$slots,"main-header-after")]),"main-nav":h(()=>[t(l.$slots,"main-nav")]),"main-content":h(()=>[t(l.$slots,"main-content")]),"main-content-after":h(()=>[t(l.$slots,"main-content-after")]),"main-nav-before":h(()=>[t(l.$slots,"main-nav-before")]),"main-nav-after":h(()=>[t(l.$slots,"main-nav-after")]),comment:h(()=>[t(l.$slots,"comment")]),footer:h(()=>[t(l.$slots,"footer")]),aside:h(()=>[t(l.$slots,"aside")]),"aside-custom":h(()=>[t(l.$slots,"aside-custom")]),default:h(()=>[t(l.$slots,"default")]),_:3},8,["frontmatter"])}}};export{Ji as default};
