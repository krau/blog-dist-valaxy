import{_ as k}from"./ValaxyMain.vue_vue_type_style_index_0_lang-BpGoxE0S.js";import{c as u,w as a,f as g,e as m,p as d,o as c,g as s,v as F,h as l,r as e}from"./app-DYwnrrn0.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-BzH1ppc2.js";import"./YunCard.vue_vue_type_script_setup_true_lang-BeOWRhvZ.js";import"./index-C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-B_Gh7fdw.js";import"./post-DOrnddpB.js";const C="/assets/2024-07-01-19-55-46-qzQT9iOl.webp",y="/assets/2024-07-01-20-08-26-cFOX8bdW.webp",L={__name:"index",setup(b,{expose:p}){const n=JSON.parse('{"title":"在 WSL2 上安装 CUDA","description":"","frontmatter":{"title":"在 WSL2 上安装 CUDA","date":"2024-07-01 19:32:40","updated":"2024-07-01 19:32:40","tags":["CUDA","WSL"],"categories":"小技术","hide":null,"author":"Krau","copyright":true,"icon":null,"cover":null,"pageTitleClass":"text-#76b900","postTitleClass":"text-#76b900","comment":true,"end":true,"encrypt":false,"time_warning":false},"headers":[{"level":2,"title":"更新驱动","slug":"更新驱动","link":"#更新驱动","children":[]},{"level":2,"title":"安装 CUDA Toolkit","slug":"安装-cuda-toolkit","link":"#安装-cuda-toolkit","children":[]},{"level":2,"title":"安装 cuDNN","slug":"安装-cudnn","link":"#安装-cudnn","children":[]}],"relativePath":"pages/posts/install-cuda-on-wsl/index.md","path":"/home/runner/work/blog-source-valaxy/blog-source-valaxy/pages/posts/install-cuda-on-wsl/index.md","lastUpdated":1726839524000}'),r=m(),o=n.frontmatter||{};return r.meta.frontmatter=Object.assign(r.meta.frontmatter||{},n.frontmatter||{}),d("pageData",n),d("valaxy:frontmatter",o),globalThis.$frontmatter=o,p({frontmatter:{title:"在 WSL2 上安装 CUDA",date:"2024-07-01 19:32:40",updated:"2024-07-01 19:32:40",tags:["CUDA","WSL"],categories:"小技术",hide:null,author:"Krau",copyright:!0,icon:null,cover:null,pageTitleClass:"text-#76b900",postTitleClass:"text-#76b900",comment:!0,end:!0,encrypt:!1,time_warning:!1}}),(t,i)=>{const h=k;return c(),u(h,{frontmatter:g(o)},{"main-content-md":a(()=>[i[0]||(i[0]=s("p",null,"最近在写一些小东西的时候需要用到显卡, 但是 Windows 的开发体验又很差 (尤其是对于 Python), 所以就在 WSL 上安装了 CUDA 以供使用.",-1)),F(" more "),i[1]||(i[1]=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"TIP"),s("span",{lang:"zh-CN"},"提示")]),s("p",null,"本文环境:"),s("ul",null,[s("li",null,"OS: WSL2 Debian bookworm"),s("li",null,"GPU: RTX 3060 Laptop")])],-1)),i[2]||(i[2]=s("h2",{id:"更新驱动",tabindex:"-1"},[l("更新驱动 "),s("a",{class:"header-anchor",href:"#更新驱动","aria-label":'Permalink to "更新驱动"'},"​")],-1)),i[3]||(i[3]=s("p",null,[l("CUDA 所需要的驱动版本一般挺新的, 所以需要"),s("strong",null,"在 Windows 上"),l("更新显卡驱动. 使用 Geforce Experience 或者去 "),s("a",{href:"https://www.nvidia.com/download/index.aspx",target:"_blank",rel:"noreferrer"},"官网下载页面"),l(" 寻找符合你型号的驱动版本即可.")],-1)),i[4]||(i[4]=s("div",{class:"warning custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"WARNING"),s("span",{lang:"zh-CN"},"注意")]),s("p",null,[l("注意是直接在 Windows 上更新, 不要跑去 WSL 里安装英伟达"),s("s",null,"那恶心"),l("的 Linux 驱动了.")])],-1)),i[5]||(i[5]=s("p",null,[l("更新完成后重启 WSL, 使用 "),s("code",null,"nvidia-smi"),l(" 查看信息:")],-1)),i[6]||(i[6]=s("figure",null,[s("img",{src:C,alt:"0",loading:"lazy",decoding:"async"})],-1)),i[7]||(i[7]=s("h2",{id:"安装-cuda-toolkit",tabindex:"-1"},[l("安装 CUDA Toolkit "),s("a",{class:"header-anchor",href:"#安装-cuda-toolkit","aria-label":'Permalink to "安装 CUDA Toolkit"'},"​")],-1)),i[8]||(i[8]=s("p",null,[l("在 "),s("a",{href:"https://developer.nvidia.com/cuda-downloads",target:"_blank",rel:"noreferrer"},"英伟达下载页面"),l(" 选择 WSL-Ubuntu 发行版, 选择 "),s("strong",null,"runfile (local)"),l(" 进行下载.")],-1)),i[9]||(i[9]=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"wget"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," https://developer.download.nvidia.com/compute/cuda/12.4.1/local_installers/cuda_12.4.1_550.54.15_linux.run")])])]),s("button",{class:"collapse"})],-1)),i[10]||(i[10]=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"TIP"),s("span",{lang:"zh-CN"},"提示")]),s("p",null,[l("留意你所需要的版本, 历史版本可去 "),s("a",{href:"https://developer.nvidia.com/cuda-toolkit-archive",target:"_blank",rel:"noreferrer"},"归档页"),l(" 下载, 本文下载的是 12.4 版本.")])],-1)),i[11]||(i[11]=s("p",null,"下载完成后运行安装:",-1)),i[12]||(i[12]=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," sh"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," cuda_12.4.1_550.54.15_linux.run")])])]),s("button",{class:"collapse"})],-1)),i[13]||(i[13]=s("p",null,[l("安装过程中会询问 EULA, 输入 "),s("code",null,"accept"),l(" 即可.")],-1)),i[14]||(i[14]=s("div",{class:"warning custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"WARNING"),s("span",{lang:"zh-CN"},"注意")]),s("p",null,"不要更改默认安装选项, 同意 EULA 后应直接开始安装. 否则大概会卡住…")],-1)),i[15]||(i[15]=s("p",null,[l("安装完成后, 更新 "),s("code",null,"PATH"),l(" 和 "),s("code",null,"LD_LIBRARY_PATH"),l(", 将下述内容添加到你的配置文件里 (如 "),s("code",null,"~/.bashrc"),l(" 或 "),s("code",null,"~/.zshrc"),l("):")],-1)),i[16]||(i[16]=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"export"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," PATH"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"/usr/local/cuda-12.4/bin:"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"$PATH"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"export"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," LD_LIBRARY_PATH"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"/usr/local/cuda-12.4/lib64:"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"$LD_LIBRARY_PATH"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')])])]),s("button",{class:"collapse"})],-1)),i[17]||(i[17]=s("p",null,[l("重启终端使配置生效, 使用 "),s("code",null,"nvcc --version"),l(" 查看版本信息:")],-1)),i[18]||(i[18]=s("figure",null,[s("img",{src:y,alt:"1",loading:"lazy",decoding:"async"})],-1)),i[19]||(i[19]=s("h2",{id:"安装-cudnn",tabindex:"-1"},[l("安装 cuDNN "),s("a",{class:"header-anchor",href:"#安装-cudnn","aria-label":'Permalink to "安装 cuDNN"'},"​")],-1)),i[20]||(i[20]=s("p",null,[l("在 "),s("a",{href:"https://developer.nvidia.com/cudnn-downloads",target:"_blank",rel:"noreferrer"},"英伟达下载页面"),l(" 下载 cuDNN, 选择与你环境相符的版本下载. 本文下载 cuDNN 9.2.0 for CUDA 12.4:")],-1)),i[21]||(i[21]=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"wget"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," https://developer.download.nvidia.com/compute/cudnn/9.2.0/local_installers/cudnn-local-repo-debian12-9.2.0_1.0-1_amd64.deb")]),l(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," apt"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," install"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ./cudnn-local-repo-debian12-9.2.0_1.0-1_amd64.deb")])])]),s("button",{class:"collapse"})],-1)),i[22]||(i[22]=s("p",null,"添加 keyring 和源:",-1)),i[23]||(i[23]=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," cp"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," /var/cuda-repo-debian12-9-2-local/cudnn-"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#EEFFFF"}},"*"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"-keyring.gpg"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," /usr/share/keyrings/")]),l(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," sed"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -i"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},' "'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"s|^Components: main$|& contrib|"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," /etc/apt/sources.list.d/cudnn-local-debian12-9.2.0.list")])])]),s("button",{class:"collapse"})],-1)),i[24]||(i[24]=s("p",null,[s("em",null,"注意根据 apt 的输出修改上述两行命令.")],-1)),i[25]||(i[25]=s("p",null,"安装 cuDNN:",-1)),i[26]||(i[26]=s("div",{class:"language-bash vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," apt"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," update")]),l(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," apt"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," install"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -y"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," cudnn-cuda-12")])])]),s("button",{class:"collapse"})],-1))]),"main-header":a(()=>[e(t.$slots,"main-header")]),"main-header-after":a(()=>[e(t.$slots,"main-header-after")]),"main-nav":a(()=>[e(t.$slots,"main-nav")]),"main-content":a(()=>[e(t.$slots,"main-content")]),"main-content-after":a(()=>[e(t.$slots,"main-content-after")]),"main-nav-before":a(()=>[e(t.$slots,"main-nav-before")]),"main-nav-after":a(()=>[e(t.$slots,"main-nav-after")]),comment:a(()=>[e(t.$slots,"comment")]),footer:a(()=>[e(t.$slots,"footer")]),aside:a(()=>[e(t.$slots,"aside")]),"aside-custom":a(()=>[e(t.$slots,"aside-custom")]),default:a(()=>[e(t.$slots,"default")]),_:3},8,["frontmatter"])}}};export{L as default};
