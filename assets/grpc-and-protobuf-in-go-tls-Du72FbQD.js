import{_ as d}from"./ValaxyMain.vue_vue_type_style_index_0_lang-BpGoxE0S.js";import{c as g,w as t,f as D,e as y,p as F,o as E,g as i,h as s,v as o,r as h}from"./app-DYwnrrn0.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-BzH1ppc2.js";import"./YunCard.vue_vue_type_script_setup_true_lang-BeOWRhvZ.js";import"./index-C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-B_Gh7fdw.js";import"./post-DOrnddpB.js";const N={__name:"grpc-and-protobuf-in-go-tls",setup(C,{expose:r}){const k=JSON.parse('{"title":"Go 的 gRPC 和 Protocol Buffers---TLS 认证","description":"","frontmatter":{"title":"Go 的 gRPC 和 Protocol Buffers---TLS 认证","date":"2023-10-23 09:29:29","updated":"2023-10-23 09:29:29","tags":["代码","Go","gRPC","Protobuf"],"categories":"小技术","hide":null,"author":"Krau","copyright":true,"icon":null,"cover":null,"postTitleClass":"text-#79d4fd","pageTitleClass":"text-#79d4fd","comment":true,"end":false,"encrypt":false,"time_warning":false},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"SAN, CA 和证书","slug":"san-ca-和证书","link":"#san-ca-和证书","children":[]},{"level":2,"title":"生成证书","slug":"生成证书","link":"#生成证书","children":[{"level":3,"title":"生成 CA 证书","slug":"生成-ca-证书","link":"#生成-ca-证书","children":[]},{"level":3,"title":"生成服务端证书","slug":"生成服务端证书","link":"#生成服务端证书","children":[]},{"level":3,"title":"生成客户端证书","slug":"生成客户端证书","link":"#生成客户端证书","children":[]}]},{"level":2,"title":"实现","slug":"实现","link":"#实现","children":[{"level":3,"title":"服务端","slug":"服务端","link":"#服务端","children":[]},{"level":3,"title":"客户端","slug":"客户端","link":"#客户端","children":[]}]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}],"relativePath":"pages/posts/grpc-and-protobuf-in-go-tls.md","path":"/home/runner/work/blog-source-valaxy/blog-source-valaxy/pages/posts/grpc-and-protobuf-in-go-tls.md","lastUpdated":1726839524000}'),n=y(),e=k.frontmatter||{};return n.meta.frontmatter=Object.assign(n.meta.frontmatter||{},k.frontmatter||{}),F("pageData",k),F("valaxy:frontmatter",e),globalThis.$frontmatter=e,r({frontmatter:{title:"Go 的 gRPC 和 Protocol Buffers---TLS 认证",date:"2023-10-23 09:29:29",updated:"2023-10-23 09:29:29",tags:["代码","Go","gRPC","Protobuf"],categories:"小技术",hide:null,author:"Krau",copyright:!0,icon:null,cover:null,postTitleClass:"text-#79d4fd",pageTitleClass:"text-#79d4fd",comment:!0,end:!1,encrypt:!1,time_warning:!1}}),(a,l)=>{const p=d;return E(),g(p,{frontmatter:D(e)},{"main-content-md":t(()=>[l[0]||(l[0]=i("h2",{id:"前言",tabindex:"-1"},[s("前言 "),i("a",{class:"header-anchor",href:"#前言","aria-label":'Permalink to "前言"'},"​")],-1)),l[1]||(l[1]=i("p",null,"为了保证 gRPC 服务不被第三方监听和调用, 防止通信被篡改或伪造, 需要对 gRPC 服务添加身份验证机制.",-1)),l[2]||(l[2]=i("p",null,"目前 gRPC 内置了三种身份验证机制:",-1)),l[3]||(l[3]=i("ul",null,[i("li",null,[i("strong",null,"SSL/TLS"),s(": gRPC 集成了 SSL/TLS, 提倡使用 SSL/TLS 对服务器进行身份验证, 并对客户端与服务器之间交换的所有数据进行加密。同时可选让客户端提供用于相互验证的证书.")]),i("li",null,[i("strong",null,"基于 Token 的身份验证"),s(": gRPC 提供了一种可将基于元数据的凭证附加到请求和响应中的机制. 这种机制必须与 SSL/TLS 同时使用, 以提供完整的身份验证和加密通信.")]),i("li",null,[i("strong",null,"ATLS"),s(": Google 自家的双向身份验证和传输安全系统, 通常也用于在 Google 家的平台上构建服务时.")])],-1)),l[4]||(l[4]=i("p",null,"本文介绍 gRPC 中的 SSL/TLS.",-1)),o(" more "),l[5]||(l[5]=i("div",{class:"tip custom-block"},[i("p",{class:"custom-block-title"},[i("span",{lang:"en"},"TIP"),i("span",{lang:"zh-CN"},"提示")]),i("p",null,"本文环境"),i("ul",null,[i("li",null,"Debian 12 amd64"),i("li",null,"Go 1.21.3")])],-1)),l[6]||(l[6]=i("h2",{id:"san-ca-和证书",tabindex:"-1"},[s("SAN, CA 和证书 "),i("a",{class:"header-anchor",href:"#san-ca-和证书","aria-label":'Permalink to "SAN, CA 和证书"'},"​")],-1)),l[7]||(l[7]=i("p",null,[s("使用 TLS 就需要证书. 在 Go 1.15 版本之后废弃了 "),i("code",null,"CommonName"),s(", 而是要使用 "),i("code",null,"Subject Alternative Name"),s(" (SAN) 来验证证书的有效性. 因此如果按照以前的方法生成证书, 大概率会导致下面的错误:")],-1)),l[8]||(l[8]=i("blockquote",null,[i("p",null,[i("code",null,'rpc error: code = Unavailable desc = connection error: desc = "transport: authentication handshake failed: x509: certificate relies on legacy Common Name field, use SANs or temporarily enable Common Name matching with GODEBUG=x509ignoreCN=0"')])],-1)),l[9]||(l[9]=i("p",null,"SAN 是 x509 定义中的一个扩展, 用于指定证书的使用范围. 使用了 SAN 扩展的证书, 可以在证书中指定多个域名或 IP 地址, 从而可以在一个证书中同时包含多个域名或 IP 地址.",-1)),l[10]||(l[10]=i("p",null,"CA (Certificate Authority), 即证书颁发机构, 用于管理和签发证书. 作用是检查证书持有者的合法性, 并颁发证书, 防止证书被伪造.",-1)),l[11]||(l[11]=i("p",null,"CA 自己也需要有证书, 称为根证书, 用于签发其他证书. 一般情况下, 根证书是自签名的, 即自己给自己签发证书. 根证书是信任链的起点, 有了根证书之后 CA 才能给其他人签发证书.",-1)),l[12]||(l[12]=i("p",null,"因此, 要想在 gRPC 中使用 TLS, 需要准备三组证书:",-1)),l[13]||(l[13]=i("ul",null,[i("li",null,"CA 根证书"),i("li",null,"服务端证书"),i("li",null,"客户端证书")],-1)),l[14]||(l[14]=i("h2",{id:"生成证书",tabindex:"-1"},[s("生成证书 "),i("a",{class:"header-anchor",href:"#生成证书","aria-label":'Permalink to "生成证书"'},"​")],-1)),l[15]||(l[15]=i("h3",{id:"生成-ca-证书",tabindex:"-1"},[s("生成 CA 证书 "),i("a",{class:"header-anchor",href:"#生成-ca-证书","aria-label":'Permalink to "生成 CA 证书"'},"​")],-1)),l[16]||(l[16]=i("p",null,[s("在任意目录下创建 "),i("code",null,"ca.conf"),s(" 文件:")],-1)),l[17]||(l[17]=i("div",{class:"language-ini vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"ini"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#89DDFF"}},"[ req ]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"default_bits"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"       ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," 4096")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"distinguished_name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," moe")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#89DDFF"}},"[ moe ]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"countryName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"                 ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," GB")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"countryName_default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"         ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," BeiJing")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"stateOrProvinceName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"         ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," State or Province Name (full name)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"stateOrProvinceName_default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," BeiJing")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"localityName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"                ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Locality Name (eg, city)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"localityName_default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"        ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," NanJing")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"organizationName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"            ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Organization Name (eg, company)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"organizationName_default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Kompany")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"commonName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"                  ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," krau.top")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"commonName_max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"              ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," 64")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"commonName_default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"          ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," krau.top")])])]),i("button",{class:"collapse"})],-1)),l[18]||(l[18]=i("p",null,"执行下面的命令生成 CA 私钥:",-1)),l[19]||(l[19]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"openssl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," genrsa"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -out"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ca.key"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 4096")])])]),i("button",{class:"collapse"})],-1)),l[20]||(l[20]=i("p",null,"然后生成 CA 证书:",-1)),l[21]||(l[21]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"openssl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," req"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -new"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -x509"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -days"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 3650"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -key"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ca.key"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -out"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ca.crt"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -config"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ca.conf")])])]),i("button",{class:"collapse"})],-1)),l[22]||(l[22]=i("p",null,[s("根据提示输入各种信息, 最后会生成 "),i("code",null,"ca.crt"),s(" 文件.")],-1)),l[23]||(l[23]=i("h3",{id:"生成服务端证书",tabindex:"-1"},[s("生成服务端证书 "),i("a",{class:"header-anchor",href:"#生成服务端证书","aria-label":'Permalink to "生成服务端证书"'},"​")],-1)),l[24]||(l[24]=i("p",null,[s("新建 "),i("code",null,"server.conf"),s(":")],-1)),l[25]||(l[25]=i("div",{class:"language-ini vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"ini"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#89DDFF"}},"[ req ]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"default_bits"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"       ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," 2048")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"distinguished_name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," moe")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#89DDFF"}},"[ moe ]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"countryName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"                 ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Country Name (2 letter code)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"countryName_default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"         ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," CN")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"stateOrProvinceName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"         ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," State or Province Name (full name)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"stateOrProvinceName_default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," JiangSu")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"localityName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"                ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Locality Name (eg, city)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"localityName_default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"        ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," NanJing")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"organizationName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"            ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Organization Name (eg, company)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"organizationName_default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ovocom")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"commonName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"                  ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," CommonName (e.g. server FQDN or YOUR name)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"commonName_max"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"              ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," 64")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"commonName_default"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"          ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," localhost "),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"# 此值应该包含在 [alt_names] 中")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#89DDFF"}},"[ req_ext ]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"subjectAltName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," @alt_names")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#89DDFF"}},"[alt_names]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"DNS.1"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"   ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," localhost")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F07178"}},"IP"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"      ="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," 127.0.0.1")])])]),i("button",{class:"collapse"})],-1)),l[26]||(l[26]=i("div",{class:"warning custom-block"},[i("p",{class:"custom-block-title"},[i("span",{lang:"en"},"WARNING"),i("span",{lang:"zh-CN"},"注意")]),i("p",null,[i("code",null,"commonName_default"),s(" 的值应该包含在 "),i("code",null,"[alt_names]"),s(" 中, 并且在连接时, 客户端的值需要与其匹配.")])],-1)),l[27]||(l[27]=i("p",null,"生成私钥:",-1)),l[28]||(l[28]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"openssl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," genrsa"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -out"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," server.key"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 2048")])])]),i("button",{class:"collapse"})],-1)),l[29]||(l[29]=i("p",null,"生成 csr:",-1)),l[30]||(l[30]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"openssl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," req"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -new"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -key"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," server.key"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -out"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," server.csr"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -config"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," server.conf")])])]),i("button",{class:"collapse"})],-1)),l[31]||(l[31]=i("p",null,"请求 CA 签发证书:",-1)),l[32]||(l[32]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"openssl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," x509"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -req"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -days"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 3650"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -in"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," server.csr"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -CA"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ca.crt"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -CAkey"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ca.key"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -CAcreateserial"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -out"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," server.crt"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -extensions"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," req_ext"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -extfile"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," server.conf")])])]),i("button",{class:"collapse"})],-1)),l[33]||(l[33]=i("h3",{id:"生成客户端证书",tabindex:"-1"},[s("生成客户端证书 "),i("a",{class:"header-anchor",href:"#生成客户端证书","aria-label":'Permalink to "生成客户端证书"'},"​")],-1)),l[34]||(l[34]=i("p",null,"客户端不需要配置文件, 直接生成私钥:",-1)),l[35]||(l[35]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"openssl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," genrsa"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -out"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," client.key"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 2048")])])]),i("button",{class:"collapse"})],-1)),l[36]||(l[36]=i("p",null,"生成 csr:",-1)),l[37]||(l[37]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"openssl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," req"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -new"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -key"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," client.key"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -out"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," client.csr")])])]),i("button",{class:"collapse"})],-1)),l[38]||(l[38]=i("p",null,"请求 CA 签发证书:",-1)),l[39]||(l[39]=i("div",{class:"language-bash vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"bash"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"openssl"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," x509"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -req"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -days"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," 3650"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -in"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," client.csr"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -CA"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ca.crt"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -CAkey"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ca.key"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -CAcreateserial"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#C3E88D"}}," -out"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," client.crt")])])]),i("button",{class:"collapse"})],-1)),l[40]||(l[40]=i("p",null,[s("现在已经准备好证书了. 服务端需要 "),i("code",null,"server.crt"),s(" 和 "),i("code",null,"server.key"),s(", 客户端需要 "),i("code",null,"client.crt"),s(" 和 "),i("code",null,"client.key"),s(". 此外, 两者都需要 "),i("code",null,"ca.crt"),s(".")],-1)),l[41]||(l[41]=i("h2",{id:"实现",tabindex:"-1"},[s("实现 "),i("a",{class:"header-anchor",href:"#实现","aria-label":'Permalink to "实现"'},"​")],-1)),l[42]||(l[42]=i("h3",{id:"服务端",tabindex:"-1"},[s("服务端 "),i("a",{class:"header-anchor",href:"#服务端","aria-label":'Permalink to "服务端"'},"​")],-1)),l[43]||(l[43]=i("p",null,"关注高亮行",-1)),l[44]||(l[44]=i("div",{class:"language-go vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"package"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," main")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," (")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"crypto/tls"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"crypto/x509"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"net"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"os"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"fmt"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"google.golang.org/grpc"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"google.golang.org/grpc/credentials"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'    "'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"example/proto"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"func"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," main"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	pair"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," tls"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"LoadX509KeyPair"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"./server.crt"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},' "'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"./server.key"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"	if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		fmt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Printf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"Failed to load certificates: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%s"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"		return")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"	}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	certPool "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," x509"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"NewCertPool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	ca"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," os"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"ReadFile"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"./ca.crt"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 读取根证书")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"	if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		fmt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Printf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"Failed to read ca certificate: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%s"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"		return")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"	}")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"	if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ok "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," certPool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"AppendCertsFromPEM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ca"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},");"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," !"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ok "),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		fmt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Println"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"Failed to append ca certificate"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"		return")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"	}")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	creds "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," credentials"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"NewTLS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"&"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"tls"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"Config"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		Certificates"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," []"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"tls"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"Certificate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"pair"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"},")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		ClientAuth"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"   tls"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"RequireAndVerifyClientCert"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},",")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		ClientCAs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    certPool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},",")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"	})")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	s "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," grpc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"NewServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"grpc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Creds"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"creds"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"))")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"RegisterArtworkServiceServer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"s"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," &"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"server"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{})")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	lis"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," net"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Listen"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"tcp"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},' "'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},":39010"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        fmt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Printf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"Failed to listen: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%s"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        return")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"    }")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"	if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," s"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Serve"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"lis"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},");"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		fmt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Printf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"Failed to serve: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%s"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"		return")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"}")])])]),i("button",{class:"collapse"})],-1)),l[45]||(l[45]=i("h3",{id:"客户端",tabindex:"-1"},[s("客户端 "),i("a",{class:"header-anchor",href:"#客户端","aria-label":'Permalink to "客户端"'},"​")],-1)),l[46]||(l[46]=i("p",null,"关注高亮行",-1)),l[47]||(l[47]=i("div",{class:"language-go vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"go"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"package"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}}," main")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," (")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"crypto/tls"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"crypto/x509"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"os"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"example/proto"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"google.golang.org/grpc"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'	"'),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"google.golang.org/grpc/credentials"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"func"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," main"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	pair"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," tls"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"LoadX509KeyPair"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"./client.crt"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},' "'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"./client.key"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"	if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		fmt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Printf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"Failed to load certificates: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%s"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"		return")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"	}")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	certPool "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," x509"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"NewCertPool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	ca"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," os"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"ReadFile"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"./ca.crt"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"	if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        fmt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Printf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"Failed to read ca certificate: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%s"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"		return")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"	}")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"	if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ok "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," certPool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"AppendCertsFromPEM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ca"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},");"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," !"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ok "),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		fmt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Println"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"Failed to append ca certificate"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"  ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"		return")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"	}")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	cred "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," credentials"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"NewTLS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"&"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"tls"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"Config"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		Certificates"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," []"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"tls"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"Certificate"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"pair"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"},")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		ServerName"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'   "'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"localhost"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," // 服务端生成证书时的 commonName")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		RootCAs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"      certPool"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},",")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"	})")]),s(`
`),i("span",{class:"line highlighted"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"	conn"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," grpc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Dial"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"127.0.0.1:39010"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," grpc"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"WithTransportCredentials"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"cred"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"))")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"	if"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"!="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}}," nil"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," {")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"		fmt"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Printf"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"Failed to dial: "),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"%s"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," err"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"		return")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"	}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"	defer"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," conn"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"Close"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    client "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},":="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," proto"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}},"NewArtworkServiceClient"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"conn"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    // ...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"}")])])]),i("button",{class:"collapse"})],-1)),l[48]||(l[48]=i("h2",{id:"参考",tabindex:"-1"},[s("参考 "),i("a",{class:"header-anchor",href:"#参考","aria-label":'Permalink to "参考"'},"​")],-1)),l[49]||(l[49]=i("ul",null,[i("li",null,[i("a",{href:"https://grpc.io/docs/guides/auth/",target:"_blank",rel:"noreferrer"},"gRPC Authentication")])],-1))]),"main-header":t(()=>[h(a.$slots,"main-header")]),"main-header-after":t(()=>[h(a.$slots,"main-header-after")]),"main-nav":t(()=>[h(a.$slots,"main-nav")]),"main-content":t(()=>[h(a.$slots,"main-content")]),"main-content-after":t(()=>[h(a.$slots,"main-content-after")]),"main-nav-before":t(()=>[h(a.$slots,"main-nav-before")]),"main-nav-after":t(()=>[h(a.$slots,"main-nav-after")]),comment:t(()=>[h(a.$slots,"comment")]),footer:t(()=>[h(a.$slots,"footer")]),aside:t(()=>[h(a.$slots,"aside")]),"aside-custom":t(()=>[h(a.$slots,"aside-custom")]),default:t(()=>[h(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{N as default};
