import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang-DVbs8TRx.js";import{c as d,w as t,u as y,a as g,p as n,o as D,e as E,d as l,f as i,g as s}from"./app-CP7R0JMg.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-DbgA9qPq.js";import"./YunCard.vue_vue_type_script_setup_true_lang-Iavb4A1N.js";import"./index-C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-CSg_UIf2.js";import"./index-C7yU5XnD.js";import"./post-BNXBBnB8.js";const o=i("div",{class:"info custom-block"},[i("p",{class:"custom-block-title"},[i("span",{lang:"en"},"INFO"),i("span",{lang:"zh-CN"},"信息")]),i("p",null,"2024-01-14 更新:"),i("p",null,"修复了一些错误, 删除了一些不必要的内容"),i("p",null,[s("评论区有人建议建一个群组讨论: "),i("a",{href:"https://t.me/kmuachat",target:"_blank",rel:"noreferrer"},"@kmuachat")]),i("p",null,[s("本文只是我最初写 bot 时的一点笔记, 更建议你直接看 "),i("a",{href:"https://docs.python-telegram-bot.org",target:"_blank",rel:"noreferrer"},"Python-Telegram-Bot"),s(" 的文档")])],-1),c=i("h2",{id:"前言",tabindex:"-1"},[s("前言 "),i("a",{class:"header-anchor",href:"#前言","aria-label":'Permalink to "前言"'},"​")],-1),A=i("p",null,[i("s",null,"为了激发群友们水群的积极性，"),s(" 为了学习和应用 python 知识，我最近在开发一个 telegram 的 bot，所以写这篇文章以记录和分享")],-1),u=i("p",null,[s("在这篇文章中，将使用 "),i("a",{href:"https://docs.python-telegram-bot.org",target:"_blank",rel:"noreferrer"},"Python-Telegram-Bot"),s(" ，基于 Python 的异步特性与 Telegram 友好开放的 API，开发一个兼顾实用性和趣味的 bot ，并使用 Docker 在任何地方部署 bot")],-1),_=i("p",null,[s("Demo: "),i("a",{href:"https://github.com/krau/kmua-bot",target:"_blank",rel:"noreferrer"},"kmua-bot")],-1),f=i("p",null,"本文不是从零开始的教程，阅读本文前，你需要具有一点点(真的很少一点)的 python 或其他语言编程的基础。",-1),m=i("h2",{id:"准备",tabindex:"-1"},[s("准备 "),i("a",{class:"header-anchor",href:"#准备","aria-label":'Permalink to "准备"'},"​")],-1),C=i("h3",{id:"环境搭建",tabindex:"-1"},[s("环境搭建 "),i("a",{class:"header-anchor",href:"#环境搭建","aria-label":'Permalink to "环境搭建"'},"​")],-1),b=i("p",null,[s("使用你喜欢的工具创建虚拟环境，并安装 "),i("code",null,"python-telegram-bot"),s(" 库")],-1),v=i("div",{class:"language-shell vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"shell"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#FFCB6B"}},"pip"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," install"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," python-telegram-bot")])])]),i("button",{class:"collapse"})],-1),x=i("h3",{id:"bot-申请",tabindex:"-1"},[s("bot 申请 "),i("a",{class:"header-anchor",href:"#bot-申请","aria-label":'Permalink to "bot 申请"'},"​")],-1),T=i("p",null,[s("私聊 "),i("a",{href:"https://t.me/BotFather",target:"_blank",rel:"noreferrer"},"@BotFather"),s("。发送 "),i("code",null,"/newbot"),s("，根据提示一步步创建，记得妥善保存最后的 "),i("strong",null,"API Token"),s("。")],-1),P=i("h3",{id:"获取你的-id",tabindex:"-1"},[s("获取你的 id "),i("a",{class:"header-anchor",href:"#获取你的-id","aria-label":'Permalink to "获取你的 id"'},"​")],-1),w=i("p",null,[s("每个 tg 用户都有一串唯一标识，即为 "),i("strong",null,"user_id"),s("，可以私聊 "),i("a",{href:"https://t.me/kmuav2bot",target:"_blank",rel:"noreferrer"},"@kmua"),s(" 发送 "),i("code",null,"/id"),s(" 来获取它")],-1),U=i("h2",{id:"编程",tabindex:"-1"},[s("编程 "),i("a",{class:"header-anchor",href:"#编程","aria-label":'Permalink to "编程"'},"​")],-1),O=i("h3",{id:"开始-响应-start",tabindex:"-1"},[s("开始:响应/start "),i("a",{class:"header-anchor",href:"#开始-响应-start","aria-label":'Permalink to "开始:响应/start"'},"​")],-1),H=i("p",null,[s("在项目文件夹内，新建 "),i("code",null,"bot.py"),s("，开始编写 bot 最基础的功能，让其响应 /start 命令")],-1),N=i("p",null,"首先，导入包",-1),B=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," telegram "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," telegram"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ext "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ApplicationBuilder"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," CommandHandler")])])]),i("button",{class:"collapse"})],-1),$=i("p",null,'Update 类是从 Telegram 服务器获取到的各种"更新", 包括而不限于用户发送的消息, 群组的信息变化等.',-1),M=i("p",null,"然后，写一个异步函数 start()，当收到 /start 命令时，要调用它。",-1),R=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"async"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," def"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"DEFAULT_TYPE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    '''"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"响应start命令"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"'''")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    text "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}}," '"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"你好~我是一个bot"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"send_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_chat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"text"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"text"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")])])]),i("button",{class:"collapse"})],-1),Y=i("p",null,[s("这个函数接受两个参数 "),i("code",null,"update"),s(" 和 "),i("code",null,"context"),s("，形参冒号后是类型注解。")],-1),K=i("p",null,[i("code",null,"context.bot.send_message()"),s(" 方法即为让 bot 发送消息，它能接受的参数其实很多，但是往往只需要 "),i("code",null,"chat_id"),s(" ，和 "),i("code",null,"text"),s(" 就够了，它们分别表示 要发送消息给的用户或群组 id ，要发送的文本。")],-1),L=i("p",null,[s("而 "),i("code",null,"update.effective_chat.id"),s(" 即为当前有效对话的 id ，bot 收到的是哪里的消息 ，它就指向哪里的 id。")],-1),S=i("p",null,"现在，添加一个处理器(handler)",-1),I=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"start_handler "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," CommandHandler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"start"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")])])]),i("button",{class:"collapse"})],-1),Z=i("p",null,[i("code",null,"CommandHandler"),s(" 类可以实现当收到某个命令时，调用某个函数（命令和函数名可以不一样），我们将其实例化为了 "),i("code",null,"start_handler"),s(" ，并且将命令名字 'start' 和对应要回调的函数名 "),i("code",null,"start"),s(" 传递给它")],-1),G=i("p",null,"然后，启动bot",-1),j=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"# 构建 bot")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#EEFFFF"}},"TOKEN"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"你 bot 的 api token"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," ApplicationBuilder"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"token"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#82AAFF"}},"TOKEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"build"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"# 注册 handler")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"add_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"start_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"# run!")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"run_polling"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")])])]),i("button",{class:"collapse"})],-1),V=i("p",null,[s("最后，就可以使用 "),i("code",null,"python bot.py"),s(" 启动你的 bot ，对 bot 发送 /start ，它应该就会回复你 ”你好~我是一个bot”。 使用 Ctrl + C 结束程序运行。")],-1),q=i("p",null,"上述完整代码:",-1),z=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," telegram "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," telegram"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ext "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ApplicationBuilder"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," CommandHandler")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"async"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," def"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"DEFAULT_TYPE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    '''"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"响应start命令"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"'''")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    text "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}}," '"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"你好~我是一个bot"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"send_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_chat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"text"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"text"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"start_handler "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," CommandHandler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"start"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"# 构建 bot")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#EEFFFF"}},"TOEKN"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"你 bot 的 api token"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," ApplicationBuilder"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"token"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#82AAFF"}},"TOKEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"build"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"# 注册 handler")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"add_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"start_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"# run!")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"run_polling"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")])])]),i("button",{class:"collapse"})],-1),W=i("p",null,"到这里，其实你已经了解到了最基本的 telegram bot 编写规则，即：",-1),X=i("ol",null,[i("li",null,[s("编写回调函数。上面的例子中即为 "),i("code",null,"start"),s(" 这个函数。")]),i("li",null,[s("决定调用回调函数的规则。上述例子中，即为收到 "),i("code",null,"/start"),s(" 命令时，调用 "),i("code",null,"start"),s(" 函数")]),i("li",null,[s("实例化 "),i("code",null,"handler"),s(" , 注册给 "),i("code",null,"application"),s("。上述例子中，即为 "),i("code",null,"application.add_handler(start_handler)")])],-1),J=i("div",{class:"tip custom-block"},[i("p",{class:"custom-block-title"},[i("span",{lang:"en"},"TIP"),i("span",{lang:"zh-CN"},"提示")]),i("p",null,"如果你的环境无法直接访问 Telegram 服务器，可以设置代理"),i("p",null,"全局代理, 代理整个程序."),i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"os"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"environ"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"["),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"http_proxy"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"]"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}}," '"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"代理地址"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"os"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"environ"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"["),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"https_proxy"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"]"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," ="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}}," '"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"代理地址"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'")])])]),i("button",{class:"collapse"})]),i("p",null,"若想仅为 telegram bot api 设置代理,则需要改动一下构建 bot 部分的代码:"),i("p",null,"http(s)代理:"),i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"proxy_url "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}}," '"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"http://USERNAME:PASSWORD@PROXY_HOST:PROXY_PORT"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"  # can also be a https proxy")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," ApplicationBuilder"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"token"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"TOKEN"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"proxy_url"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"proxy_url"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"get_updates_proxy_url"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"proxy_url"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"build"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")])])]),i("button",{class:"collapse"})]),i("p",null,[s("socks5代理,需要安装 "),i("code",null,"python-telegram-bot[socks]"),s(",然后:")]),i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"proxy_url "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},' "'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"socks5://user:pass@host:port"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," ApplicationBuilder"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"token"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"TOKEN"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"proxy_url"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"proxy_url"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"get_updates_proxy_url"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"proxy_url"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"build"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")])])]),i("button",{class:"collapse"})])],-1),Q=i("p",null,"接下来，写一些更有趣的功能，使用更复杂一些的规则来调用这些功能。",-1),ii=i("h3",{id:"授予群成员头衔",tabindex:"-1"},[s("授予群成员头衔 "),i("a",{class:"header-anchor",href:"#授予群成员头衔","aria-label":'Permalink to "授予群成员头衔"'},"​")],-1),si=i("p",null,[s("让群成员可以通过 bot 自助获得一个头衔吧，比如，群友可以在群里使用 "),i("code",null,"/p@botname 好人"),s(" 来给自己加上 “好人” 的头衔。")],-1),ti=i("p",null,"当然，前提是 bot 自己要是管理员，并且具有相应的权限。",-1),hi=i("p",null,"要实现这个功能，可以这样写:",-1),li=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"async"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," def"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," set_right"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"DEFAULT_TYPE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    '''"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"设置成员权限和头衔"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"'''")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    chat_id "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_chat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    user_id "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_user"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    bot_username_len "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#82AAFF"}}," len"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"_bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    custom_title "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"text"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}},"3"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot_username_len"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    if"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," not"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," custom_title"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        custom_title "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_user"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"username")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    try"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"promote_chat_member"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"chat_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," user_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"user_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," can_manage_chat"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}},"True"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"set_chat_administrator_custom_title"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"chat_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," user_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"user_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," custom_title"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"custom_title"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        text "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," f"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"'好,你现在是"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"custom_title"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}},"}"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"啦'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"send_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"chat_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," reply_to_message_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," text"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"text"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    except"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"send_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"chat_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," text"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"不行!!"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")])])]),i("button",{class:"collapse"})],-1),ai=i("p",null,"然后，添加这个功能的handler:",-1),ki=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"set_right_handler "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," CommandHandler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"p"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," set_right"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"add_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"set_right_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")])])]),i("button",{class:"collapse"})],-1),ei=i("p",null,[s("注意handler的添加应该在 "),i("code",null,"application.run_polling()"),s(" 之前，也就是说 "),i("code",null,"application.run_polling()"),s(" 才是真正开始运行 bot")],-1),ni=i("p",null,[s("简单解释一下 "),i("code",null,"set_right"),s(" 这个函数:")],-1),Fi=i("p",null,[s("首先，设置了调用这个函数时的 "),i("code",null,"chat_id"),s(" 和 "),i("code",null,"user_id"),s(" 为当前聊天和当前用户")],-1),ri=i("p",null,[s("然后用 "),i("code",null,"len(update._bot.name)"),s(" 获取 bot 自己用户名的长度，用于下面的切片选取用户想要的头衔")],-1),pi=i("p",null,[s("而 "),i("code",null,"custom_title = update.effective_message.text[3+bot_username_len:]"),s(" 即获取用户想要的头衔，存储在 "),i("code",null,"custom_title"),s(" 中，下面的 if not 的作用是，如果用户没有发送他想要的头衔，那么默认头衔为他的用户名")],-1),di=i("p",null,"由于只有管理员才有头衔，所以我们使用 promote_chat_member() 方法设置成员权限，将其的 can_manage_chat 权限设置为 True 。注意，即使这样设置了，用户实则是有名无权的状态，只有一个管理员的名头，实际上没有任何权限。",-1),yi=i("blockquote",null,[i("p",null,"要想赋予权限，你可以向 promote_chat_member() 方法中继续添加参数，如 can_pin_messages=True 可置顶消息")],-1),gi=i("p",null,[s("然后就可以使用 "),i("code",null,"set_chat_administrator_custom_title()"),s(" 方法设置成员头衔了，如果成功了，会继续执行接下来的语句，将结果反馈给用户。")],-1),Di=i("h3",{id:"响应未知命令",tabindex:"-1"},[s("响应未知命令 "),i("a",{class:"header-anchor",href:"#响应未知命令","aria-label":'Permalink to "响应未知命令"'},"​")],-1),Ei=i("p",null,"如果 bot 只能回应设置好的命令就太无趣了，所以再编写一个当收到未知命令时的执行功能 比如，想要让 bot 回应未知命令说 “我不会这个哦~”，可以这样写",-1),oi=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"async"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," def"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," unknown"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"DEFAULT_TYPE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"send_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_chat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," text"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"我不会这个哦~"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")])])]),i("button",{class:"collapse"})],-1),ci=i("p",null,[s("然后，添加它的 "),i("code",null,"handler"),s("。这时候可能就出现问题： 前面的两个功能都是回应一个特定的命令，在这里，我们希望它回应除已经设定的命令外的其他所有命令，该怎么做？")],-1),Ai=i("p",null,[s("这就需要用到 "),i("code",null,"filters"),s(" ，即过滤需要处理器处理的更新. 并且要"),i("strong",null,"设置功能的优先级"),s(" 你需要先导入它")],-1),ui=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," telegram"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ext "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," filters")])])]),i("button",{class:"collapse"})],-1),_i=i("p",null,"然后可以这样写:",-1),fi=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"unknown_handler "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," MessageHandler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"filters"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"COMMAND"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," unknown"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")])])]),i("button",{class:"collapse"})],-1),mi=i("p",null,[i("code",null,"filters.COMMAND"),s(" 即为过滤出命令。而设置优先级其实很简单，在不对处理器分组的情况下, "),i("strong",null,[s("添加 "),i("code",null,"handler"),s(" 的顺序越靠后，对应功能的优先级越低")])],-1),Ci=i("p",null,[s("也就是说，我们需要在其他命令类 "),i("code",null,"handler"),s(" 之后，添加 "),i("code",null,"unknown_handler")],-1),bi=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"add_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"start_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"add_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"set_right_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"add_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"unkonw_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"run_polling"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")])])]),i("button",{class:"collapse"})],-1),vi=i("h3",{id:"简单的关键词回复",tabindex:"-1"},[s("简单的关键词回复 "),i("a",{class:"header-anchor",href:"#简单的关键词回复","aria-label":'Permalink to "简单的关键词回复"'},"​")],-1),xi=i("p",null,"bot 最常见的功能之一就是根据关键词回复特定内容，比如，当对 bot 说早安之类的话时，让 bot 对此做出回应。下面来实现这这一功能",-1),Ti=i("p",null,[s("由于命令和普通消息是两种不同的消息类，处理它们的方法是不一样的，针对非命令消息，要使用 "),i("code",null,"MessageHandler"),s(":")],-1),Pi=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," telegram"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ext "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," MessageHandler")])])]),i("button",{class:"collapse"})],-1),wi=i("p",null,"首先还是要编写这个功能执行的函数。",-1),Ui=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," random")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"async"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," def"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," ohayo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"DEFAULT_TYPE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    texts "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ["),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"早上好呀"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"我的小鱼你醒了，还记得清晨吗"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"哦哈哟~"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"send_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_chat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," text"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"random"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"choice"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"text"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"))")])])]),i("button",{class:"collapse"})],-1),Oi=i("p",null,[s("由于只回复一个固定的消息过于单调，所以我们使用 "),i("code",null,"random"),s(" 库来从一个列表中随机选择一个回复")],-1),Hi=i("p",null,[s("实际上，这个函数仍然只是简单的发送消息，而何时调用这个函数，并不是这个函数本身要做的事，而是由接下来我们要编写的 "),i("code",null,"MessageHandler"),s(" 中的 "),i("code",null,"filters"),s(" 决定的:")],-1),Ni=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"filter_ohayo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," filters"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"Regex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"早安|早上好|哦哈哟|ohayo"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ohayo_handler "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," MessageHandler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"filter_ohayo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," ohayo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")])])]),i("button",{class:"collapse"})],-1),Bi=i("p",null,[i("code",null,"filters.Regex()"),s(" 即为使用正则表达式过滤，我们使用 "),i("code",null,"'早安|早上好|哦哈哟|ohayo'"),s(" 这个表达式，很容易理解何时会调用 "),i("code",null,"ohayo"),s(" 这个函数")],-1),$i=i("p",null,[s("记得添加它的 "),i("code",null,"handler")],-1),Mi=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"add_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"ohayo_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")])])]),i("button",{class:"collapse"})],-1),Ri=i("hr",null,null,-1),Yi=i("p",null,"上面完整代码:",-1),Ki=i("div",{class:"language-python vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"python"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," random")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," telegram "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," telegram"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ext "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"import"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ApplicationBuilder"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," CommandHandler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," filters"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," MessageHandler")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"async"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," def"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"DEFAULT_TYPE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    '''"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"响应start命令"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"'''")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    text "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}}," '"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"你好~我是一个bot"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"send_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_chat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"text"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"text"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"async"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," def"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," set_right"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"DEFAULT_TYPE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    '''"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"设置成员权限和头衔"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"'''")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    chat_id "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_chat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    user_id "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_user"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    bot_username_len "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#82AAFF"}}," len"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"_bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    custom_title "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"text"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"["),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}},"3"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"+"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot_username_len"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    if"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}}," not"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," custom_title"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        custom_title "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_user"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"username")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    try"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"promote_chat_member"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"chat_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," user_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"user_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," can_manage_chat"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#89DDFF"}},"True"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"set_chat_administrator_custom_title"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"chat_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," user_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"user_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," custom_title"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"custom_title"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        text "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," f"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"'好,你现在是"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}},"{"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"custom_title"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}},"}"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"啦'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"send_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"chat_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," reply_to_message_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," text"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"text"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    except"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"        await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"send_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"chat_id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," text"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"不行!!"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"async"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," def"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," unknown"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"DEFAULT_TYPE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"send_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_chat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," text"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"我不会这个哦~"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}},"async"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#C792EA"}}," def"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#82AAFF"}}," ohayo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," Update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ContextTypes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"DEFAULT_TYPE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"):")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    texts "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}}," ["),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"早上好呀"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"我的小鱼你醒了，还记得清晨吗"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"哦哈哟~"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"    await"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"bot"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"send_message"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"chat_id"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"update"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"effective_chat"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#F07178"}},"id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#EEFFFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," text"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"random"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"choice"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"text"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"))")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"start_handler "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," CommandHandler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"start"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," start"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"set_right_handler "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," CommandHandler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"p"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," set_right"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"unknown_handler "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," MessageHandler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"filters"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F07178"}},"COMMAND"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," unknown"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"filter_ohayo "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," filters"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"Regex"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"早安|早上好|哦哈哟|ohayo"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"ohayo_handler "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," MessageHandler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"filter_ohayo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},","),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," ohayo"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"# 构建 bot")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#EEFFFF"}},"TOEKN"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"你 bot 的 api token"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},"'")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}}," ApplicationBuilder"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"token"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#82AAFF"}},"TOKEN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"build"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"# 注册 handler")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"add_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"start_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"add_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"set_right_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"add_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"unkonw_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"add_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"("),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"ohayo_handler"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},")")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#545454","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}},"# run!")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"application"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"."),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#82AAFF"}},"run_polling"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"()")])])]),i("button",{class:"collapse"})],-1),Li=i("h2",{id:"部署",tabindex:"-1"},[s("部署 "),i("a",{class:"header-anchor",href:"#部署","aria-label":'Permalink to "部署"'},"​")],-1),Si=i("p",null,"python 程序的环境管理很烦人,用docker来跑再合适不过.",-1),Ii=i("h3",{id:"docker-本地构建",tabindex:"-1"},[s("Docker 本地构建 "),i("a",{class:"header-anchor",href:"#docker-本地构建","aria-label":'Permalink to "Docker 本地构建"'},"​")],-1),Zi=i("p",null,[s("如果要在本地构建 docker 镜像,参考下面的 "),i("code",null,"Dockerfile"),s(" 文件")],-1),Gi=i("div",{class:"language-Dockerfile vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"Dockerfile"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," python:3.9")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"COPY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," . /app")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"WORKDIR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," /app")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"RUN"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," pip install -r requirements.txt")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F78C6C"}},"ENTRYPOINT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," [ "),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},'"python"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},'"/app/bot.py"'),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}}," ]")])])]),i("button",{class:"collapse"})],-1),ji=i("p",null,"将 Dockerfile 文件放到合适的目录(项目根目录即可),然后执行",-1),Vi=i("p",null,[i("code",null,"docker build -t bot .")],-1),qi=i("p",null,"注意后面有一个 .",-1),zi=i("p",null,[s("然后使用 "),i("code",null,"docker run -d bot"),s(" 启动容器,运行 bot")],-1),Wi=i("h3",{id:"使用-github-action-自动构建",tabindex:"-1"},[s("使用 GitHub action 自动构建 "),i("a",{class:"header-anchor",href:"#使用-github-action-自动构建","aria-label":'Permalink to "使用 GitHub action 自动构建"'},"​")],-1),Xi=i("p",null,[s("github action 可以构建 docker 镜像并发布到 ghcr,方便在其他地方部署 docker 容器.你依然需要在项目中写好 "),i("code",null,"Dockerfile")],-1),Ji=i("p",null,[s("在项目中新建 "),i("code",null,".github/workflows/build-docker.yml"),s(",参考以下配置")],-1),Qi=i("div",{class:"language-yml vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"yml"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," Build and publish docker container")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#FF9CAC"}},"on"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}}," push"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"     branches"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"     -"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," main")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"  workflow_dispatch"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"    ")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"jobs"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"  publish"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"    name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," Publish container image")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"    runs-on"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ubuntu-20.04")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"    env"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"      TZ"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," Asia/Shanghai")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"    steps"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"      -"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}}," name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," Checkout")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"        uses"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," actions/checkout@v3")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"      -"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}}," name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," OCI meta")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"        id"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," meta")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"        uses"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," docker/metadata-action@v4.1.1")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"        with"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          images"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ghcr.io/${{ github.repository }}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          tags"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#89DDFF","--shiki-light-font-style":"inherit","--shiki-dark-font-style":"italic"}}," |")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"            type=edge,branch=main")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"            type=ref,event=branch")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"            type=semver,pattern={{version}}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"            type=semver,pattern={{major}}.{{minor}}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"            type=semver,pattern={{major}}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"            type=sha")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"      -"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}}," name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," Set up Docker Buildx")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"        uses"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," docker/setup-buildx-action@v2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#EEFFFF"}},"        ")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"      -"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}}," name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," Set up QEMU")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"        uses"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," docker/setup-qemu-action@v2")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"      -"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}}," name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," Login to GHCR")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"        uses"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," docker/login-action@v2")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"        with"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          registry"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ghcr.io")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          username"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ${{ github.repository_owner }}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          password"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ${{ secrets.GITHUB_TOKEN }}")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"      -"),i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}}," name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," Build and push")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"        uses"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," docker/build-push-action@v3")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"        with"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          context"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#F78C6C"}}," .")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          push"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#FF9CAC"}}," true")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          tags"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ${{ steps.meta.outputs.tags }}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          labels"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ${{ steps.meta.outputs.labels }}")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          platforms"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," linux/amd64,linux/arm64")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          cache-from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," type=gha")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"          cache-to"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," type=gha,mode=max")])])]),i("button",{class:"collapse"})],-1),is=i("p",null,[s("然后可以使用 "),i("code",null,"docker pull"),s(" 的方法运行,或者使用 docker compose:")],-1),ss=i("p",null,[s("新建 "),i("code",null,"docker-compose.yml"),s(",参考以下内容")],-1),ts=i("div",{class:"language-yml vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"yml"),i("pre",{class:"shiki shiki-themes github-light material-theme-darker vp-code"},[i("code",{"v-pre":""},[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"version"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},' "'),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}},"3"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#89DDFF"}},'"')]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"services"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"  kmua"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"    image"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ghcr.io/krau/kmua-bot:main")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"    container_name"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," kmua-main")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"    init"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#FF9CAC"}}," true")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"    volumes"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"      -"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ./data:/kmua/data")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"      -"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ./logs:/kmua/logs")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"      -"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," ./config.yml:/kmua/config.yml")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#F07178"}},"    environment"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},":")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#89DDFF"}},"      -"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#C3E88D"}}," TZ=Asia/Shanghai")])])]),i("button",{class:"collapse"})],-1),hs=i("p",null,"注意根据自己需要更改",-1),ls=i("p",null,[s("然后就可以使用 "),i("code",null,"docker compose up -d"),s(" 启动容器")],-1),Es={__name:"tg-bot-dev-note-kmua",setup(as,{expose:F}){const a=JSON.parse('{"title":"使用Python写一个Telegram bot吧|Telegram bot教程","description":"","frontmatter":{"categories":"小技术","date":"2022-12-20T10:22:19.000Z","layout":"post","tags":["Python","telegram","bot","代码"],"title":"使用Python写一个Telegram bot吧|Telegram bot教程","updated":"2024-01-14T09:13:19.000Z"},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"准备","slug":"准备","link":"#准备","children":[{"level":3,"title":"环境搭建","slug":"环境搭建","link":"#环境搭建","children":[]},{"level":3,"title":"bot 申请","slug":"bot-申请","link":"#bot-申请","children":[]},{"level":3,"title":"获取你的 id","slug":"获取你的-id","link":"#获取你的-id","children":[]}]},{"level":2,"title":"编程","slug":"编程","link":"#编程","children":[{"level":3,"title":"开始:响应/start","slug":"开始-响应-start","link":"#开始-响应-start","children":[]},{"level":3,"title":"授予群成员头衔","slug":"授予群成员头衔","link":"#授予群成员头衔","children":[]},{"level":3,"title":"响应未知命令","slug":"响应未知命令","link":"#响应未知命令","children":[]},{"level":3,"title":"简单的关键词回复","slug":"简单的关键词回复","link":"#简单的关键词回复","children":[]}]},{"level":2,"title":"部署","slug":"部署","link":"#部署","children":[{"level":3,"title":"Docker 本地构建","slug":"docker-本地构建","link":"#docker-本地构建","children":[]},{"level":3,"title":"使用 GitHub action 自动构建","slug":"使用-github-action-自动构建","link":"#使用-github-action-自动构建","children":[]}]}],"relativePath":"pages/posts/tg-bot-dev-note-kmua.md","path":"/home/runner/work/blog-source-valaxy/blog-source-valaxy/pages/posts/tg-bot-dev-note-kmua.md","lastUpdated":1717031049000}'),e=g(),k=a.frontmatter||{};return e.meta.frontmatter=Object.assign(e.meta.frontmatter||{},a.frontmatter||{}),n("pageData",a),n("valaxy:frontmatter",k),globalThis.$frontmatter=k,F({frontmatter:{categories:"小技术",date:"2022-12-20T10:22:19.000Z",layout:"post",tags:["Python","telegram","bot","代码"],title:"使用Python写一个Telegram bot吧|Telegram bot教程",updated:"2024-01-14T09:13:19.000Z"}}),(h,es)=>{const r=p;return D(),d(r,{frontmatter:y(k)},{"main-content-md":t(()=>[o,c,A,u,_,f,E(" more "),m,C,b,v,x,T,P,w,U,O,H,N,B,$,M,R,Y,K,L,S,I,Z,G,j,V,q,z,W,X,J,Q,ii,si,ti,hi,li,ai,ki,ei,ni,Fi,ri,pi,di,yi,gi,Di,Ei,oi,ci,Ai,ui,_i,fi,mi,Ci,bi,vi,xi,Ti,Pi,wi,Ui,Oi,Hi,Ni,Bi,$i,Mi,Ri,Yi,Ki,Li,Si,Ii,Zi,Gi,ji,Vi,qi,zi,Wi,Xi,Ji,Qi,is,ss,ts,hs,ls]),"main-header":t(()=>[l(h.$slots,"main-header")]),"main-header-after":t(()=>[l(h.$slots,"main-header-after")]),"main-nav":t(()=>[l(h.$slots,"main-nav")]),"main-content":t(()=>[l(h.$slots,"main-content")]),"main-content-after":t(()=>[l(h.$slots,"main-content-after")]),"main-nav-before":t(()=>[l(h.$slots,"main-nav-before")]),"main-nav-after":t(()=>[l(h.$slots,"main-nav-after")]),comment:t(()=>[l(h.$slots,"comment")]),footer:t(()=>[l(h.$slots,"footer")]),aside:t(()=>[l(h.$slots,"aside")]),"aside-custom":t(()=>[l(h.$slots,"aside-custom")]),default:t(()=>[l(h.$slots,"default")]),_:3},8,["frontmatter"])}}};export{Es as default};
