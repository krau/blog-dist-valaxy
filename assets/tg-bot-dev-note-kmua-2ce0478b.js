import{_ as D}from"./ValaxyMain.vue_vue_type_style_index_0_lang-7aad2c26.js";import{_ as y,c as F,w as o,o as A,b as l,d as s,e,a as C,r as a,f as i,p as d}from"./app-6216bac5.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-0c49cff8.js";import"./YunCard.vue_vue_type_style_index_0_lang-383e316f.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-85380aaf.js";const bo=JSON.parse('{"title":"使用Python写一个Telegram bot吧|Telegram bot教程","description":"","frontmatter":{"categories":"小技术","date":"2022-12-20T10:22:19.000Z","layout":"post","tags":["Python","telegram","bot","代码"],"title":"使用Python写一个Telegram bot吧|Telegram bot教程","updated":"2023-02-21T16:13:19.000Z"},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"准备","slug":"准备","link":"#准备","children":[{"level":3,"title":"环境","slug":"环境","link":"#环境","children":[]},{"level":3,"title":"bot 申请","slug":"bot-申请","link":"#bot-申请","children":[]},{"level":3,"title":"获取你的 id","slug":"获取你的-id","link":"#获取你的-id","children":[]}]},{"level":2,"title":"基础","slug":"基础","link":"#基础","children":[{"level":3,"title":"开始:响应/start","slug":"开始-响应-start","link":"#开始-响应-start","children":[]},{"level":3,"title":"授予群成员头衔","slug":"授予群成员头衔","link":"#授予群成员头衔","children":[]},{"level":3,"title":"响应未知命令","slug":"响应未知命令","link":"#响应未知命令","children":[]},{"level":3,"title":"简单的关键词回复","slug":"简单的关键词回复","link":"#简单的关键词回复","children":[]}]},{"level":2,"title":"进阶","slug":"进阶","link":"#进阶","children":[{"level":3,"title":"定制日志系统","slug":"定制日志系统","link":"#定制日志系统","children":[]},{"level":3,"title":"使用 yml 文件配置","slug":"使用-yml-文件配置","link":"#使用-yml-文件配置","children":[]},{"level":3,"title":"使用 json 存取词库","slug":"使用-json-存取词库","link":"#使用-json-存取词库","children":[]},{"level":3,"title":"使用 docker 部署 bot","slug":"使用-docker-部署-bot","link":"#使用-docker-部署-bot","children":[]}]},{"level":2,"title":"附加","slug":"附加","link":"#附加","children":[{"level":3,"title":"使用playwright查询mc模组信息并记录","slug":"使用playwright查询mc模组信息并记录","link":"#使用playwright查询mc模组信息并记录","children":[]}]}],"relativePath":"pages/posts/tg-bot-dev-note-kmua.md","path":"/home/runner/work/blog-source-valaxy/blog-source-valaxy/pages/posts/tg-bot-dev-note-kmua.md","lastUpdated":1679801637000}'),c=JSON.parse('{"title":"使用Python写一个Telegram bot吧|Telegram bot教程","description":"","frontmatter":{"categories":"小技术","date":"2022-12-20T10:22:19.000Z","layout":"post","tags":["Python","telegram","bot","代码"],"title":"使用Python写一个Telegram bot吧|Telegram bot教程","updated":"2023-02-21T16:13:19.000Z"},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"准备","slug":"准备","link":"#准备","children":[{"level":3,"title":"环境","slug":"环境","link":"#环境","children":[]},{"level":3,"title":"bot 申请","slug":"bot-申请","link":"#bot-申请","children":[]},{"level":3,"title":"获取你的 id","slug":"获取你的-id","link":"#获取你的-id","children":[]}]},{"level":2,"title":"基础","slug":"基础","link":"#基础","children":[{"level":3,"title":"开始:响应/start","slug":"开始-响应-start","link":"#开始-响应-start","children":[]},{"level":3,"title":"授予群成员头衔","slug":"授予群成员头衔","link":"#授予群成员头衔","children":[]},{"level":3,"title":"响应未知命令","slug":"响应未知命令","link":"#响应未知命令","children":[]},{"level":3,"title":"简单的关键词回复","slug":"简单的关键词回复","link":"#简单的关键词回复","children":[]}]},{"level":2,"title":"进阶","slug":"进阶","link":"#进阶","children":[{"level":3,"title":"定制日志系统","slug":"定制日志系统","link":"#定制日志系统","children":[]},{"level":3,"title":"使用 yml 文件配置","slug":"使用-yml-文件配置","link":"#使用-yml-文件配置","children":[]},{"level":3,"title":"使用 json 存取词库","slug":"使用-json-存取词库","link":"#使用-json-存取词库","children":[]},{"level":3,"title":"使用 docker 部署 bot","slug":"使用-docker-部署-bot","link":"#使用-docker-部署-bot","children":[]}]},{"level":2,"title":"附加","slug":"附加","link":"#附加","children":[{"level":3,"title":"使用playwright查询mc模组信息并记录","slug":"使用playwright查询mc模组信息并记录","link":"#使用playwright查询mc模组信息并记录","children":[]}]}],"relativePath":"pages/posts/tg-bot-dev-note-kmua.md","path":"/home/runner/work/blog-source-valaxy/blog-source-valaxy/pages/posts/tg-bot-dev-note-kmua.md","lastUpdated":1679801637000}'),f={name:"pages/posts/tg-bot-dev-note-kmua.md",data(){return{data:c,frontmatter:c.frontmatter}},setup(){d("pageData",c)}},_={id:"前言",tabindex:"-1"},h=l("p",null,[l("s",null,"为了激发群友们水群的积极性，"),s(" 为了学习和应用 python 知识，我最近在开发一个 telegram 的 bot，所以写这篇文章以记录和分享")],-1),u=l("p",null,"本文不是从零开始的教程，阅读本文前，你需要具有一点点(真的很少一点)的 python 或其他语言编程的基础。",-1),m={id:"准备",tabindex:"-1"},g={id:"环境",tabindex:"-1"},E=l("p",null,"使用你喜欢的工具创建虚拟环境，并安装以下 Python 库",-1),b=l("div",{class:"language-yaml"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"PyYAML")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"telegram")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"python-telegram-bot")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"pypinyin")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"parsel")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"playwright")]),s(`
`),l("span",{class:"line"})])])],-1),x=l("li",null,"telegram: 基础的telegram包",-1),k=l("li",null,"python-telegram-bot: 一个对 Telegram bot api 封装的 python 库，注意版本，默认安装的是 13.14 ，要手动指定版本安装最新开发版本（截止写稿是 20.0a6 ），以支持异步特性。",-1),w=l("blockquote",null,[l("p",null,"更新: 2023-02-21: python-telegram-bot 已经默认安装最新版本了，不需要手动指定版本了")],-1),v=l("li",null,"pypinyin: 汉语拼音相关",-1),B=l("li",null,"playwright: 浏览器爬虫",-1),T=l("blockquote",null,[l("p",null,"更新: 2023-03-06: 用 playwright 重构")],-1),j={id:"bot-申请",tabindex:"-1"},U=l("code",null,"/newbot",-1),L=l("strong",null,"API Token",-1),P={id:"获取你的-id",tabindex:"-1"},N=l("strong",null,"user_id",-1),M=l("hr",null,null,-1),H={id:"基础",tabindex:"-1"},O={id:"开始-响应-start",tabindex:"-1"},$=l("p",null,[s("在项目文件夹内，新建 "),l("code",null,"bot.py"),s("，开始编写 bot 最基础的功能，让其响应 /start 命令")],-1),R=l("p",null,"首先，导入包（先不要管它们都是什么鬼东西）",-1),Y=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# Update:从Telegram获取更新")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),l("span",{style:{color:"#A6ACCD"}}," telegram "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," Update")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"#ApplicationBuilder:简单立即为构建 bot 对象")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"#ContextTypes:上下文类型")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"#CommandHandler:命令处理器")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),l("span",{style:{color:"#A6ACCD"}}," telegram"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#A6ACCD"}},"ext "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," ApplicationBuilder"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," ContextTypes"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," CommandHandler")]),s(`
`),l("span",{class:"line"})])])],-1),q=l("p",null,"然后，写一个异步函数 start()，当收到 /start 命令时，要调用它。",-1),G=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"start"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"update"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," Update"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"context"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," ContextTypes"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),l("span",{style:{color:"#676E95","font-style":"italic"}},"响应start命令"),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    text "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"你好~我是一个bot"),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"send_message"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_chat"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"text"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),S=l("p",null,[s("这个函数接受两个参数 "),l("code",null,"update"),s(" 和 "),l("code",null,"context"),s("，形参冒号后是类型注解。这两个参数 "),l("code",null,"CommandHandler"),s(" 会传递给它。")],-1),I=l("p",null,[l("code",null,"context.bot.send_message()"),s(" 方法即为让 bot 发送消息，它能接受的参数其实很多，但是往往只需要 "),l("code",null,"chat_id"),s(" ，和 "),l("code",null,"text"),s(" 就够了，它们分别表示 要发送消息给的用户或群组 id ，要发送的文本。")],-1),K=l("p",null,[s("而 "),l("code",null,"update.effective_chat.id"),s(" 即为当前有效对话的 id ，在哪里发消息给 bot ，它就指向哪里的 id。")],-1),W=l("p",null,"现在，添加一个处理器(handler)",-1),Z=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"start_handler "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"CommandHandler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"start"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," start"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),V=l("p",null,[l("code",null,"CommandHandler"),s(" 类可以实现当收到某个命令时，调用某个函数（命令和函数名可以不一样），我们将其实例化为了 "),l("code",null,"start_handler"),s(" ，并且将命令名字 'start' 和对应要回调的函数名 start 传递给它")],-1),z=l("p",null,"然后，启动bot",-1),J=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# 构建 bot")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"TOEKN"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"你 bot 的 api token"),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"ApplicationBuilder"),l("span",{style:{color:"#89DDFF"}},"()."),l("span",{style:{color:"#82AAFF"}},"token"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"TOKEN"),l("span",{style:{color:"#89DDFF"}},")."),l("span",{style:{color:"#82AAFF"}},"build"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# 注册 handler")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"add_handler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"start_handler"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# run!")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"run_polling"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"})])])],-1),X=l("p",null,[s("最后，就可以使用 "),l("code",null,"python bot.py"),s(" 启动你的 bot ，对 bot 发送 /start ，它应该就会回复你 ”你好~我是一个bot”。 使用 Ctrl + C 结束程序运行。")],-1),Q=l("p",null,"到这里，其实你已经了解到了最基本的 telegram bot 编写规则，即：",-1),ll=l("ol",null,[l("li",null,[s("编写回调函数。上面的例子中即为 "),l("code",null,"start"),s(" 这个函数。")]),l("li",null,[s("决定调用回调函数的规则。上述例子中，即为收到 "),l("code",null,"/start"),s(" 命令时，调用 "),l("code",null,"start"),s(" 函数")]),l("li",null,[s("实例化 "),l("code",null,"handler"),s(" ,注册给 "),l("code",null,"application"),s(" 示例。上述例子中，即为 "),l("code",null,"application.add_handler(start_handler)")])],-1),sl=l("p",null,"如果你的系统无法访问 Telegram 的服务器，可以设置代理",-1),ol=l("p",null,"全局代理,整个程序都走代理:",-1),nl=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"environ"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"http_proxy"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"代理地址"),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"environ"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"https_proxy"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"代理地址"),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"})])])],-1),el=l("p",null,"若想仅为 telegram bot api 设置代理,则需要改动一下构建 bot 部分的代码:",-1),tl=l("p",null,"http(s)代理:",-1),al=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"proxy_url "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"http://USERNAME:PASSWORD@PROXY_HOST:PROXY_PORT"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# can also be a https proxy")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"ApplicationBuilder"),l("span",{style:{color:"#89DDFF"}},"()."),l("span",{style:{color:"#82AAFF"}},"token"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"TOKEN"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},")."),l("span",{style:{color:"#82AAFF"}},"proxy_url"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"proxy_url"),l("span",{style:{color:"#89DDFF"}},")."),l("span",{style:{color:"#82AAFF"}},"get_updates_proxy_url"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"proxy_url"),l("span",{style:{color:"#89DDFF"}},")."),l("span",{style:{color:"#82AAFF"}},"build"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"})])])],-1),cl=l("p",null,[s("socks5代理,需要安装 "),l("code",null,"python-telegram-bot[socks]"),s(",然后:")],-1),pl=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"proxy_url "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"socks5://user:pass@host:port"),l("span",{style:{color:"#89DDFF"}},'"')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"ApplicationBuilder"),l("span",{style:{color:"#89DDFF"}},"()."),l("span",{style:{color:"#82AAFF"}},"token"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"TOKEN"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},")."),l("span",{style:{color:"#82AAFF"}},"proxy_url"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"proxy_url"),l("span",{style:{color:"#89DDFF"}},")."),l("span",{style:{color:"#82AAFF"}},"get_updates_proxy_url"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"proxy_url"),l("span",{style:{color:"#89DDFF"}},")."),l("span",{style:{color:"#82AAFF"}},"build"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"})])])],-1),rl=l("p",null,"接下来，写一些更有趣的功能，使用更复杂一些的规则来调用这些功能。",-1),Dl={id:"授予群成员头衔",tabindex:"-1"},yl=l("p",null,[s("让群成员可以通过 bot 自助获得一个头衔吧，比如，群友可以在群里使用 "),l("code",null,"/p@botname 好人"),s(" 来给自己加上 “好人” 的头衔。")],-1),Fl=l("p",null,"当然，前提是 bot 自己要是管理员，并且权限全开。",-1),Al=l("p",null,"要实现这个功能，可以这样写:",-1),Cl=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"set_right"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"update"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," Update"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"context"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," ContextTypes"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),l("span",{style:{color:"#676E95","font-style":"italic"}},"设置成员权限和头衔"),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    chat_id "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_chat"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    user_id "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_user"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    bot_username_len "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"len"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"_bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    custom_title "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_message"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"text"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#F78C6C"}},"3"),l("span",{style:{color:"#89DDFF"}},"+"),l("span",{style:{color:"#F07178"}},"bot_username_len"),l("span",{style:{color:"#89DDFF"}},":]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"not"),l("span",{style:{color:"#A6ACCD"}}," custom_title"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        custom_title "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_user"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"username")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"promote_chat_member"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"user_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"user_id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"can_manage_chat"),l("span",{style:{color:"#89DDFF"}},"=True)")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"set_chat_administrator_custom_title"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"user_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"user_id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"custom_title"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"custom_title"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        text "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'好,你现在是"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"custom_title"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"啦'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"send_message"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"reply_to_message_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_message"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"text"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"send_message"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"不行!!"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),il=l("p",null,"然后，添加这个功能的handler:",-1),dl=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"set_right_handler "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"CommandHandler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"p"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," set_right"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"add_handler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"set_right_handler"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),fl=l("p",null,[s("注意handler的添加应该在 "),l("code",null,"application.run_polling()"),s(" 之前，也就是说 "),l("code",null,"application.run_polling()"),s(" 才是真正开始运行 bot")],-1),_l=l("p",null,[s("简单解释一下 "),l("code",null,"set_right"),s(" 这个函数:")],-1),hl=l("p",null,[s("首先，设置了调用这个函数时的 "),l("code",null,"chat_id"),s(" 和 "),l("code",null,"user_id"),s(" 为当前聊天和当前用户")],-1),ul=l("p",null,[s("然后用 "),l("code",null,"len(update._bot.name)"),s(" 获取 bot 自己用户名的长度，用于下面的切片选取用户想要的头衔")],-1),ml=l("p",null,[s("而 "),l("code",null,"custom_title = update.effective_message.text[3+bot_username_len:]"),s(" 即获取用户想要的头衔，存储在 "),l("code",null,"custom_title"),s(" 中，下面的 if not 的作用是，如果用户没有发送他想要的头衔，那么默认头衔为他的用户名")],-1),gl=l("p",null,"由于只有管理员才有头衔，所以我们使用 promote_chat_member() 方法设置成员权限，将其的 can_manage_chat 权限设置为 True 。注意，即使这样设置了，用户实则是有名无权的状态，只有一个管理员的名头，实际上没有任何权限。",-1),El=l("blockquote",null,[l("p",null,"要想赋予权限，你可以向 promote_chat_member() 方法中继续添加参数，如 can_pin_messages=True 可置顶消息")],-1),bl=l("p",null,"然后就可以使用 set_chat_administrator_custom_title() 方法设置成员头衔了，如果成功了，会继续执行接下来的语句，将结果反馈给用户。",-1),xl={id:"响应未知命令",tabindex:"-1"},kl=l("p",null,"如果 bot 只能回应设置好的命令就太无趣了，所以再编写一个当收到未知命令时的执行功能 比如，想要让 bot 回应未知命令说 “我不会这个哦~”，可以这样写",-1),wl=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"unknown"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"update"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," Update"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"context"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," ContextTypes"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),l("span",{style:{color:"#676E95","font-style":"italic"}},"响应未知命令"),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"调用:unknown"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    text "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"我不会这个哦~"),l("span",{style:{color:"#89DDFF"}},'"')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"send_message"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_chat"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"text"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),vl=l("p",null,[s("然后，添加它的 "),l("code",null,"handler"),s("。这时候可能就出现问题： 前面的两个功能都是回应一个特定的命令，在这里，我们希望它回应除已经设定的命令外的其他所有命令，该怎么做？")],-1),Bl=l("p",null,[s("这就需要用到 "),l("code",null,"filters"),s(" ，并且要"),l("strong",null,"设置功能的优先级"),s(" 你需要先导入它")],-1),Tl=l("p",null,[l("code",null,"from telegram.ext import filters")],-1),jl=l("p",null,"然后可以这样写:",-1),Ul=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"unknown_handler "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"MessageHandler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"filters"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"COMMAND"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," unknown"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),Ll=l("p",null,[l("code",null,"filters"),s(" 即过滤器，而 "),l("code",null,"filters.COMMAND"),s(" 即为所有命令。而设置优先级其实非常简单，"),l("strong",null,[s("添加 "),l("code",null,"handler"),s(" 的顺序越靠后，对应功能的优先级越低")])],-1),Pl=l("p",null,[s("也就是说，我们需要在其他命令类 "),l("code",null,"handler"),s(" 之后，添加 "),l("code",null,"unknown_handler")],-1),Nl=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"add_handler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"start_handler"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"add_handler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"set_right_handler"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"add_handler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"unkonw_handler"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"run_polling"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"})])])],-1),Ml={id:"简单的关键词回复",tabindex:"-1"},Hl=l("p",null,[s("bot 最常见的功能之一就是根据关键词回复特定内容，比如，当对 bot 说早安之类的话时，让 bot 对此做出回应。下面来实现这这一功能 由于命令和普通消息是两种不同的消息类，处理它们的方法是不一样的，针对非命令消息，要使用 "),l("code",null,"MessageHandler"),s(": "),l("code",null,"from telegram.ext import MessageHandler")],-1),Ol=l("p",null,"首先还是要编写这个功能执行的函数。",-1),$l=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," random")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"ohayo"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"update"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," Update"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"context"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," ContextTypes"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    texts "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"早上好呀"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"我的小鱼你醒了，还记得清晨吗"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"哦哈哟~"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"send_message"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_chat"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"random"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"choice"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"text"),l("span",{style:{color:"#89DDFF"}},"))")]),s(`
`),l("span",{class:"line"})])])],-1),Rl=l("p",null,[s("由于只回复一个固定的消息过于单调，所以我们使用 "),l("code",null,"random"),s(" 库来从一个列表中随机选择一个回复")],-1),Yl=l("p",null,[s("实际上，这个函数仍然只是简单的发送消息，而何时调用这个函数，并不是这个函数本身要做的事，而是由接下来我们要编写的 "),l("code",null,"MessageHandler"),s(" 中的 "),l("code",null,"filters"),s(" 决定的:")],-1),ql=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"filter_ohayo "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," filters"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"Regex"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"早安|早上好|哦哈哟|ohayo"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"ohayo_handler "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"MessageHandler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"filter_ohayo"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," ohayo"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),Gl=l("p",null,[l("code",null,"filters.Regex()"),s(" 即为使用正则表达式过滤，我们使用 "),l("code",null,"'早安|早上好|哦哈哟|ohayo'"),s(" 这个表达式，很容易理解何时会调用 "),l("code",null,"ohayo"),s(" 这个函数")],-1),Sl=l("p",null,[s("记得添加它的 "),l("code",null,"handler")],-1),Il=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"add_handler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"ohayo_handler"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),Kl=l("hr",null,null,-1),Wl={id:"进阶",tabindex:"-1"},Zl={id:"定制日志系统",tabindex:"-1"},Vl=l("p",null,"在上面写的一些小功能中,我们没有让程序在控制台或者文件里输出任何信息,只有当报错的时候python会输出一些traceback,这在以后排查故障的时候是极其不便的(毕竟谁都不能保证自己的程序不出bug,或是遇到自己没有考虑到的情况).所以有必要加上一个简单的日志系统.",-1),zl=l("p",null,[s("在项目下新建一个 "),l("code",null,"logger.py"),s(" 文件,用来定制日志系统.")],-1),Jl=l("p",null,"比如,我们想要根据日志等级让日志输出到两份文件,一份是 normal , 包括 INFO 以上的日志,另一份是 debug , 包括 DEBUG 以上的日志,而 INFO 以上的日志还同时输出到控制台,那么可以这样:",-1),Xl=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," logging")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," os")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),l("span",{style:{color:"#A6ACCD"}}," logging "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," handlers")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"class"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"Logger"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"__init__"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"show"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"bool"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"save"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"bool"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"True,"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"debug"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"bool"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"False)"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"->"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"None:")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        日志系统")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param name: 日志系统实例名")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param show: 是否显示在控制台")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param save: 是否保存到文件, defaults to True")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param debug: debug模式, defaults to False")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 日志文件路径")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        normal_log_path "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'logs/normal.log'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        debug_log_path "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'logs/debug.log'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"not"),l("span",{style:{color:"#A6ACCD"}}," os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"path"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"exists"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"./logs"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"mkdir"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"./logs"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"logger"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," logging"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"getLogger"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"name"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 设置日志等级和格式")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"setLevel"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"logging"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"DEBUG"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"formatter"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," logging"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"Formatter"),l("span",{style:{color:"#89DDFF"}},"(")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"            "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#F78C6C"}},"%(asctime)s"),l("span",{style:{color:"#C3E88D"}}," - "),l("span",{style:{color:"#F78C6C"}},"%(name)s"),l("span",{style:{color:"#C3E88D"}}," - "),l("span",{style:{color:"#F78C6C"}},"%(levelname)s"),l("span",{style:{color:"#C3E88D"}},": - "),l("span",{style:{color:"#F78C6C"}},"%(message)s"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"            "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"datefmt"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"%Y-%m-"),l("span",{style:{color:"#F78C6C"}},"%d"),l("span",{style:{color:"#C3E88D"}}," %H:%M:%S"),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"        "),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 设置相关 handler")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"not"),l("span",{style:{color:"#A6ACCD"}}," self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"handlers"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," show"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 控制台 handler")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                sh "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," logging"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"StreamHandler"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," debug"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    sh"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"setLevel"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"logging"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"DEBUG"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    sh"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"setLevel"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"logging"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"INFO"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                sh"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"setFormatter"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD"}},"self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"formatter"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"addHandler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"sh"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," save"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 保存到文件的 handler")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                fh_debug "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," handlers"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"TimedRotatingFileHandler"),l("span",{style:{color:"#89DDFF"}},"(")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                    "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"filename"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"debug_log_path"),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                    "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"when"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"D"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                    "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"interval"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#F78C6C"}},"1"),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                    "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"backupCount"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#F78C6C"}},"3"),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                    "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"encoding"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"utf-8"),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                "),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 自动日志切割")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                fh_debug"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"setLevel"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"logging"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"DEBUG"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                fh_debug"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"setFormatter"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD"}},"self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"formatter"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                fh "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," handlers"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"TimedRotatingFileHandler"),l("span",{style:{color:"#89DDFF"}},"(")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                    "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"filename"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"normal_log_path"),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                    "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"when"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"D"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                    "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"interval"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#F78C6C"}},"1"),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                    "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"backupCount"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#F78C6C"}},"3"),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                    "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"encoding"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"utf-8"),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"                "),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                fh"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"setLevel"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"logging"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"INFO"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                fh"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"setFormatter"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD"}},"self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"formatter"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"addHandler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"fh"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"addHandler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"fh_debug"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"message"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"message"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"info"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"message"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"info"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"message"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"warn"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"message"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"warning"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"message"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"message"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"message"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"critical"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"message"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"critical"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"message"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),Ql=l("p",null,[s("然后在 "),l("code",null,"bot.py"),s(" 里导入并实例化它")],-1),ls=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),l("span",{style:{color:"#A6ACCD"}}," logger "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," Logger")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"logger "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"Logger"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"name"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"bot"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"show"),l("span",{style:{color:"#89DDFF"}},"=True)")]),s(`
`),l("span",{class:"line"})])])],-1),ss=l("p",null,[s("之后就可以在任意地方使用日志记录并输出一些信息,比如在 "),l("code",null,"start()"),s(" 函数里:")],-1),os=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"start"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"update"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," Update"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"context"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," ContextTypes"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),l("span",{style:{color:"#676E95","font-style":"italic"}},"响应start命令"),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"info"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'收到来自"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_chat"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"username"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"的/start指令'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    text "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"你好~我是一个bot"),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"send_message"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_chat"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"text"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),ns=l("p",null,"在其他任意你觉得需要日志的地方都可以使用.",-1),es={id:"使用-yml-文件配置",tabindex:"-1"},ts=l("p",null,"把配置直接写进代码里也太不优雅了些,而且对于其他普通用户来说,还可能会因为写错等原因直接破坏程序,所以需要把配置都搬到文件里. yml 是常见的配置文件格式,也比较简单.",-1),as=l("p",null,[s("后面我们还可能会需要很多小工具,所以新建一个 "),l("code",null,"utils.py"),s(",把各种辅助的方法都放里面.")],-1),cs=l("p",null,"导入yaml库,os库和我们的日志系统",-1),ps=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," yaml")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," os")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),l("span",{style:{color:"#A6ACCD"}}," logger "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," Logger")]),s(`
`),l("span",{class:"line"})])])],-1),rs=l("p",null,"然后",-1),Ds=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"class"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"Utils"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),l("span",{style:{color:"#676E95","font-style":"italic"}},"该类用于设置一些辅助的方法"),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"__init__"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"->"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"None:")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"实例化Utils"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"pass")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"read_config"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"config_name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"->"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"dict"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),l("span",{style:{color:"#676E95","font-style":"italic"}},"读取配置"),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        config_path "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"path"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"abspath"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"path"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"join"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"getcwd"),l("span",{style:{color:"#89DDFF"}},"(),"),l("span",{style:{color:"#82AAFF"}}," config_name"),l("span",{style:{color:"#89DDFF"}},"))")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"open"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"config_path"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"r"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"encoding"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"utf-8"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," f"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            config "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," yaml"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"load"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"f"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"Loader"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"yaml"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"FullLoader"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'已载入配置"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"config_name"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," config")]),s(`
`),l("span",{class:"line"})])])],-1),ys=l("p",null,[s("然后就可以在yml中写配置,比如 "),l("code",null,"config.yml"),s(":")],-1),Fs=l("div",{class:"language-yml"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# bot的token,必填")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"token"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"''")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"#全局代理设置，如不需设置请留空")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"proxy"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"''")]),s(`
`),l("span",{class:"line"})])])],-1),As=l("p",null,[s("需要读取这些配置时,先导入上面写的 "),l("code",null,"utils"),s(" 模块并实例化 Utils 类,然后调用 "),l("code",null,"read_config"),s(" 方法即可:")],-1),Cs=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),l("span",{style:{color:"#A6ACCD"}}," utils "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," Utils")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"utils "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," Utils")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"config "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," utils"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"read_config"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"config.yml"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),is=l("p",null,"这里得到的 config 变量储存了我们的配置,它是一个字典.比如要在代理设置里使用它,只需要这样:",-1),ds=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," config"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"proxy"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]:")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"environ"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"http_proxy"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," config"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"proxy"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"environ"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"https_proxy"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," config"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"proxy"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]")]),s(`
`),l("span",{class:"line"})])])],-1),fs=l("p",null,"还有构建 bot 时:",-1),_s=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"TOKEN"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}},"config"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"token"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"ApplicationBuilder"),l("span",{style:{color:"#89DDFF"}},"()."),l("span",{style:{color:"#82AAFF"}},"token"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"TOKEN"),l("span",{style:{color:"#89DDFF"}},")."),l("span",{style:{color:"#82AAFF"}},"build"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"})])])],-1),hs=l("blockquote",null,[l("p",null,"其实这种方法也是不太优雅的,因为可能会多次读取配置文件,更好的方法是把配置写成一个模块,然后导入它们(单例模式).")],-1),us={id:"使用-json-存取词库",tabindex:"-1"},ms=l("p",null,"关键词回复是 bot 很常见的功能,这时候就会用到词库.",-1),gs=l("p",null,[s("新建 "),l("code",null,"data/words"),s(" 文件夹,用来存储我们的数据.下面是一个简单的词库 "),l("code",null,"ohayo.json"),s(" 示例(早上问候场景)")],-1),Es=l("div",{class:"language-json"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"[")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"我的小鱼你醒了，还认识早晨吗"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"昨夜你曾经说，愿夜幕永不开启"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"我的小鱼你睡醒了吗，还记得夜晚吗"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"早晨你曾说过，愿黎明曙光永不落下"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"早上好哦~"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"哦哈哟喵~"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"众生皆小饼干，你是最甜的那一块~"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"今天也是新的一天~"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"你醒啦？(歪头)"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"啊呜~你已经起床了嘛(打哈欠)"),l("span",{style:{color:"#89DDFF"}},'"')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF"}},"]")]),s(`
`),l("span",{class:"line"})])])],-1),bs=l("p",null,[s("写一个比较通用的方法,用来反序列化json词库文件.把这个方法写进上面我们创建过的 "),l("code",null,"Utils"),s(" 类里即可.")],-1),xs=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"load_words"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"words"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),l("span",{style:{color:"#676E95","font-style":"italic"}},"读取并加载词库"),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        words_path "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"path"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"join"),l("span",{style:{color:"#89DDFF"}},"(")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#82AAFF"}},"            os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"getcwd"),l("span",{style:{color:"#89DDFF"}},"(),"),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"data"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"words"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"words"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},".json'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"open"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"words_path"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"r"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"encoding"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"utf-8"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," f"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                the_words_json "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," json"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"load"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"f"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'已载入词库："),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"words_path"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," the_words_json")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"Exception"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," e"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'载入词库出错："),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"words_path"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},", "),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"e"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"{"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"Exception"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"except"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),l("span",{class:"line"})])])],-1),ks=l("p",null,[s("这个方法接受一个词库文件名(不带后缀),然后从 "),l("code",null,"data/words"),s(" 读取对应的词库,并返回为 python 数据结构")],-1),ws=l("p",null,[s("这时候代码量可能已经比较多了,为了方便组织和管理,我把除了 "),l("code",null,"bot.py"),s(" 的其他 py 文件统一放到了 "),l("code",null,"src"),s(" 文件夹下.")],-1),vs=l("p",null,[s("然后创建一个用于从词库中取句子的类 "),l("code",null,"Getwords"),s("(因为词库也可能不止一种,为了之后方便扩展所以单独写一个类)")],-1),Bs=l("p",null,"在 src/words.py 中:",-1),Ts=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," random")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#A6ACCD"}},"utils "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," Utils")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#A6ACCD"}},"logger "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," Logger")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# 实例化类")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"logger "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"Logger"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"name"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"words"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"show"),l("span",{style:{color:"#89DDFF"}},"=True)")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"utils "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"Utils"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# 读取 ohayo.json 这个词库")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"ohayo_words "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," utils"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"load_words"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"ohayo"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"class"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"GetWords"),l("span",{style:{color:"#89DDFF"}},"():")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"__init__"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        该类用于提取消息特定文本，或是返回特定文本")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"实例化GetWords"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"ohayo"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," ohayo_words")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"get_ohayo"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"->"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),l("span",{style:{color:"#676E95","font-style":"italic"}},"返回早安问候句子"),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        word "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}},"  random"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"choice"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD"}},"self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"ohayo"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'获取到早安:"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"word"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," word")]),s(`
`),l("span",{class:"line"})])])],-1),js=l("p",null,[s("然后修改 "),l("code",null,"bot.py"),s(" 中的早安问候功能:")],-1),Us=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# 导入 Getwords 类")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),l("span",{style:{color:"#A6ACCD"}}," src"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#A6ACCD"}},"words "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," GetWords")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"# 实例化")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"getWords "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"GetWords"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"ohayo"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"update"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," Update"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"context"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," ContextTypes"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}},"getWords"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"get_ohayo"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"send_message"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_chat"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"text"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),Ls=l("p",null,[s("再次强调一下,何时触发响应的功能应该交给过滤器去做,我们这里的 "),l("code",null,"ohayo()"),s(" 函数只需要关心功能触发后应该做什么就可以了.")],-1),Ps={id:"使用-docker-部署-bot",tabindex:"-1"},Ns=l("p",null,"python 程序的环境管理很烦人,用docker来跑再合适不过.",-1),Ms={id:"本地构建",tabindex:"-1"},Hs=l("p",null,[s("如果要在本地构建 docker 镜像,参考下面的 "),l("code",null,"Dockerfile"),s(" 文件")],-1),Os=l("div",{class:"language-Dockerfile"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"FROM python:3.9")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"COPY . /app")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"WORKDIR /app")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"RUN pip install -r requirements.txt")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},'ENTRYPOINT [ "python","/app/bot.py" ]')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}})])])])],-1),$s=l("p",null,"将 Dockerfile 文件放到合适的目录(项目根目录即可),然后执行",-1),Rs=l("p",null,[l("code",null,"docker build -t bot .")],-1),Ys=l("p",null,"注意后面有一个 .",-1),qs=l("p",null,[s("然后使用 "),l("code",null,"docker run -d bot"),s(" 启动容器,运行 bot")],-1),Gs={id:"使用-github-action-自动构建",tabindex:"-1"},Ss=l("p",null,[s("github action 可以构建 docker 镜像并发布到 ghcr,方便在其他地方部署 docker 容器.你依然需要在项目中写好 "),l("code",null,"Dockerfile")],-1),Is=l("p",null,[s("在项目中新建 "),l("code",null,".github/workflows/build-docker.yml"),s(",参考以下配置")],-1),Ks=l("div",{class:"language-yml"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Build and publish docker container")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#FF9CAC"}},"on"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"workflow_dispatch"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    ")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"jobs"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"publish"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Publish container image")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"runs-on"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"ubuntu-20.04")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"env"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#F07178"}},"TZ"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Asia/Shanghai")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"steps"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Checkout")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"uses"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"actions/checkout@v3")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"OCI meta")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"id"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"meta")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"uses"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"docker/metadata-action@v4.1.1")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"with"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"images"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"ghcr.io/${{ github.repository }}")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"tags"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"|")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"            type=edge,branch=main")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"            type=ref,event=branch")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"            type=semver,pattern={{version}}")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"            type=semver,pattern={{major}}.{{minor}}")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"            type=semver,pattern={{major}}")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C3E88D"}},"            type=sha")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Set up Docker Buildx")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"uses"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"docker/setup-buildx-action@v2")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        ")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Set up QEMU")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"uses"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"docker/setup-qemu-action@v2")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Login to GHCR")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"uses"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"docker/login-action@v2")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"with"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"registry"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"ghcr.io")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"username"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"${{ github.repository_owner }}")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"password"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"${{ secrets.GITHUB_TOKEN }}")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F07178"}},"name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"Build and push")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"uses"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"docker/build-push-action@v3")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#F07178"}},"with"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"context"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},".")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"push"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"true")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"tags"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"${{ steps.meta.outputs.tags }}")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"labels"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"${{ steps.meta.outputs.labels }}")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"platforms"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"linux/amd64,linux/arm64")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"cache-from"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"type=gha")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"          "),l("span",{style:{color:"#F07178"}},"cache-to"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"type=gha,mode=max")]),s(`
`),l("span",{class:"line"})])])],-1),Ws=l("p",null,[s("然后可以使用 "),l("code",null,"docker pull"),s(" 的方法运行,或者使用 docker compose:")],-1),Zs=l("p",null,[s("新建 "),l("code",null,"docker-compose.yml"),s(",参考以下内容")],-1),Vs=l("div",{class:"language-yml"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"version"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"3"),l("span",{style:{color:"#89DDFF"}},'"')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#F07178"}},"services"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#F07178"}},"kmua"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"image"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"ghcr.io/krau/kmua-bot:main")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"container_name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"kmua-main")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"init"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FF9CAC"}},"true")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"volumes"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"./data:/kmua/data")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"./logs:/kmua/logs")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"./config.yml:/kmua/config.yml")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#F07178"}},"environment"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"      "),l("span",{style:{color:"#89DDFF"}},"-"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C3E88D"}},"TZ=Asia/Shanghai")]),s(`
`),l("span",{class:"line"})])])],-1),zs=l("p",null,"注意根据自己需要更改",-1),Js=l("p",null,[s("然后就可以使用 "),l("code",null,"docker compose up -d"),s(" 启动容器")],-1),Xs=l("hr",null,null,-1),Qs={id:"附加",tabindex:"-1"},lo={id:"使用playwright查询mc模组信息并记录",tabindex:"-1"},so=l("p",null,"playwright 是一个浏览器自动化工具包,如果你了解过 selenium 那么你一定知道它是什么.但是 playwright 是异步的",-1),oo=l("p",null,[s("新建 "),l("code",null,"src/mcmod.py"),s(". 以下是一个例子,它获取了模组的名称并且截图网页,保存这些数据")],-1),no=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," re")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," os")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," json")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),l("span",{style:{color:"#A6ACCD"}}," playwright"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#A6ACCD"}},"async_api "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," async_playwright")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),l("span",{style:{color:"#A6ACCD"}}," src"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#A6ACCD"}},"logger "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),l("span",{style:{color:"#A6ACCD"}}," Logger")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"logger "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"Logger"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"name"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"McMod"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"show"),l("span",{style:{color:"#89DDFF"}},"=True)")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"class"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"McMod"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"__init__"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"width"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"int"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"1280"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"height"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"int"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"1080"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"->"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"None:")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        参数设定")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param width: 页面宽度, defaults to 1280")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param height: 页面高度, defaults to 1080")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"实例化McMod"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"args"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"--headless"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"--no-sandbox"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                     "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"--disable-gpu"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"--hide-scrollbars"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"options"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"{"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"args"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"args"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"defaultViewport"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"{")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"width"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," width"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"height"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," height"),l("span",{style:{color:"#89DDFF"}},"},"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"dumpio"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":True}")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"screenshot"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"width"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"int"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"1280"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"height"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"int"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#F78C6C"}},"720"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"close"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"bool"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"True)"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"->"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"dict"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        获取网页截屏")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param url: 网址")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param width: 页面宽度, defaults to 1280")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param height: 页面高度, defaults to 720")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param close: 完成后是否关闭网页, defaults to True")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :return: 字典{'file_name':截图文件名,'cn_name':中文名,")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"                        'en_name':英文名,'full_name':格式化后的全名,'mod_url':模组链接}")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"async_playwright"),l("span",{style:{color:"#89DDFF"}},"()"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," p"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                browser "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," p"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"chromium"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"launch"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                page "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," browser"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"new_page"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," page"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"set_viewport_size"),l("span",{style:{color:"#89DDFF"}},"({"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"width"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#82AAFF"}}," width"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"height"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#82AAFF"}}," height"),l("span",{style:{color:"#89DDFF"}},"})")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," page"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"goto"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," page"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"wait_for_selector"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},".class-title"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                class_title "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," page"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"query_selector"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},".class-title"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    h4 "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," class_title"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"query_selector"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"h4"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    en_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," h4"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"get_property"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"innerText"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    en_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," en_name"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"json_value"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                        h3 "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," class_title"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"query_selector"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"h3"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                        cn_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," h3"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"get_property"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"innerText"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                        cn_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," cn_name"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"json_value"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                        cn_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    en_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    cn_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                file_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," re"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"sub"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"r"),l("span",{style:{color:"#89DDFF"}},"'[^"),l("span",{style:{color:"#C3E88D"}},"a-zA-Z"),l("span",{style:{color:"#89DDFF"}},"]'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#89DDFF"}},"''"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," en_name"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"+"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},".png"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 以英文模组名(去除非法字符)保存截屏文件")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                full_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"cn_name"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"en_name"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#676E95","font-style":"italic"}},"# 为了少开一次浏览器，干脆把模组名也顺便获取并返回")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"not"),l("span",{style:{color:"#A6ACCD"}}," os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"path"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"exists"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'./data/pics/"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"file_name"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," page"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"screenshot"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"path"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'./data/pics/"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"file_name"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," close"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," page"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"close"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," browser"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"close"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                record_flag "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"mod_data_record"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_cn_name"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"cn_name"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_en_name"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"en_name"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_file_name"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"file_name"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_full_name"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"full_name"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," record_flag"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    data_dict "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," self"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"mod_data_read"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," data_dict")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'未能记录模组 "),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"mod_url"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"{}")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"Exception"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," e"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'获取截屏 "),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"mod_url"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}}," 失败!'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'错误:"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"e"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," close"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," page"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"close"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," browser"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"close"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"{}")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"get_mod_name"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"url"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"lang"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"full"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"close"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"bool"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"True)"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"->"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        获取模组名")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param url: mcmod的模组页面")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param lang: 要获取的模组名语言, defaults to 'full'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param close: 完成后是否关闭网页, defaults to True")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :return:")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"async_playwright"),l("span",{style:{color:"#89DDFF"}},"()"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," p"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                browser "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," p"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"chromium"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"launch"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                page "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," browser"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"new_page"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," page"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"goto"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"url"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," page"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"wait_for_selector"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},".class-title"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                class_title "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," page"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"query_selector"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},".class-title"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    h4 "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," class_title"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"query_selector"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"h4"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    en_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," h4"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"get_property"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"innerText"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    en_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," en_name"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"json_value"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                        h3 "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," class_title"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"query_selector"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"h3"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                        cn_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," h3"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"get_property"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"innerText"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                        cn_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," cn_name"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"json_value"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                        cn_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    en_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    cn_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                full_nm "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"cn_name"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}}," "),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"en_name"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," close"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," page"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"close"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," browser"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"close"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," lang "),l("span",{style:{color:"#89DDFF"}},"=="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"full"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," full_nm")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"elif"),l("span",{style:{color:"#A6ACCD"}}," lang "),l("span",{style:{color:"#89DDFF"}},"=="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"cn"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," cn_name")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"elif"),l("span",{style:{color:"#A6ACCD"}}," lang "),l("span",{style:{color:"#89DDFF"}},"=="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"en"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," en_name")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"elif"),l("span",{style:{color:"#A6ACCD"}}," lang "),l("span",{style:{color:"#89DDFF"}},"=="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"dict"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    name_dict "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"{"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"cn_name"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}},"cn_name"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"en_name"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}},"en_name"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"full_name"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}},"full_nm"),l("span",{style:{color:"#89DDFF"}},"}")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," name_dict")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'lang不能为"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"lang"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"Exception"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," e"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'获取模组名称 "),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"url"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}}," 失败!'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'错误:"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"e"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"''")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"mod_data_record"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_file_name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_full_name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_cn_name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"''"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_en_name"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"''"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}},"  "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_pic_path"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"''"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"->"),l("span",{style:{color:"#FFCB6B"}},"bool"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        以json文件存储模组的信息,变量名定义与其他函数中一致")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param mod_file_name: 模组去除非法字符(包括空格)的英文全名+后缀名")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param mod_full_name: 格式化后的全名, ex: 植物魔法|Botania")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param mod_url: 模组链接")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param mod_cn_name: 模组中文名, defaults to ''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param mod_en_name: 模组英文名, defaults to ''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :param mod_pic_path: 模组页面截图路径, defaults to ''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        :return: 记录成功返回True,否则False")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#676E95","font-style":"italic"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"调用:McMod.mod_data_record"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'记录模组数据:"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"mod_cn_name"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            mods_data_path "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"./data/mods_data.json"),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"not"),l("span",{style:{color:"#A6ACCD"}}," os"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"path"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"exists"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"mods_data_path"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"open"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"mods_data_path"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"w"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"encoding"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"utf-8"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," f"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                    json"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"dump"),l("span",{style:{color:"#89DDFF"}},"({},"),l("span",{style:{color:"#82AAFF"}}," f"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"ensure_ascii"),l("span",{style:{color:"#89DDFF"}},"=False)")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'未找到数据文件路径,已新建'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"not"),l("span",{style:{color:"#A6ACCD"}}," mod_pic_path"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                mod_pic_path "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'./data/pics/"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"mod_file_name"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'未传入pic_path,使用默认:"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"mod_pic_path"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            mod_data "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"{"),l("span",{style:{color:"#A6ACCD"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"{"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"file_name"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," mod_file_name"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"cn_name"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," mod_cn_name"),l("span",{style:{color:"#89DDFF"}},",")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                                        "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"en_name"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," mod_en_name"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"full_name"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," mod_full_name"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," mod_url"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"pic_path"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," mod_pic_path"),l("span",{style:{color:"#89DDFF"}},"}}")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'模组数据:"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"mod_data"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"open"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"mods_data_path"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"r"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"encoding"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"utf-8"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," f"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                data_content "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," json"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"load"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"f"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            data_content"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"mod_data"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"open"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"mods_data_path"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"w"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"encoding"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"utf-8"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," f"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                json"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"dump"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"data_content"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}},"f"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"indent"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#F78C6C"}},"4"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"ensure_ascii"),l("span",{style:{color:"#89DDFF"}},"=False)")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"info"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'已记录模组数据:"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"mod_data"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"True")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"Exception"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," e"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'记录模组数据 "),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"mod_url"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}}," 错误!'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'错误:"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"e"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"False")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"mod_data_read"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"->"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"dict"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'读取模组数据:"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"mod_url"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            mods_data_path "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"./data/mods_data.json"),l("span",{style:{color:"#89DDFF"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"open"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"mods_data_path"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"r"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"encoding"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"utf-8"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," f"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                data "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," json"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"load"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"f"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," mod_url "),l("span",{style:{color:"#89DDFF"}},"in"),l("span",{style:{color:"#A6ACCD"}}," data"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                full_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," data"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#A6ACCD"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},"]."),l("span",{style:{color:"#82AAFF"}},"get"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"full_name"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"info"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'该模组数据已记录:"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"full_name"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," data"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#A6ACCD"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},"]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"debug"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"该模组数据未记录"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"                "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"False")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"Exception"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," e"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'读取模组数据 "),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"mod_url"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}}," 错误!'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"error"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'错误:"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"e"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"False")]),s(`
`),l("span",{class:"line"})])])],-1),eo=l("p",null,[s("然后在 "),l("code",null,"bot.py"),s(" 中添加这一功能:")],-1),to=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"get_mcmod"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"update"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," Update"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"context"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," ContextTypes"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),l("span",{style:{color:"#676E95","font-style":"italic"}},"自动获取mcmod上的模组信息"),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    mod_urls "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," getWords"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"get_mcmod_url"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_message"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"text"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),l("span",{style:{color:"#A6ACCD"}}," mod_url "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),l("span",{style:{color:"#A6ACCD"}}," mod_urls"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        data_dict "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," mcmod"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"mod_data_read"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," data_dict"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"send_mod_data"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"update"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"context"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"context"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"data_dict"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"data_dict"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"continue")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            data_dict "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," mcmod"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"screenshot"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"Exception"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," e"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            text "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'无法获取模组信息："),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"e"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"send_message"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_chat"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"text"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"continue")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"not"),l("span",{style:{color:"#A6ACCD"}}," data_dict"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            text "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'无法找到模组信息："),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"mod_url"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"send_message"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_chat"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"text"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"continue")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"send_mod_data"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"update"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"context"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"context"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"data_dict"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"data_dict"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#C792EA"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"send_mod_data"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"update"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}},"Update"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"context"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}},"ContextTypes"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"data_dict"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#FFCB6B"}},"dict"),l("span",{style:{color:"#89DDFF"}},"):")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),l("span",{style:{color:"#676E95","font-style":"italic"}},"发送模组数据"),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        file "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," data_dict"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"file_name"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        mod_url "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," data_dict"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"mod_url"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        full_name "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," data_dict"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"full_name"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},"]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"async"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),l("span",{style:{color:"#A6ACCD"}}," aiofiles"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"open"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'./data/pics/"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"file"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"rb"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),l("span",{style:{color:"#A6ACCD"}}," f"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            photo "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," f"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"read"),l("span",{style:{color:"#89DDFF"}},"()")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"FileNotFoundError"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        text "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'无法找到截图文件："),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"file"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"send_message"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_chat"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"text"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    text "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'找到了这个模组~"),l("span",{style:{color:"#A6ACCD"}},"\\n"),l("span",{style:{color:"#C3E88D"}},'<b><a href="'),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"mod_url"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},'">'),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"full_name"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"</a></b>'")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),l("span",{style:{color:"#A6ACCD"}}," context"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"bot"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"send_photo"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"chat_id"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"update"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"effective_chat"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#F07178"}},"id"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"photo"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"photo"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"caption"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#82AAFF"}},"text"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"parse_mode"),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"HTML"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),ao=l("p",null,[s("我们还需要一个从消息中提取链接的函数,在 "),l("code",null,"words.py"),s(" 中:")],-1),co=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"    "),l("span",{style:{color:"#C792EA"}},"def"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"get_mcmod_url"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#F07178","font-style":"italic"}},"self"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#A6ACCD","font-style":"italic"}},"text"),l("span",{style:{color:"#89DDFF"}},":"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},")"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"->"),l("span",{style:{color:"#A6ACCD"}}," list"),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#FFCB6B"}},"str"),l("span",{style:{color:"#89DDFF"}},"]:")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),l("span",{style:{color:"#676E95","font-style":"italic"}},"返回句中的mcmod页面链接列表"),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        mod_nums "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," re"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"findall"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"r"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"www"),l("span",{style:{color:"#A6ACCD"}},"\\."),l("span",{style:{color:"#C3E88D"}},"mcmod"),l("span",{style:{color:"#A6ACCD"}},"\\."),l("span",{style:{color:"#C3E88D"}},"cn/class/"),l("span",{style:{color:"#89DDFF"}},"(["),l("span",{style:{color:"#C3E88D"}},"0-9"),l("span",{style:{color:"#89DDFF"}},']+)"'),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," text"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        urls "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"["),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},'"https://www.mcmod.cn/class/'),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#A6ACCD"}},"x"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},'"'),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),l("span",{style:{color:"#A6ACCD"}}," x "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),l("span",{style:{color:"#A6ACCD"}}," mod_nums"),l("span",{style:{color:"#89DDFF"}},"]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),l("span",{style:{color:"#A6ACCD"}}," urls"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"info"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"f"),l("span",{style:{color:"#C3E88D"}},"'获取到mcmod链接"),l("span",{style:{color:"#F78C6C"}},"{"),l("span",{style:{color:"#82AAFF"}},"urls"),l("span",{style:{color:"#F78C6C"}},"}"),l("span",{style:{color:"#C3E88D"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," urls")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"        "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),l("span",{style:{color:"#89DDFF"}},":")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            logger"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"info"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#C3E88D"}},"无mcmod链接"),l("span",{style:{color:"#89DDFF"}},"'"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"            "),l("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#89DDFF"}},"[]")]),s(`
`),l("span",{class:"line"})])])],-1),po=l("p",null,"这个函数返回一个列表,包含了消息中包含的所有 mcmod 模组页面的链接",-1),ro=l("p",null,"然后,还需要一个用于触发该功能的过滤器:",-1),Do=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"filter_mcmod "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," filters"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"Regex"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#C792EA"}},"r"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#C3E88D"}},"www.mcmod.cn/class"),l("span",{style:{color:"#89DDFF"}},'"'),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1),yo=l("p",null,"最后添加它的 handler 即可:",-1),Fo=l("div",{class:"language-python"},[l("span",{class:"copy"}),l("pre",{class:"shiki material-theme-palenight",tabindex:"0"},[l("code",null,[l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"get_mcmod_handler "),l("span",{style:{color:"#89DDFF"}},"="),l("span",{style:{color:"#A6ACCD"}}," "),l("span",{style:{color:"#82AAFF"}},"MessageHandler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"filter_mcmod"),l("span",{style:{color:"#89DDFF"}},","),l("span",{style:{color:"#82AAFF"}}," get_mcmod"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"},[l("span",{style:{color:"#A6ACCD"}},"application"),l("span",{style:{color:"#89DDFF"}},"."),l("span",{style:{color:"#82AAFF"}},"add_handler"),l("span",{style:{color:"#89DDFF"}},"("),l("span",{style:{color:"#82AAFF"}},"get_mcmod_handler"),l("span",{style:{color:"#89DDFF"}},")")]),s(`
`),l("span",{class:"line"})])])],-1);function Ao(t,Co,io,fo,p,_o){const n=i,r=D;return A(),F(r,{frontmatter:p.frontmatter,data:p.data},{"main-content-md":o(()=>[l("h2",_,[s("前言 "),e(n,{class:"header-anchor",href:"#前言","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),h,l("p",null,[s("在这篇文章中，将使用 "),e(n,{href:"https://docs.python-telegram-bot.org",target:"_blank",rel:"noreferrer"},{default:o(()=>[s("Python-Telegram-Bot")]),_:1}),s(" 最新版库，基于 Python 的新版异步特性与 Telegram 友好开放的 API，开发一个兼顾实用性和趣味的 bot ，并使用 Docker 在任何地方部署 bot")]),l("p",null,[s("我写的 bot 的 GitHub 仓库: "),e(n,{href:"https://github.com/krau/kmua-bot",target:"_blank",rel:"noreferrer"},{default:o(()=>[s("kmua-bot")]),_:1}),s("，欢迎大佬批评。")]),u,C(" more "),l("h2",m,[s("准备 "),e(n,{class:"header-anchor",href:"#准备","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),l("h3",g,[s("环境 "),e(n,{class:"header-anchor",href:"#环境","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),E,b,l("ul",null,[l("li",null,[s("PyYAML: "),e(n,{href:"https://zh.wikipedia.org/wiki/YAML",target:"_blank",rel:"noreferrer"},{default:o(()=>[s("yaml")]),_:1}),s(" 配置文件相关包")]),x,k]),w,l("ul",null,[v,l("li",null,[s("parsel: 数据解析 "),l("s",null,[s("- pyppeteer: 浏览器爬虫包，"),e(n,{href:"https://github.com/puppeteer/puppeteer",target:"_blank",rel:"noreferrer"},{default:o(()=>[s("puppeteer")]),_:1}),s(" 的 python 移植（问我为啥不用更好的 "),e(n,{href:"https://github.com/microsoft/playwright-python",target:"_blank",rel:"noreferrer"},{default:o(()=>[s("playwright-python")]),_:1}),s(" ？被简中互联网上的文章坑了，以后会迁移过去。）")])]),B]),T,l("h3",j,[s("bot 申请 "),e(n,{class:"header-anchor",href:"#bot-申请","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),l("p",null,[s("私聊 "),e(n,{href:"https://t.me/BotFather",target:"_blank",rel:"noreferrer"},{default:o(()=>[s("@BotFather")]),_:1}),s("。发送 "),U,s("，根据提示一步步创建，记得妥善保存最后的 "),L,s("。")]),l("h3",P,[s("获取你的 id "),e(n,{class:"header-anchor",href:"#获取你的-id","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),l("p",null,[s("每个 tg 用户都有一串标识数字，即为 "),N,s("，可以私聊 "),e(n,{href:"https://t.me/userinfobot",target:"_blank",rel:"noreferrer"},{default:o(()=>[s("@userinfobot")]),_:1}),s(" 来获取它")]),M,l("h2",H,[s("基础 "),e(n,{class:"header-anchor",href:"#基础","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),l("h3",O,[s("开始:响应/start "),e(n,{class:"header-anchor",href:"#开始-响应-start","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),$,R,Y,q,G,S,I,K,l("blockquote",null,[l("p",null,[s("你注意到 这个函数使用了 async/await 语法，这是 python 新版的语法糖，详见 官方文档 "),e(n,{href:"https://docs.python.org/3/library/asyncio.html",target:"_blank",rel:"noreferrer"},{default:o(()=>[s("asyncio")]),_:1})])]),W,Z,V,z,J,X,Q,ll,sl,ol,nl,el,tl,al,cl,pl,rl,l("h3",Dl,[s("授予群成员头衔 "),e(n,{class:"header-anchor",href:"#授予群成员头衔","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),yl,Fl,Al,Cl,il,dl,fl,_l,hl,ul,ml,gl,El,bl,l("h3",xl,[s("响应未知命令 "),e(n,{class:"header-anchor",href:"#响应未知命令","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),kl,wl,vl,Bl,Tl,jl,Ul,Ll,Pl,Nl,l("h3",Ml,[s("简单的关键词回复 "),e(n,{class:"header-anchor",href:"#简单的关键词回复","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),Hl,Ol,$l,Rl,Yl,ql,Gl,Sl,Il,Kl,l("h2",Wl,[s("进阶 "),e(n,{class:"header-anchor",href:"#进阶","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),l("h3",Zl,[s("定制日志系统 "),e(n,{class:"header-anchor",href:"#定制日志系统","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),Vl,zl,Jl,Xl,Ql,ls,ss,os,ns,l("h3",es,[s("使用 yml 文件配置 "),e(n,{class:"header-anchor",href:"#使用-yml-文件配置","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),ts,as,cs,ps,rs,Ds,ys,Fs,As,Cs,is,ds,fs,_s,hs,l("h3",us,[s("使用 json 存取词库 "),e(n,{class:"header-anchor",href:"#使用-json-存取词库","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),ms,gs,Es,bs,xs,ks,ws,vs,Bs,Ts,js,Us,Ls,l("h3",Ps,[s("使用 docker 部署 bot "),e(n,{class:"header-anchor",href:"#使用-docker-部署-bot","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),Ns,l("h4",Ms,[s("本地构建 "),e(n,{class:"header-anchor",href:"#本地构建","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),Hs,Os,$s,Rs,Ys,l("blockquote",null,[l("p",null,[s("关于 docker 构建镜像的更多帮助,可以参阅 "),e(n,{href:"https://yeasy.gitbook.io/docker_practice/image/build#gou-jian-jing-xiang",target:"_blank",rel:"noreferrer"},{default:o(()=>[s("docker 从入门到实践")]),_:1})])]),qs,l("h4",Gs,[s("使用 GitHub action 自动构建 "),e(n,{class:"header-anchor",href:"#使用-github-action-自动构建","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),Ss,Is,Ks,Ws,Zs,Vs,zs,Js,Xs,l("h2",Qs,[s("附加 "),e(n,{class:"header-anchor",href:"#附加","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),l("h3",lo,[s("使用playwright查询mc模组信息并记录 "),e(n,{class:"header-anchor",href:"#使用playwright查询mc模组信息并记录","aria-hidden":"true"},{default:o(()=>[s("#")]),_:1})]),so,l("p",null,[s("我们想要实现这样的功能: 当 bot 收到包含 "),e(n,{href:"https://www.mcmod.cn",target:"_blank",rel:"noreferrer"},{default:o(()=>[s("mcmod")]),_:1}),s(" 页面链接的消息时,去主动打开链接,收集模组信息并截图,然后发送模组信息给用户.并且持久化保存这些信息,当再次收到同样的链接时,直接从已保存的数据中获取并返回给用户.")]),oo,no,eo,to,ao,co,po,ro,Do,yo,Fo]),"main-header":o(()=>[a(t.$slots,"main-header")]),"main-header-after":o(()=>[a(t.$slots,"main-header-after")]),"main-nav":o(()=>[a(t.$slots,"main-nav")]),"main-content":o(()=>[a(t.$slots,"main-content")]),"main-content-after":o(()=>[a(t.$slots,"main-content-after")]),"main-nav-before":o(()=>[a(t.$slots,"main-nav-before")]),"main-nav-after":o(()=>[a(t.$slots,"main-nav-after")]),comment:o(()=>[a(t.$slots,"comment")]),footer:o(()=>[a(t.$slots,"footer")]),aside:o(()=>[a(t.$slots,"aside")]),"aside-custom":o(()=>[a(t.$slots,"aside-custom")]),default:o(()=>[a(t.$slots,"default")]),_:3},8,["frontmatter","data"])}const xo=y(f,[["render",Ao]]);export{bo as __pageData,xo as default};
