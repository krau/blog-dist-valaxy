import{_ as r}from"./ValaxyMain.vue_vue_type_style_index_0_lang-e7d88808.js";import{_ as y,u as D,p as i,c as E,w as o,o as d,b as s,d as l,e as a,a as A,r as t,f as _}from"./app-4c727bde.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-33e96e55.js";import"./YunCard.vue_vue_type_script_setup_true_lang-2ef9f914.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-518a7645.js";import"./index-463abdac.js";const wo=JSON.parse('{"title":"使用Python写一个Telegram bot吧|Telegram bot教程","description":"","frontmatter":{"categories":"小技术","date":"2022-12-20T10:22:19.000Z","layout":"post","tags":["Python","telegram","bot","代码"],"title":"使用Python写一个Telegram bot吧|Telegram bot教程","updated":"2023-02-21T16:13:19.000Z"},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"准备","slug":"准备","link":"#准备","children":[{"level":3,"title":"环境","slug":"环境","link":"#环境","children":[]},{"level":3,"title":"bot 申请","slug":"bot-申请","link":"#bot-申请","children":[]},{"level":3,"title":"获取你的 id","slug":"获取你的-id","link":"#获取你的-id","children":[]}]},{"level":2,"title":"基础","slug":"基础","link":"#基础","children":[{"level":3,"title":"开始:响应/start","slug":"开始-响应-start","link":"#开始-响应-start","children":[]},{"level":3,"title":"授予群成员头衔","slug":"授予群成员头衔","link":"#授予群成员头衔","children":[]},{"level":3,"title":"响应未知命令","slug":"响应未知命令","link":"#响应未知命令","children":[]},{"level":3,"title":"简单的关键词回复","slug":"简单的关键词回复","link":"#简单的关键词回复","children":[]}]},{"level":2,"title":"进阶","slug":"进阶","link":"#进阶","children":[{"level":3,"title":"定制日志系统","slug":"定制日志系统","link":"#定制日志系统","children":[]},{"level":3,"title":"使用 yml 文件配置","slug":"使用-yml-文件配置","link":"#使用-yml-文件配置","children":[]},{"level":3,"title":"使用 json 存取词库","slug":"使用-json-存取词库","link":"#使用-json-存取词库","children":[]},{"level":3,"title":"使用 docker 部署 bot","slug":"使用-docker-部署-bot","link":"#使用-docker-部署-bot","children":[]}]},{"level":2,"title":"附加","slug":"附加","link":"#附加","children":[{"level":3,"title":"使用playwright查询mc模组信息并记录","slug":"使用playwright查询mc模组信息并记录","link":"#使用playwright查询mc模组信息并记录","children":[]}]}],"relativePath":"pages/posts/tg-bot-dev-note-kmua.md","path":"/home/runner/work/blog-source-valaxy/blog-source-valaxy/pages/posts/tg-bot-dev-note-kmua.md","lastUpdated":1696646616000}'),c=JSON.parse('{"title":"使用Python写一个Telegram bot吧|Telegram bot教程","description":"","frontmatter":{"categories":"小技术","date":"2022-12-20T10:22:19.000Z","layout":"post","tags":["Python","telegram","bot","代码"],"title":"使用Python写一个Telegram bot吧|Telegram bot教程","updated":"2023-02-21T16:13:19.000Z"},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"准备","slug":"准备","link":"#准备","children":[{"level":3,"title":"环境","slug":"环境","link":"#环境","children":[]},{"level":3,"title":"bot 申请","slug":"bot-申请","link":"#bot-申请","children":[]},{"level":3,"title":"获取你的 id","slug":"获取你的-id","link":"#获取你的-id","children":[]}]},{"level":2,"title":"基础","slug":"基础","link":"#基础","children":[{"level":3,"title":"开始:响应/start","slug":"开始-响应-start","link":"#开始-响应-start","children":[]},{"level":3,"title":"授予群成员头衔","slug":"授予群成员头衔","link":"#授予群成员头衔","children":[]},{"level":3,"title":"响应未知命令","slug":"响应未知命令","link":"#响应未知命令","children":[]},{"level":3,"title":"简单的关键词回复","slug":"简单的关键词回复","link":"#简单的关键词回复","children":[]}]},{"level":2,"title":"进阶","slug":"进阶","link":"#进阶","children":[{"level":3,"title":"定制日志系统","slug":"定制日志系统","link":"#定制日志系统","children":[]},{"level":3,"title":"使用 yml 文件配置","slug":"使用-yml-文件配置","link":"#使用-yml-文件配置","children":[]},{"level":3,"title":"使用 json 存取词库","slug":"使用-json-存取词库","link":"#使用-json-存取词库","children":[]},{"level":3,"title":"使用 docker 部署 bot","slug":"使用-docker-部署-bot","link":"#使用-docker-部署-bot","children":[]}]},{"level":2,"title":"附加","slug":"附加","link":"#附加","children":[{"level":3,"title":"使用playwright查询mc模组信息并记录","slug":"使用playwright查询mc模组信息并记录","link":"#使用playwright查询mc模组信息并记录","children":[]}]}],"relativePath":"pages/posts/tg-bot-dev-note-kmua.md","path":"/home/runner/work/blog-source-valaxy/blog-source-valaxy/pages/posts/tg-bot-dev-note-kmua.md","lastUpdated":1696646616000}'),u={name:"pages/posts/tg-bot-dev-note-kmua.md",data(){return{data:c,frontmatter:c.frontmatter,$frontmatter:c.frontmatter}},setup(){const e=D();e.meta.frontmatter=Object.assign(e.meta.frontmatter,c.frontmatter),i("pageData",c)}},h=s("div",{class:"warning custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"WARNING"),s("span",{lang:"zh-CN"},"注意")]),s("p",null,"本文内容已过时, 敬请期待后续更新")],-1),f={id:"前言",tabindex:"-1"},C=s("p",null,[s("s",null,"为了激发群友们水群的积极性，"),l(" 为了学习和应用 python 知识，我最近在开发一个 telegram 的 bot，所以写这篇文章以记录和分享")],-1),m=s("p",null,"本文不是从零开始的教程，阅读本文前，你需要具有一点点(真的很少一点)的 python 或其他语言编程的基础。",-1),g={id:"准备",tabindex:"-1"},b={id:"环境",tabindex:"-1"},k=s("p",null,"使用你喜欢的工具创建虚拟环境，并安装以下 Python 库",-1),w=s("div",{class:"language-yaml"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"yaml"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"PyYAML")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"python-telegram-bot")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"pypinyin")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"parsel")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"playwright")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"PyYAML")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"python-telegram-bot")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"pypinyin")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"parsel")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"playwright")])])])],-1),x=s("li",null,"python-telegram-bot: 一个对 Telegram bot api 封装的 python 库，注意版本，默认安装的是 13.14 ，要手动指定版本安装最新开发版本（截止写稿是 20.0a6 ），以支持异步特性。",-1),v=s("blockquote",null,[s("p",null,"更新: 2023-02-21: python-telegram-bot 已经默认安装最新版本了，不需要手动指定版本了")],-1),T=s("li",null,"pypinyin: 汉语拼音相关",-1),B=s("li",null,"playwright: 浏览器爬虫",-1),U=s("blockquote",null,[s("p",null,"更新: 2023-03-06: 用 playwright 重构")],-1),P={id:"bot-申请",tabindex:"-1"},j=s("code",null,"/newbot",-1),L=s("strong",null,"API Token",-1),N={id:"获取你的-id",tabindex:"-1"},M=s("strong",null,"user_id",-1),O=s("hr",null,null,-1),H={id:"基础",tabindex:"-1"},R={id:"开始-响应-start",tabindex:"-1"},Y=s("p",null,[l("在项目文件夹内，新建 "),s("code",null,"bot.py"),l("，开始编写 bot 最基础的功能，让其响应 /start 命令")],-1),$=s("p",null,"首先，导入包（先不要管它们都是什么鬼东西）",-1),G=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"# Update:从Telegram获取更新")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#EEFFFF"}}," telegram "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," Update")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"#ApplicationBuilder:简单立即为构建 bot 对象")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"#ContextTypes:上下文类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"#CommandHandler:命令处理器")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#EEFFFF"}}," telegram"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"ext "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," ApplicationBuilder"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," ContextTypes"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," CommandHandler")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# Update:从Telegram获取更新")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," telegram "),s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," Update")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"#ApplicationBuilder:简单立即为构建 bot 对象")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"#ContextTypes:上下文类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"#CommandHandler:命令处理器")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," telegram.ext "),s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," ApplicationBuilder, ContextTypes, CommandHandler")])])])],-1),S=s("p",null,"然后，写一个异步函数 start()，当收到 /start 命令时，要调用它。",-1),q=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"start"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"update"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," Update"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"context"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," ContextTypes"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),s("span",{style:{color:"#545454","font-style":"italic"}},"响应start命令"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    text "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"你好~我是一个bot"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"send_message"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_chat"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"text"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"start"),s("span",{style:{color:"#24292E"}},"(update: Update, context: ContextTypes."),s("span",{style:{color:"#005CC5"}},"DEFAULT_TYPE"),s("span",{style:{color:"#24292E"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},"'''响应start命令'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    text "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'你好~我是一个bot'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.send_message("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update.effective_chat.id,"),s("span",{style:{color:"#E36209"}},"text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"text)")])])])],-1),W=s("p",null,[l("这个函数接受两个参数 "),s("code",null,"update"),l(" 和 "),s("code",null,"context"),l("，形参冒号后是类型注解。这两个参数 "),s("code",null,"CommandHandler"),l(" 会传递给它。")],-1),I=s("p",null,[s("code",null,"context.bot.send_message()"),l(" 方法即为让 bot 发送消息，它能接受的参数其实很多，但是往往只需要 "),s("code",null,"chat_id"),l(" ，和 "),s("code",null,"text"),l(" 就够了，它们分别表示 要发送消息给的用户或群组 id ，要发送的文本。")],-1),K=s("p",null,[l("而 "),s("code",null,"update.effective_chat.id"),l(" 即为当前有效对话的 id ，在哪里发消息给 bot ，它就指向哪里的 id。")],-1),Z=s("p",null,"现在，添加一个处理器(handler)",-1),V=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"start_handler "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"CommandHandler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"start"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," start"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"start_handler "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," CommandHandler("),s("span",{style:{color:"#032F62"}},"'start'"),s("span",{style:{color:"#24292E"}},", start)")])])])],-1),z=s("p",null,[s("code",null,"CommandHandler"),l(" 类可以实现当收到某个命令时，调用某个函数（命令和函数名可以不一样），我们将其实例化为了 "),s("code",null,"start_handler"),l(" ，并且将命令名字 'start' 和对应要回调的函数名 start 传递给它")],-1),X=s("p",null,"然后，启动bot",-1),J=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"# 构建 bot")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"TOEKN"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"你 bot 的 api token"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"ApplicationBuilder"),s("span",{style:{color:"#89DDFF"}},"()."),s("span",{style:{color:"#82AAFF"}},"token"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"TOKEN"),s("span",{style:{color:"#89DDFF"}},")."),s("span",{style:{color:"#82AAFF"}},"build"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"# 注册 handler")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"add_handler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"start_handler"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"# run!")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"run_polling"),s("span",{style:{color:"#89DDFF"}},"()")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# 构建 bot")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"TOEKN"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'你 bot 的 api token'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," ApplicationBuilder().token("),s("span",{style:{color:"#005CC5"}},"TOKEN"),s("span",{style:{color:"#24292E"}},").build()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# 注册 handler")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application.add_handler(start_handler)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# run!")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application.run_polling()")])])])],-1),Q=s("p",null,[l("最后，就可以使用 "),s("code",null,"python bot.py"),l(" 启动你的 bot ，对 bot 发送 /start ，它应该就会回复你 ”你好~我是一个bot”。 使用 Ctrl + C 结束程序运行。")],-1),ss=s("p",null,"到这里，其实你已经了解到了最基本的 telegram bot 编写规则，即：",-1),ls=s("ol",null,[s("li",null,[l("编写回调函数。上面的例子中即为 "),s("code",null,"start"),l(" 这个函数。")]),s("li",null,[l("决定调用回调函数的规则。上述例子中，即为收到 "),s("code",null,"/start"),l(" 命令时，调用 "),s("code",null,"start"),l(" 函数")]),s("li",null,[l("实例化 "),s("code",null,"handler"),l(" ,注册给 "),s("code",null,"application"),l(" 示例。上述例子中，即为 "),s("code",null,"application.add_handler(start_handler)")])],-1),os=s("p",null,"如果你的系统无法访问 Telegram 的服务器，可以设置代理",-1),ns=s("p",null,"全局代理,整个程序都走代理:",-1),as=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"environ"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"http_proxy"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"代理地址"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"environ"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"https_proxy"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"代理地址"),s("span",{style:{color:"#89DDFF"}},"'")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"os.environ["),s("span",{style:{color:"#032F62"}},"'http_proxy'"),s("span",{style:{color:"#24292E"}},"] "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'代理地址'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"os.environ["),s("span",{style:{color:"#032F62"}},"'https_proxy'"),s("span",{style:{color:"#24292E"}},"] "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'代理地址'")])])])],-1),es=s("p",null,"若想仅为 telegram bot api 设置代理,则需要改动一下构建 bot 部分的代码:",-1),ts=s("p",null,"http(s)代理:",-1),cs=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"proxy_url "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"http://USERNAME:PASSWORD@PROXY_HOST:PROXY_PORT"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#EEFFFF"}},"  "),s("span",{style:{color:"#545454","font-style":"italic"}},"# can also be a https proxy")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"ApplicationBuilder"),s("span",{style:{color:"#89DDFF"}},"()."),s("span",{style:{color:"#82AAFF"}},"token"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"TOKEN"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},")."),s("span",{style:{color:"#82AAFF"}},"proxy_url"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"proxy_url"),s("span",{style:{color:"#89DDFF"}},")."),s("span",{style:{color:"#82AAFF"}},"get_updates_proxy_url"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"proxy_url"),s("span",{style:{color:"#89DDFF"}},")."),s("span",{style:{color:"#82AAFF"}},"build"),s("span",{style:{color:"#89DDFF"}},"()")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"proxy_url "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'http://USERNAME:PASSWORD@PROXY_HOST:PROXY_PORT'"),s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#6A737D"}},"# can also be a https proxy")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," ApplicationBuilder().token("),s("span",{style:{color:"#032F62"}},'"TOKEN"'),s("span",{style:{color:"#24292E"}},").proxy_url(proxy_url).get_updates_proxy_url(proxy_url).build()")])])])],-1),Fs=s("p",null,[l("socks5代理,需要安装 "),s("code",null,"python-telegram-bot[socks]"),l(",然后:")],-1),ps=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"proxy_url "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"socks5://user:pass@host:port"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"ApplicationBuilder"),s("span",{style:{color:"#89DDFF"}},"()."),s("span",{style:{color:"#82AAFF"}},"token"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"TOKEN"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},")."),s("span",{style:{color:"#82AAFF"}},"proxy_url"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"proxy_url"),s("span",{style:{color:"#89DDFF"}},")."),s("span",{style:{color:"#82AAFF"}},"get_updates_proxy_url"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"proxy_url"),s("span",{style:{color:"#89DDFF"}},")."),s("span",{style:{color:"#82AAFF"}},"build"),s("span",{style:{color:"#89DDFF"}},"()")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"proxy_url "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},'"socks5://user:pass@host:port"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," ApplicationBuilder().token("),s("span",{style:{color:"#032F62"}},'"TOKEN"'),s("span",{style:{color:"#24292E"}},").proxy_url(proxy_url).get_updates_proxy_url(proxy_url).build()")])])])],-1),rs=s("p",null,"接下来，写一些更有趣的功能，使用更复杂一些的规则来调用这些功能。",-1),ys={id:"授予群成员头衔",tabindex:"-1"},Ds=s("p",null,[l("让群成员可以通过 bot 自助获得一个头衔吧，比如，群友可以在群里使用 "),s("code",null,"/p@botname 好人"),l(" 来给自己加上 “好人” 的头衔。")],-1),is=s("p",null,"当然，前提是 bot 自己要是管理员，并且权限全开。",-1),Es=s("p",null,"要实现这个功能，可以这样写:",-1),ds=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"set_right"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"update"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," Update"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"context"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," ContextTypes"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),s("span",{style:{color:"#545454","font-style":"italic"}},"设置成员权限和头衔"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    chat_id "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_chat"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    user_id "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_user"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    bot_username_len "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"len"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"_bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    custom_title "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_message"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"text"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},"+"),s("span",{style:{color:"#F07178"}},"bot_username_len"),s("span",{style:{color:"#89DDFF"}},":]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"not"),s("span",{style:{color:"#EEFFFF"}}," custom_title"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        custom_title "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_user"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"username")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"promote_chat_member"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"user_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"user_id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"can_manage_chat"),s("span",{style:{color:"#89DDFF"}},"=True)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"set_chat_administrator_custom_title"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"user_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"user_id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"custom_title"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"custom_title"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        text "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'好,你现在是"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"custom_title"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"啦'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"send_message"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"reply_to_message_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_message"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"text"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"send_message"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"不行!!"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"set_right"),s("span",{style:{color:"#24292E"}},"(update: Update, context: ContextTypes."),s("span",{style:{color:"#005CC5"}},"DEFAULT_TYPE"),s("span",{style:{color:"#24292E"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},"'''设置成员权限和头衔'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    chat_id "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," update.effective_chat.id")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    user_id "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," update.effective_user.id")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    bot_username_len "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"len"),s("span",{style:{color:"#24292E"}},"(update._bot.name)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    custom_title "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," update.effective_message.text["),s("span",{style:{color:"#005CC5"}},"3"),s("span",{style:{color:"#D73A49"}},"+"),s("span",{style:{color:"#24292E"}},"bot_username_len:]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"not"),s("span",{style:{color:"#24292E"}}," custom_title:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        custom_title "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," update.effective_user.username")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.promote_chat_member("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"chat_id, "),s("span",{style:{color:"#E36209"}},"user_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"user_id, "),s("span",{style:{color:"#E36209"}},"can_manage_chat"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#005CC5"}},"True"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.set_chat_administrator_custom_title("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"chat_id, "),s("span",{style:{color:"#E36209"}},"user_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"user_id, "),s("span",{style:{color:"#E36209"}},"custom_title"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"custom_title)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        text "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'好,你现在是"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"custom_title"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"啦'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.send_message("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"chat_id, "),s("span",{style:{color:"#E36209"}},"reply_to_message_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update.effective_message.id, "),s("span",{style:{color:"#E36209"}},"text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"text)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.send_message("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"chat_id, "),s("span",{style:{color:"#E36209"}},"text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'不行!!'"),s("span",{style:{color:"#24292E"}},")")])])])],-1),As=s("p",null,"然后，添加这个功能的handler:",-1),_s=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"set_right_handler "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"CommandHandler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"p"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," set_right"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"add_handler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"set_right_handler"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"set_right_handler "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," CommandHandler("),s("span",{style:{color:"#032F62"}},"'p'"),s("span",{style:{color:"#24292E"}},", set_right)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application.add_handler(set_right_handler)")])])])],-1),us=s("p",null,[l("注意handler的添加应该在 "),s("code",null,"application.run_polling()"),l(" 之前，也就是说 "),s("code",null,"application.run_polling()"),l(" 才是真正开始运行 bot")],-1),hs=s("p",null,[l("简单解释一下 "),s("code",null,"set_right"),l(" 这个函数:")],-1),fs=s("p",null,[l("首先，设置了调用这个函数时的 "),s("code",null,"chat_id"),l(" 和 "),s("code",null,"user_id"),l(" 为当前聊天和当前用户")],-1),Cs=s("p",null,[l("然后用 "),s("code",null,"len(update._bot.name)"),l(" 获取 bot 自己用户名的长度，用于下面的切片选取用户想要的头衔")],-1),ms=s("p",null,[l("而 "),s("code",null,"custom_title = update.effective_message.text[3+bot_username_len:]"),l(" 即获取用户想要的头衔，存储在 "),s("code",null,"custom_title"),l(" 中，下面的 if not 的作用是，如果用户没有发送他想要的头衔，那么默认头衔为他的用户名")],-1),gs=s("p",null,"由于只有管理员才有头衔，所以我们使用 promote_chat_member() 方法设置成员权限，将其的 can_manage_chat 权限设置为 True 。注意，即使这样设置了，用户实则是有名无权的状态，只有一个管理员的名头，实际上没有任何权限。",-1),bs=s("blockquote",null,[s("p",null,"要想赋予权限，你可以向 promote_chat_member() 方法中继续添加参数，如 can_pin_messages=True 可置顶消息")],-1),ks=s("p",null,"然后就可以使用 set_chat_administrator_custom_title() 方法设置成员头衔了，如果成功了，会继续执行接下来的语句，将结果反馈给用户。",-1),ws={id:"响应未知命令",tabindex:"-1"},xs=s("p",null,"如果 bot 只能回应设置好的命令就太无趣了，所以再编写一个当收到未知命令时的执行功能 比如，想要让 bot 回应未知命令说 “我不会这个哦~”，可以这样写",-1),vs=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"unknown"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"update"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," Update"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"context"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," ContextTypes"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),s("span",{style:{color:"#545454","font-style":"italic"}},"响应未知命令"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"调用:unknown"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    text "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"我不会这个哦~"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"send_message"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_chat"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"text"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"unknown"),s("span",{style:{color:"#24292E"}},"(update: Update, context: ContextTypes."),s("span",{style:{color:"#005CC5"}},"DEFAULT_TYPE"),s("span",{style:{color:"#24292E"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},"'''响应未知命令'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    logger.debug("),s("span",{style:{color:"#032F62"}},"'调用:unknown'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    text "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},'"我不会这个哦~"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.send_message("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update.effective_chat.id, "),s("span",{style:{color:"#E36209"}},"text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"text)")])])])],-1),Ts=s("p",null,[l("然后，添加它的 "),s("code",null,"handler"),l("。这时候可能就出现问题： 前面的两个功能都是回应一个特定的命令，在这里，我们希望它回应除已经设定的命令外的其他所有命令，该怎么做？")],-1),Bs=s("p",null,[l("这就需要用到 "),s("code",null,"filters"),l(" ，并且要"),s("strong",null,"设置功能的优先级"),l(" 你需要先导入它")],-1),Us=s("p",null,[s("code",null,"from telegram.ext import filters")],-1),Ps=s("p",null,"然后可以这样写:",-1),js=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"unknown_handler "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"MessageHandler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"filters"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"COMMAND"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," unknown"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"unknown_handler "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," MessageHandler(filters."),s("span",{style:{color:"#005CC5"}},"COMMAND"),s("span",{style:{color:"#24292E"}},", unknown)")])])])],-1),Ls=s("p",null,[s("code",null,"filters"),l(" 即过滤器，而 "),s("code",null,"filters.COMMAND"),l(" 即为所有命令。而设置优先级其实非常简单，"),s("strong",null,[l("添加 "),s("code",null,"handler"),l(" 的顺序越靠后，对应功能的优先级越低")])],-1),Ns=s("p",null,[l("也就是说，我们需要在其他命令类 "),s("code",null,"handler"),l(" 之后，添加 "),s("code",null,"unknown_handler")],-1),Ms=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"add_handler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"start_handler"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"add_handler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"set_right_handler"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"add_handler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"unkonw_handler"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"run_polling"),s("span",{style:{color:"#89DDFF"}},"()")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application.add_handler(start_handler)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application.add_handler(set_right_handler)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application.add_handler(unkonw_handler)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application.run_polling()")])])])],-1),Os={id:"简单的关键词回复",tabindex:"-1"},Hs=s("p",null,[l("bot 最常见的功能之一就是根据关键词回复特定内容，比如，当对 bot 说早安之类的话时，让 bot 对此做出回应。下面来实现这这一功能 由于命令和普通消息是两种不同的消息类，处理它们的方法是不一样的，针对非命令消息，要使用 "),s("code",null,"MessageHandler"),l(": "),s("code",null,"from telegram.ext import MessageHandler")],-1),Rs=s("p",null,"首先还是要编写这个功能执行的函数。",-1),Ys=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," random")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"ohayo"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"update"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," Update"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"context"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," ContextTypes"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    texts "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"早上好呀"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"我的小鱼你醒了，还记得清晨吗"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"哦哈哟~"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"send_message"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_chat"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"random"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"choice"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"text"),s("span",{style:{color:"#89DDFF"}},"))")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," random")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ohayo"),s("span",{style:{color:"#24292E"}},"(update: Update, context: ContextTypes."),s("span",{style:{color:"#005CC5"}},"DEFAULT_TYPE"),s("span",{style:{color:"#24292E"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    texts "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," ["),s("span",{style:{color:"#032F62"}},"'早上好呀'"),s("span",{style:{color:"#24292E"}},","),s("span",{style:{color:"#032F62"}},"'我的小鱼你醒了，还记得清晨吗'"),s("span",{style:{color:"#24292E"}},","),s("span",{style:{color:"#032F62"}},"'哦哈哟~'"),s("span",{style:{color:"#24292E"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.send_message("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update.effective_chat.id, "),s("span",{style:{color:"#E36209"}},"text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"random.choice(text))")])])])],-1),$s=s("p",null,[l("由于只回复一个固定的消息过于单调，所以我们使用 "),s("code",null,"random"),l(" 库来从一个列表中随机选择一个回复")],-1),Gs=s("p",null,[l("实际上，这个函数仍然只是简单的发送消息，而何时调用这个函数，并不是这个函数本身要做的事，而是由接下来我们要编写的 "),s("code",null,"MessageHandler"),l(" 中的 "),s("code",null,"filters"),l(" 决定的:")],-1),Ss=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"filter_ohayo "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," filters"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Regex"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"早安|早上好|哦哈哟|ohayo"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"ohayo_handler "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"MessageHandler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"filter_ohayo"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," ohayo"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"filter_ohayo "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," filters.Regex("),s("span",{style:{color:"#032F62"}},"'早安|早上好|哦哈哟|ohayo'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"ohayo_handler "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," MessageHandler(filter_ohayo, ohayo)")])])])],-1),qs=s("p",null,[s("code",null,"filters.Regex()"),l(" 即为使用正则表达式过滤，我们使用 "),s("code",null,"'早安|早上好|哦哈哟|ohayo'"),l(" 这个表达式，很容易理解何时会调用 "),s("code",null,"ohayo"),l(" 这个函数")],-1),Ws=s("p",null,[l("记得添加它的 "),s("code",null,"handler")],-1),Is=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"add_handler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"ohayo_handler"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application.add_handler(ohayo_handler)")])])])],-1),Ks=s("hr",null,null,-1),Zs={id:"进阶",tabindex:"-1"},Vs={id:"定制日志系统",tabindex:"-1"},zs=s("p",null,"在上面写的一些小功能中,我们没有让程序在控制台或者文件里输出任何信息,只有当报错的时候python会输出一些traceback,这在以后排查故障的时候是极其不便的(毕竟谁都不能保证自己的程序不出bug,或是遇到自己没有考虑到的情况).所以有必要加上一个简单的日志系统.",-1),Xs=s("p",null,[l("在项目下新建一个 "),s("code",null,"logger.py"),l(" 文件,用来定制日志系统.")],-1),Js=s("p",null,"比如,我们想要根据日志等级让日志输出到两份文件,一份是 normal , 包括 INFO 以上的日志,另一份是 debug , 包括 DEBUG 以上的日志,而 INFO 以上的日志还同时输出到控制台,那么可以这样:",-1),Qs=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," logging")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," os")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#EEFFFF"}}," logging "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," handlers")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"Logger"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"__init__"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"show"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"bool"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"save"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"bool"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"True,"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"debug"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"bool"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"False)"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"None:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        日志系统")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param name: 日志系统实例名")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param show: 是否显示在控制台")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param save: 是否保存到文件, defaults to True")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param debug: debug模式, defaults to False")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#545454","font-style":"italic"}},"# 日志文件路径")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        normal_log_path "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'logs/normal.log'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        debug_log_path "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'logs/debug.log'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"not"),s("span",{style:{color:"#EEFFFF"}}," os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"path"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"exists"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"./logs"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"mkdir"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"./logs"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"logger"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," logging"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"getLogger"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"name"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#545454","font-style":"italic"}},"# 设置日志等级和格式")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"setLevel"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"logging"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"DEBUG"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"formatter"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," logging"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Formatter"),s("span",{style:{color:"#89DDFF"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"            "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#F78C6C"}},"%(asctime)s"),s("span",{style:{color:"#C3E88D"}}," - "),s("span",{style:{color:"#F78C6C"}},"%(name)s"),s("span",{style:{color:"#C3E88D"}}," - "),s("span",{style:{color:"#F78C6C"}},"%(levelname)s"),s("span",{style:{color:"#C3E88D"}},": - "),s("span",{style:{color:"#F78C6C"}},"%(message)s"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"            "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"datefmt"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"%Y-%m-"),s("span",{style:{color:"#F78C6C"}},"%d"),s("span",{style:{color:"#C3E88D"}}," %H:%M:%S"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"        "),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#545454","font-style":"italic"}},"# 设置相关 handler")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"not"),s("span",{style:{color:"#EEFFFF"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"handlers"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," show"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#545454","font-style":"italic"}},"# 控制台 handler")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                sh "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," logging"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"StreamHandler"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," debug"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    sh"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"setLevel"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"logging"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"DEBUG"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    sh"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"setLevel"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"logging"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"INFO"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                sh"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"setFormatter"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"formatter"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"addHandler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"sh"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," save"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#545454","font-style":"italic"}},"# 保存到文件的 handler")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                fh_debug "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," handlers"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"TimedRotatingFileHandler"),s("span",{style:{color:"#89DDFF"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"filename"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"debug_log_path"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"when"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"D"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"interval"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"backupCount"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"encoding"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"utf-8"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                "),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"# 自动日志切割")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                fh_debug"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"setLevel"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"logging"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"DEBUG"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                fh_debug"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"setFormatter"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"formatter"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                fh "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," handlers"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"TimedRotatingFileHandler"),s("span",{style:{color:"#89DDFF"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"filename"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"normal_log_path"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"when"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"D"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"interval"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"backupCount"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                    "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"encoding"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"utf-8"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"                "),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                fh"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"setLevel"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"logging"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"INFO"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                fh"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"setFormatter"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"formatter"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"addHandler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"fh"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"addHandler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"fh_debug"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"message"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"message"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"info"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"message"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"info"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"message"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"warn"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"message"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"warning"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"message"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"message"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"message"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"critical"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"message"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"critical"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"message"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," logging")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," os")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," logging "),s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," handlers")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"class"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"Logger"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"__init__"),s("span",{style:{color:"#24292E"}},"(self, name: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},", show: "),s("span",{style:{color:"#005CC5"}},"bool"),s("span",{style:{color:"#24292E"}},", save: "),s("span",{style:{color:"#005CC5"}},"bool"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"True"),s("span",{style:{color:"#24292E"}},", debug: "),s("span",{style:{color:"#005CC5"}},"bool"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"False"),s("span",{style:{color:"#24292E"}},") -> "),s("span",{style:{color:"#005CC5"}},"None"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        日志系统")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param name: 日志系统实例名")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param show: 是否显示在控制台")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param save: 是否保存到文件, defaults to True")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param debug: debug模式, defaults to False")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},'        """')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#6A737D"}},"# 日志文件路径")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        normal_log_path "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'logs/normal.log'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        debug_log_path "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'logs/debug.log'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"not"),s("span",{style:{color:"#24292E"}}," os.path.exists("),s("span",{style:{color:"#032F62"}},"'./logs'"),s("span",{style:{color:"#24292E"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            os.mkdir("),s("span",{style:{color:"#032F62"}},"'./logs'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".logger "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," logging.getLogger(name)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#6A737D"}},"# 设置日志等级和格式")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".logger.setLevel(logging."),s("span",{style:{color:"#005CC5"}},"DEBUG"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".formatter "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," logging.Formatter(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#005CC5"}},"%(asctime)s"),s("span",{style:{color:"#032F62"}}," - "),s("span",{style:{color:"#005CC5"}},"%(name)s"),s("span",{style:{color:"#032F62"}}," - "),s("span",{style:{color:"#005CC5"}},"%(levelname)s"),s("span",{style:{color:"#032F62"}},": - "),s("span",{style:{color:"#005CC5"}},"%(message)s"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#E36209"}},"datefmt"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'%Y-%m-"),s("span",{style:{color:"#005CC5"}},"%d"),s("span",{style:{color:"#032F62"}}," %H:%M:%S'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        )")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#6A737D"}},"# 设置相关 handler")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"not"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".logger.handlers:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," show:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#6A737D"}},"# 控制台 handler")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                sh "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," logging.StreamHandler()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," debug:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    sh.setLevel(logging."),s("span",{style:{color:"#005CC5"}},"DEBUG"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"else"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    sh.setLevel(logging."),s("span",{style:{color:"#005CC5"}},"INFO"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                sh.setFormatter("),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".formatter)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".logger.addHandler(sh)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," save:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#6A737D"}},"# 保存到文件的 handler")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                fh_debug "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," handlers.TimedRotatingFileHandler(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#E36209"}},"filename"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"debug_log_path,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#E36209"}},"when"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},'"D"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#E36209"}},"interval"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#E36209"}},"backupCount"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#005CC5"}},"3"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#E36209"}},"encoding"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'utf-8'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                ) "),s("span",{style:{color:"#6A737D"}},"# 自动日志切割")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                fh_debug.setLevel(logging."),s("span",{style:{color:"#005CC5"}},"DEBUG"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                fh_debug.setFormatter("),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".formatter)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                fh "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," handlers.TimedRotatingFileHandler(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#E36209"}},"filename"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"normal_log_path,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#E36209"}},"when"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},'"D"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#E36209"}},"interval"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#E36209"}},"backupCount"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#005CC5"}},"3"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#E36209"}},"encoding"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'utf-8'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                )")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                fh.setLevel(logging."),s("span",{style:{color:"#005CC5"}},"INFO"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                fh.setFormatter("),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".formatter)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".logger.addHandler(fh)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".logger.addHandler(fh_debug)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"debug"),s("span",{style:{color:"#24292E"}},"(self, message):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".logger.debug(message)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"info"),s("span",{style:{color:"#24292E"}},"(self, message):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".logger.info(message)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"warn"),s("span",{style:{color:"#24292E"}},"(self, message):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".logger.warning(message)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"error"),s("span",{style:{color:"#24292E"}},"(self, message):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".logger.error(message)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"critical"),s("span",{style:{color:"#24292E"}},"(self, message):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".logger.critical(message)")])])])],-1),sl=s("p",null,[l("然后在 "),s("code",null,"bot.py"),l(" 里导入并实例化它")],-1),ll=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#EEFFFF"}}," logger "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," Logger")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"logger "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"Logger"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"name"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"bot"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"show"),s("span",{style:{color:"#89DDFF"}},"=True)")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," logger "),s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," Logger")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"logger "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," Logger("),s("span",{style:{color:"#E36209"}},"name"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'bot'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#E36209"}},"show"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#005CC5"}},"True"),s("span",{style:{color:"#24292E"}},")")])])])],-1),ol=s("p",null,[l("之后就可以在任意地方使用日志记录并输出一些信息,比如在 "),s("code",null,"start()"),l(" 函数里:")],-1),nl=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"start"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"update"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," Update"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"context"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," ContextTypes"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),s("span",{style:{color:"#545454","font-style":"italic"}},"响应start命令"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"info"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'收到来自"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_chat"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"username"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"的/start指令'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    text "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"你好~我是一个bot"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"send_message"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_chat"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"text"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"start"),s("span",{style:{color:"#24292E"}},"(update: Update, context: ContextTypes."),s("span",{style:{color:"#005CC5"}},"DEFAULT_TYPE"),s("span",{style:{color:"#24292E"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},"'''响应start命令'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    logger.info("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'收到来自"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"update.effective_chat.username"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"的/start指令'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    text "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'你好~我是一个bot'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.send_message("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update.effective_chat.id,"),s("span",{style:{color:"#E36209"}},"text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"text)")])])])],-1),al=s("p",null,"在其他任意你觉得需要日志的地方都可以使用.",-1),el={id:"使用-yml-文件配置",tabindex:"-1"},tl=s("p",null,"把配置直接写进代码里也太不优雅了些,而且对于其他普通用户来说,还可能会因为写错等原因直接破坏程序,所以需要把配置都搬到文件里. yml 是常见的配置文件格式,也比较简单.",-1),cl=s("p",null,[l("后面我们还可能会需要很多小工具,所以新建一个 "),s("code",null,"utils.py"),l(",把各种辅助的方法都放里面.")],-1),Fl=s("p",null,"导入yaml库,os库和我们的日志系统",-1),pl=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," yaml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," os")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#EEFFFF"}}," logger "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," Logger")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," yaml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," os")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," logger "),s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," Logger")])])])],-1),rl=s("p",null,"然后",-1),yl=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"Utils"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),s("span",{style:{color:"#545454","font-style":"italic"}},"该类用于设置一些辅助的方法"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"__init__"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"None:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"实例化Utils"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"pass")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"read_config"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"config_name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"dict"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),s("span",{style:{color:"#545454","font-style":"italic"}},"读取配置"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        config_path "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"path"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"abspath"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"path"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"join"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"getcwd"),s("span",{style:{color:"#89DDFF"}},"(),"),s("span",{style:{color:"#82AAFF"}}," config_name"),s("span",{style:{color:"#89DDFF"}},"))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"open"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"config_path"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"r"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"encoding"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"utf-8"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," f"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            config "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," yaml"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"load"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"Loader"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"yaml"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"FullLoader"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'已载入配置"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"config_name"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," config")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"class"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"Utils"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},"'''该类用于设置一些辅助的方法'''")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"__init__"),s("span",{style:{color:"#24292E"}},"(self) -> "),s("span",{style:{color:"#005CC5"}},"None"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        logger.debug("),s("span",{style:{color:"#032F62"}},"'实例化Utils'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"pass")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"read_config"),s("span",{style:{color:"#24292E"}},"(self,config_name: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},") -> "),s("span",{style:{color:"#005CC5"}},"dict"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},"'''读取配置'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        config_path "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," os.path.abspath(os.path.join(os.getcwd(), config_name))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"with"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"open"),s("span",{style:{color:"#24292E"}},"(config_path, "),s("span",{style:{color:"#032F62"}},"'r'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#E36209"}},"encoding"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'utf-8'"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," f:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            config "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," yaml.load(f, "),s("span",{style:{color:"#E36209"}},"Loader"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"yaml.FullLoader)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        logger.debug("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'已载入配置"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"config_name"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," config")])])])],-1),Dl=s("p",null,[l("然后就可以在yml中写配置,比如 "),s("code",null,"config.yml"),l(":")],-1),il=s("div",{class:"language-yml"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"yml"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"# bot的token,必填")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"token"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"#全局代理设置，如不需设置请留空")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"proxy"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# bot的token,必填")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#22863A"}},"token"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"''")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"#全局代理设置，如不需设置请留空")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#22863A"}},"proxy"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"''")])])])],-1),El=s("p",null,[l("需要读取这些配置时,先导入上面写的 "),s("code",null,"utils"),l(" 模块并实例化 Utils 类,然后调用 "),s("code",null,"read_config"),l(" 方法即可:")],-1),dl=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#EEFFFF"}}," utils "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," Utils")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"utils "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," Utils")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"config "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," utils"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"read_config"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"config.yml"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," utils "),s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," Utils")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"utils "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," Utils")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"config "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," utils.read_config("),s("span",{style:{color:"#032F62"}},"'config.yml'"),s("span",{style:{color:"#24292E"}},")")])])])],-1),Al=s("p",null,"这里得到的 config 变量储存了我们的配置,它是一个字典.比如要在代理设置里使用它,只需要这样:",-1),_l=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," config"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"proxy"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"environ"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"http_proxy"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," config"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"proxy"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"environ"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"https_proxy"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," config"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"proxy"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," config["),s("span",{style:{color:"#032F62"}},"'proxy'"),s("span",{style:{color:"#24292E"}},"]:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    os.environ["),s("span",{style:{color:"#032F62"}},"'http_proxy'"),s("span",{style:{color:"#24292E"}},"] "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," config["),s("span",{style:{color:"#032F62"}},"'proxy'"),s("span",{style:{color:"#24292E"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    os.environ["),s("span",{style:{color:"#032F62"}},"'https_proxy'"),s("span",{style:{color:"#24292E"}},"] "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," config["),s("span",{style:{color:"#032F62"}},"'proxy'"),s("span",{style:{color:"#24292E"}},"]")])])])],-1),ul=s("p",null,"还有构建 bot 时:",-1),hl=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"TOKEN"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}},"config"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"token"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"ApplicationBuilder"),s("span",{style:{color:"#89DDFF"}},"()."),s("span",{style:{color:"#82AAFF"}},"token"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"TOKEN"),s("span",{style:{color:"#89DDFF"}},")."),s("span",{style:{color:"#82AAFF"}},"build"),s("span",{style:{color:"#89DDFF"}},"()")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"TOKEN"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"config["),s("span",{style:{color:"#032F62"}},"'token'"),s("span",{style:{color:"#24292E"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," ApplicationBuilder().token("),s("span",{style:{color:"#005CC5"}},"TOKEN"),s("span",{style:{color:"#24292E"}},").build()")])])])],-1),fl=s("blockquote",null,[s("p",null,"其实这种方法也是不太优雅的,因为可能会多次读取配置文件,更好的方法是把配置写成一个模块,然后导入它们(单例模式).")],-1),Cl={id:"使用-json-存取词库",tabindex:"-1"},ml=s("p",null,"关键词回复是 bot 很常见的功能,这时候就会用到词库.",-1),gl=s("p",null,[l("新建 "),s("code",null,"data/words"),l(" 文件夹,用来存储我们的数据.下面是一个简单的词库 "),s("code",null,"ohayo.json"),l(" 示例(早上问候场景)")],-1),bl=s("div",{class:"language-json"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"json"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"[")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"我的小鱼你醒了，还认识早晨吗"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"昨夜你曾经说，愿夜幕永不开启"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"我的小鱼你睡醒了吗，还记得夜晚吗"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"早晨你曾说过，愿黎明曙光永不落下"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"早上好哦~"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"哦哈哟喵~"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"众生皆小饼干，你是最甜的那一块~"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"今天也是新的一天~"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"你醒啦？(歪头)"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"啊呜~你已经起床了嘛(打哈欠)"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"]")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"[")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"我的小鱼你醒了，还认识早晨吗"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"昨夜你曾经说，愿夜幕永不开启"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"我的小鱼你睡醒了吗，还记得夜晚吗"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"早晨你曾说过，愿黎明曙光永不落下"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"早上好哦~"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"哦哈哟喵~"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"众生皆小饼干，你是最甜的那一块~"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"今天也是新的一天~"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"你醒啦？(歪头)"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"啊呜~你已经起床了嘛(打哈欠)"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"]")])])])],-1),kl=s("p",null,[l("写一个比较通用的方法,用来反序列化json词库文件.把这个方法写进上面我们创建过的 "),s("code",null,"Utils"),l(" 类里即可.")],-1),wl=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"load_words"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"words"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),s("span",{style:{color:"#545454","font-style":"italic"}},"读取并加载词库"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        words_path "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"path"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"join"),s("span",{style:{color:"#89DDFF"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#82AAFF"}},"            os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"getcwd"),s("span",{style:{color:"#89DDFF"}},"(),"),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"data"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"words"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"words"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},".json'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"open"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"words_path"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"r"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"encoding"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"utf-8"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," f"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                the_words_json "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," json"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"load"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'已载入词库："),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"words_path"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," the_words_json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"Exception"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," e"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'载入词库出错："),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"words_path"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},", "),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"e"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"Exception"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"except"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"load_words"),s("span",{style:{color:"#24292E"}},"(self, words: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},"'''读取并加载词库'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        words_path "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," os.path.join(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            os.getcwd(), "),s("span",{style:{color:"#032F62"}},"'data'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#032F62"}},"'words'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"words"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},".json'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"with"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"open"),s("span",{style:{color:"#24292E"}},"(words_path, "),s("span",{style:{color:"#032F62"}},"'r'"),s("span",{style:{color:"#24292E"}},","),s("span",{style:{color:"#E36209"}},"encoding"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'utf-8'"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," f:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                the_words_json "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," json.load(f)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.debug("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'已载入词库："),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"words_path"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," the_words_json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Exception"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," e:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.error("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'载入词库出错："),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"words_path"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},", "),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"e"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," {"),s("span",{style:{color:"#032F62"}},"'Exception'"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"'except'"),s("span",{style:{color:"#24292E"}},"}")])])])],-1),xl=s("p",null,[l("这个方法接受一个词库文件名(不带后缀),然后从 "),s("code",null,"data/words"),l(" 读取对应的词库,并返回为 python 数据结构")],-1),vl=s("p",null,[l("这时候代码量可能已经比较多了,为了方便组织和管理,我把除了 "),s("code",null,"bot.py"),l(" 的其他 py 文件统一放到了 "),s("code",null,"src"),l(" 文件夹下.")],-1),Tl=s("p",null,[l("然后创建一个用于从词库中取句子的类 "),s("code",null,"Getwords"),l("(因为词库也可能不止一种,为了之后方便扩展所以单独写一个类)")],-1),Bl=s("p",null,"在 src/words.py 中:",-1),Ul=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," random")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"utils "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," Utils")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"logger "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," Logger")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"# 实例化类")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"logger "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"Logger"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"name"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"words"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"show"),s("span",{style:{color:"#89DDFF"}},"=True)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"utils "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"Utils"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"# 读取 ohayo.json 这个词库")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"ohayo_words "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," utils"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"load_words"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"ohayo"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"GetWords"),s("span",{style:{color:"#89DDFF"}},"():")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"__init__"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        该类用于提取消息特定文本，或是返回特定文本")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"实例化GetWords"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"ohayo"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," ohayo_words")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"get_ohayo"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),s("span",{style:{color:"#545454","font-style":"italic"}},"返回早安问候句子"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        word "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}},"  random"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"choice"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"ohayo"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'获取到早安:"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"word"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," word")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," random")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," .utils "),s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," Utils")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," .logger "),s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," Logger")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# 实例化类")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"logger "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," Logger("),s("span",{style:{color:"#E36209"}},"name"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'words'"),s("span",{style:{color:"#24292E"}},","),s("span",{style:{color:"#E36209"}},"show"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#005CC5"}},"True"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"utils "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," Utils()")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# 读取 ohayo.json 这个词库")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"ohayo_words "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," utils.load_words("),s("span",{style:{color:"#032F62"}},"'ohayo'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"class"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"GetWords"),s("span",{style:{color:"#24292E"}},"():")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"__init__"),s("span",{style:{color:"#24292E"}},"(self):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        该类用于提取消息特定文本，或是返回特定文本")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},'        """')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        logger.debug("),s("span",{style:{color:"#032F62"}},"'实例化GetWords'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".ohayo "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," ohayo_words")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"get_ohayo"),s("span",{style:{color:"#24292E"}},"(self) -> "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},"'''返回早安问候句子'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        word "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"  random.choice("),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".ohayo)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        logger.debug("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'获取到早安:"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"word"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," word")])])])],-1),Pl=s("p",null,[l("然后修改 "),s("code",null,"bot.py"),l(" 中的早安问候功能:")],-1),jl=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"# 导入 Getwords 类")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#EEFFFF"}}," src"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"words "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," GetWords")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"# 实例化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"getWords "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"GetWords"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"ohayo"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"update"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," Update"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"context"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," ContextTypes"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}},"getWords"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"get_ohayo"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"send_message"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_chat"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"text"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# 导入 Getwords 类")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," src.words "),s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," GetWords")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"# 实例化")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"getWords "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," GetWords()")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ohayo"),s("span",{style:{color:"#24292E"}},"(update: Update, context: ContextTypes."),s("span",{style:{color:"#005CC5"}},"DEFAULT_TYPE"),s("span",{style:{color:"#24292E"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"getWords.get_ohayo()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.send_message("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update.effective_chat.id, "),s("span",{style:{color:"#E36209"}},"text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"text)")])])])],-1),Ll=s("p",null,[l("再次强调一下,何时触发响应的功能应该交给过滤器去做,我们这里的 "),s("code",null,"ohayo()"),l(" 函数只需要关心功能触发后应该做什么就可以了.")],-1),Nl={id:"使用-docker-部署-bot",tabindex:"-1"},Ml=s("p",null,"python 程序的环境管理很烦人,用docker来跑再合适不过.",-1),Ol={id:"本地构建",tabindex:"-1"},Hl=s("p",null,[l("如果要在本地构建 docker 镜像,参考下面的 "),s("code",null,"Dockerfile"),l(" 文件")],-1),Rl=s("div",{class:"language-Dockerfile"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"Dockerfile"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"FROM"),s("span",{style:{color:"#EEFFFF"}}," python:3.9")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"COPY"),s("span",{style:{color:"#EEFFFF"}}," . /app")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"WORKDIR"),s("span",{style:{color:"#EEFFFF"}}," /app")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"RUN"),s("span",{style:{color:"#EEFFFF"}}," pip install -r requirements.txt")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"ENTRYPOINT"),s("span",{style:{color:"#EEFFFF"}}," [ "),s("span",{style:{color:"#C3E88D"}},'"python"'),s("span",{style:{color:"#EEFFFF"}},","),s("span",{style:{color:"#C3E88D"}},'"/app/bot.py"'),s("span",{style:{color:"#EEFFFF"}}," ]")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"FROM"),s("span",{style:{color:"#24292E"}}," python:3.9")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"COPY"),s("span",{style:{color:"#24292E"}}," . /app")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"WORKDIR"),s("span",{style:{color:"#24292E"}}," /app")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"RUN"),s("span",{style:{color:"#24292E"}}," pip install -r requirements.txt")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"ENTRYPOINT"),s("span",{style:{color:"#24292E"}}," [ "),s("span",{style:{color:"#032F62"}},'"python"'),s("span",{style:{color:"#24292E"}},","),s("span",{style:{color:"#032F62"}},'"/app/bot.py"'),s("span",{style:{color:"#24292E"}}," ]")])])])],-1),Yl=s("p",null,"将 Dockerfile 文件放到合适的目录(项目根目录即可),然后执行",-1),$l=s("p",null,[s("code",null,"docker build -t bot .")],-1),Gl=s("p",null,"注意后面有一个 .",-1),Sl=s("p",null,[l("然后使用 "),s("code",null,"docker run -d bot"),l(" 启动容器,运行 bot")],-1),ql={id:"使用-github-action-自动构建",tabindex:"-1"},Wl=s("p",null,[l("github action 可以构建 docker 镜像并发布到 ghcr,方便在其他地方部署 docker 容器.你依然需要在项目中写好 "),s("code",null,"Dockerfile")],-1),Il=s("p",null,[l("在项目中新建 "),s("code",null,".github/workflows/build-docker.yml"),l(",参考以下配置")],-1),Kl=s("div",{class:"language-yml"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"yml"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"Build and publish docker container")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FF9CAC"}},"on"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"  "),s("span",{style:{color:"#F07178"}},"workflow_dispatch"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"jobs"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"  "),s("span",{style:{color:"#F07178"}},"publish"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"Publish container image")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F07178"}},"runs-on"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"ubuntu-20.04")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F07178"}},"env"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"      "),s("span",{style:{color:"#F07178"}},"TZ"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"Asia/Shanghai")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F07178"}},"steps"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"      "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"Checkout")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#F07178"}},"uses"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"actions/checkout@v3")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"      "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"OCI meta")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"meta")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#F07178"}},"uses"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"docker/metadata-action@v4.1.1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#F07178"}},"with"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"images"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"ghcr.io/${{ github.repository }}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"tags"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"|")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"            type=edge,branch=main")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"            type=ref,event=branch")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"            type=semver,pattern={{version}}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"            type=semver,pattern={{major}}.{{minor}}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"            type=semver,pattern={{major}}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C3E88D"}},"            type=sha")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"      "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"Set up Docker Buildx")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#F07178"}},"uses"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"docker/setup-buildx-action@v2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"      "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"Set up QEMU")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#F07178"}},"uses"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"docker/setup-qemu-action@v2")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"      "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"Login to GHCR")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#F07178"}},"uses"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"docker/login-action@v2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#F07178"}},"with"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"registry"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"ghcr.io")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"username"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"${{ github.repository_owner }}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"password"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"${{ secrets.GITHUB_TOKEN }}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"      "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F07178"}},"name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"Build and push")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#F07178"}},"uses"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"docker/build-push-action@v3")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#F07178"}},"with"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"context"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},".")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"push"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FF9CAC"}},"true")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"tags"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"${{ steps.meta.outputs.tags }}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"labels"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"${{ steps.meta.outputs.labels }}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"platforms"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"linux/amd64,linux/arm64")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"cache-from"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"type=gha")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"          "),s("span",{style:{color:"#F07178"}},"cache-to"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"type=gha,mode=max")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#22863A"}},"name"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"Build and publish docker container")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"on"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#22863A"}},"workflow_dispatch"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#22863A"}},"jobs"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#22863A"}},"publish"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#22863A"}},"name"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"Publish container image")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#22863A"}},"runs-on"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"ubuntu-20.04")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#22863A"}},"env"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      "),s("span",{style:{color:"#22863A"}},"TZ"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"Asia/Shanghai")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#22863A"}},"steps"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      - "),s("span",{style:{color:"#22863A"}},"name"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"Checkout")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#22863A"}},"uses"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"actions/checkout@v3")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      - "),s("span",{style:{color:"#22863A"}},"name"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"OCI meta")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#22863A"}},"id"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"meta")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#22863A"}},"uses"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"docker/metadata-action@v4.1.1")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#22863A"}},"with"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"images"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"ghcr.io/${{ github.repository }}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"tags"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#D73A49"}},"|")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"            type=edge,branch=main")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"            type=ref,event=branch")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"            type=semver,pattern={{version}}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"            type=semver,pattern={{major}}.{{minor}}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"            type=semver,pattern={{major}}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"            type=sha")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      - "),s("span",{style:{color:"#22863A"}},"name"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"Set up Docker Buildx")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#22863A"}},"uses"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"docker/setup-buildx-action@v2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      - "),s("span",{style:{color:"#22863A"}},"name"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"Set up QEMU")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#22863A"}},"uses"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"docker/setup-qemu-action@v2")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      - "),s("span",{style:{color:"#22863A"}},"name"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"Login to GHCR")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#22863A"}},"uses"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"docker/login-action@v2")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#22863A"}},"with"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"registry"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"ghcr.io")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"username"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"${{ github.repository_owner }}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"password"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"${{ secrets.GITHUB_TOKEN }}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      - "),s("span",{style:{color:"#22863A"}},"name"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"Build and push")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#22863A"}},"uses"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"docker/build-push-action@v3")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#22863A"}},"with"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"context"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#005CC5"}},".")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"push"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#005CC5"}},"true")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"tags"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"${{ steps.meta.outputs.tags }}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"labels"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"${{ steps.meta.outputs.labels }}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"platforms"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"linux/amd64,linux/arm64")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"cache-from"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"type=gha")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#22863A"}},"cache-to"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"type=gha,mode=max")])])])],-1),Zl=s("p",null,[l("然后可以使用 "),s("code",null,"docker pull"),l(" 的方法运行,或者使用 docker compose:")],-1),Vl=s("p",null,[l("新建 "),s("code",null,"docker-compose.yml"),l(",参考以下内容")],-1),zl=s("div",{class:"language-yml"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"yml"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"version"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"3"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F07178"}},"services"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"  "),s("span",{style:{color:"#F07178"}},"kmua"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F07178"}},"image"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"ghcr.io/krau/kmua-bot:main")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F07178"}},"container_name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"kmua-main")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F07178"}},"init"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FF9CAC"}},"true")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F07178"}},"volumes"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"      "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"./data:/kmua/data")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"      "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"./logs:/kmua/logs")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"      "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"./config.yml:/kmua/config.yml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F07178"}},"environment"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"      "),s("span",{style:{color:"#89DDFF"}},"-"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"TZ=Asia/Shanghai")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#22863A"}},"version"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},'"3"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#22863A"}},"services"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#22863A"}},"kmua"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#22863A"}},"image"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"ghcr.io/krau/kmua-bot:main")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#22863A"}},"container_name"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},"kmua-main")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#22863A"}},"init"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#005CC5"}},"true")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#22863A"}},"volumes"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      - "),s("span",{style:{color:"#032F62"}},"./data:/kmua/data")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      - "),s("span",{style:{color:"#032F62"}},"./logs:/kmua/logs")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      - "),s("span",{style:{color:"#032F62"}},"./config.yml:/kmua/config.yml")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#22863A"}},"environment"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      - "),s("span",{style:{color:"#032F62"}},"TZ=Asia/Shanghai")])])])],-1),Xl=s("p",null,"注意根据自己需要更改",-1),Jl=s("p",null,[l("然后就可以使用 "),s("code",null,"docker compose up -d"),l(" 启动容器")],-1),Ql=s("hr",null,null,-1),so={id:"附加",tabindex:"-1"},lo={id:"使用playwright查询mc模组信息并记录",tabindex:"-1"},oo=s("p",null,"playwright 是一个浏览器自动化工具包,如果你了解过 selenium 那么你一定知道它是什么.但是 playwright 是异步的",-1),no=s("p",null,[l("新建 "),s("code",null,"src/mcmod.py"),l(". 以下是一个例子,它获取了模组的名称并且截图网页,保存这些数据")],-1),ao=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," re")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," os")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#EEFFFF"}}," playwright"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"async_api "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," async_playwright")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF","font-style":"italic"}},"from"),s("span",{style:{color:"#EEFFFF"}}," src"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"logger "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"import"),s("span",{style:{color:"#EEFFFF"}}," Logger")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"logger "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"Logger"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"name"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"McMod"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"show"),s("span",{style:{color:"#89DDFF"}},"=True)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"class"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"McMod"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"__init__"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"width"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"int"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1280"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"height"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"int"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1080"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"None:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        参数设定")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param width: 页面宽度, defaults to 1280")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param height: 页面高度, defaults to 1080")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"实例化McMod"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"args"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"--headless"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"--no-sandbox"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                     "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"--disable-gpu"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"--hide-scrollbars"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"options"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"args"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"args"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"defaultViewport"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"width"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," width"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"height"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," height"),s("span",{style:{color:"#89DDFF"}},"},"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"dumpio"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":True}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"screenshot"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"width"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"int"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1280"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"height"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"int"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"720"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"close"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"bool"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"True)"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"dict"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        获取网页截屏")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param url: 网址")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param width: 页面宽度, defaults to 1280")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param height: 页面高度, defaults to 720")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param close: 完成后是否关闭网页, defaults to True")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :return: 字典{'file_name':截图文件名,'cn_name':中文名,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"                        'en_name':英文名,'full_name':格式化后的全名,'mod_url':模组链接}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"async_playwright"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," p"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                browser "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," p"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"chromium"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"launch"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                page "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," browser"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"new_page"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," page"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"set_viewport_size"),s("span",{style:{color:"#89DDFF"}},"({"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"width"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#82AAFF"}}," width"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"height"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#82AAFF"}}," height"),s("span",{style:{color:"#89DDFF"}},"})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," page"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"goto"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," page"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"wait_for_selector"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},".class-title"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                class_title "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," page"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"query_selector"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},".class-title"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    h4 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," class_title"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"query_selector"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"h4"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    en_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," h4"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"get_property"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"innerText"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    en_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," en_name"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"json_value"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                        h3 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," class_title"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"query_selector"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"h3"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                        cn_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," h3"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"get_property"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"innerText"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                        cn_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," cn_name"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"json_value"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                        cn_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    en_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    cn_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                file_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," re"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"sub"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"r"),s("span",{style:{color:"#89DDFF"}},"'[^"),s("span",{style:{color:"#C3E88D"}},"a-zA-Z"),s("span",{style:{color:"#89DDFF"}},"]'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," en_name"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"+"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},".png"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#EEFFFF"}},"  "),s("span",{style:{color:"#545454","font-style":"italic"}},"# 以英文模组名(去除非法字符)保存截屏文件")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                full_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"cn_name"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}}," "),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"en_name"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#EEFFFF"}},"  "),s("span",{style:{color:"#545454","font-style":"italic"}},"# 为了少开一次浏览器，干脆把模组名也顺便获取并返回")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"not"),s("span",{style:{color:"#EEFFFF"}}," os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"path"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"exists"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'./data/pics/"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"file_name"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," page"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"screenshot"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"path"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'./data/pics/"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"file_name"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," close"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," page"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"close"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," browser"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"close"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                record_flag "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"mod_data_record"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_cn_name"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"cn_name"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_en_name"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"en_name"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_file_name"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"file_name"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_full_name"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"full_name"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," record_flag"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    data_dict "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," self"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"mod_data_read"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," data_dict")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'未能记录模组 "),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"mod_url"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"Exception"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," e"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'获取截屏 "),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"mod_url"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}}," 失败!'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'错误:"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"e"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," close"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," page"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"close"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," browser"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"close"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"get_mod_name"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"url"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"lang"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"full"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"close"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"bool"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"True)"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        获取模组名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param url: mcmod的模组页面")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param lang: 要获取的模组名语言, defaults to 'full'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param close: 完成后是否关闭网页, defaults to True")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :return:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"async_playwright"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," p"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                browser "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," p"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"chromium"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"launch"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                page "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," browser"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"new_page"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," page"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"goto"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"url"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," page"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"wait_for_selector"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},".class-title"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                class_title "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," page"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"query_selector"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},".class-title"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    h4 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," class_title"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"query_selector"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"h4"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    en_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," h4"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"get_property"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"innerText"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    en_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," en_name"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"json_value"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                        h3 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," class_title"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"query_selector"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"h3"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                        cn_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," h3"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"get_property"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"innerText"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                        cn_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," cn_name"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"json_value"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                        cn_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    en_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    cn_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                full_nm "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"cn_name"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}}," "),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"en_name"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," close"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," page"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"close"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," browser"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"close"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," lang "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"full"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," full_nm")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"elif"),s("span",{style:{color:"#EEFFFF"}}," lang "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"cn"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," cn_name")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"elif"),s("span",{style:{color:"#EEFFFF"}}," lang "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"en"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," en_name")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"elif"),s("span",{style:{color:"#EEFFFF"}}," lang "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"dict"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    name_dict "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"cn_name"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}},"cn_name"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"en_name"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}},"en_name"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"full_name"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}},"full_nm"),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," name_dict")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'lang不能为"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"lang"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"Exception"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," e"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'获取模组名称 "),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"url"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}}," 失败!'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'错误:"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"e"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"mod_data_record"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_file_name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_full_name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_cn_name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"''"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_en_name"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"''"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}},"  "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_pic_path"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"''"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#FFCB6B"}},"bool"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        以json文件存储模组的信息,变量名定义与其他函数中一致")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param mod_file_name: 模组去除非法字符(包括空格)的英文全名+后缀名")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param mod_full_name: 格式化后的全名, ex: 植物魔法|Botania")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param mod_url: 模组链接")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param mod_cn_name: 模组中文名, defaults to ''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param mod_en_name: 模组英文名, defaults to ''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :param mod_pic_path: 模组页面截图路径, defaults to ''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        :return: 记录成功返回True,否则False")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"调用:McMod.mod_data_record"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'记录模组数据:"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"mod_cn_name"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            mods_data_path "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"./data/mods_data.json"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"not"),s("span",{style:{color:"#EEFFFF"}}," os"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"path"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"exists"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"mods_data_path"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"open"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"mods_data_path"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"w"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"encoding"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"utf-8"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," f"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                    json"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"dump"),s("span",{style:{color:"#89DDFF"}},"({},"),s("span",{style:{color:"#82AAFF"}}," f"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"ensure_ascii"),s("span",{style:{color:"#89DDFF"}},"=False)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'未找到数据文件路径,已新建'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"not"),s("span",{style:{color:"#EEFFFF"}}," mod_pic_path"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                mod_pic_path "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'./data/pics/"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"mod_file_name"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'未传入pic_path,使用默认:"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"mod_pic_path"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            mod_data "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#EEFFFF"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"file_name"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," mod_file_name"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"cn_name"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," mod_cn_name"),s("span",{style:{color:"#89DDFF"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                                        "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"en_name"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," mod_en_name"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"full_name"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," mod_full_name"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," mod_url"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"pic_path"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," mod_pic_path"),s("span",{style:{color:"#89DDFF"}},"}}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'模组数据:"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"mod_data"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"open"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"mods_data_path"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"r"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"encoding"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"utf-8"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," f"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                data_content "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," json"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"load"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            data_content"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"mod_data"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"open"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"mods_data_path"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"w"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"encoding"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"utf-8"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," f"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                json"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"dump"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"data_content"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"indent"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"ensure_ascii"),s("span",{style:{color:"#89DDFF"}},"=False)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"info"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'已记录模组数据:"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"mod_data"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"True")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"Exception"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," e"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'记录模组数据 "),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"mod_url"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}}," 错误!'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'错误:"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"e"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"False")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"mod_data_read"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"dict"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'读取模组数据:"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"mod_url"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            mods_data_path "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"./data/mods_data.json"),s("span",{style:{color:"#89DDFF"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"open"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"mods_data_path"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"r"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"encoding"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"utf-8"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," f"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                data "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," json"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"load"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"f"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," mod_url "),s("span",{style:{color:"#89DDFF"}},"in"),s("span",{style:{color:"#EEFFFF"}}," data"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                full_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," data"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#EEFFFF"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},"]."),s("span",{style:{color:"#82AAFF"}},"get"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"full_name"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"info"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'该模组数据已记录:"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"full_name"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," data"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#EEFFFF"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"debug"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"该模组数据未记录"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"                "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"False")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"Exception"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," e"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'读取模组数据 "),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"mod_url"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}}," 错误!'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"error"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'错误:"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"e"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"False")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," re")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," os")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," json")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," playwright.async_api "),s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," async_playwright")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"from"),s("span",{style:{color:"#24292E"}}," src.logger "),s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," Logger")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"logger "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," Logger("),s("span",{style:{color:"#E36209"}},"name"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'McMod'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#E36209"}},"show"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#005CC5"}},"True"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"class"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"McMod"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"__init__"),s("span",{style:{color:"#24292E"}},"(self, width: "),s("span",{style:{color:"#005CC5"}},"int"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1280"),s("span",{style:{color:"#24292E"}},", height: "),s("span",{style:{color:"#005CC5"}},"int"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1080"),s("span",{style:{color:"#24292E"}},") -> "),s("span",{style:{color:"#005CC5"}},"None"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        参数设定")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param width: 页面宽度, defaults to 1280")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param height: 页面高度, defaults to 1080")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},'        """')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        logger.debug("),s("span",{style:{color:"#032F62"}},"'实例化McMod'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".args "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," ["),s("span",{style:{color:"#032F62"}},"'--headless'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#032F62"}},"'--no-sandbox'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                     "),s("span",{style:{color:"#032F62"}},"'--disable-gpu'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#032F62"}},"'--hide-scrollbars'"),s("span",{style:{color:"#24292E"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".options "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {"),s("span",{style:{color:"#032F62"}},"'args'"),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".args, "),s("span",{style:{color:"#032F62"}},"'defaultViewport'"),s("span",{style:{color:"#24292E"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#032F62"}},"'width'"),s("span",{style:{color:"#24292E"}},": width, "),s("span",{style:{color:"#032F62"}},"'height'"),s("span",{style:{color:"#24292E"}},": height},"),s("span",{style:{color:"#032F62"}},"'dumpio'"),s("span",{style:{color:"#24292E"}},":"),s("span",{style:{color:"#005CC5"}},"True"),s("span",{style:{color:"#24292E"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"screenshot"),s("span",{style:{color:"#24292E"}},"(self, mod_url: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},", width: "),s("span",{style:{color:"#005CC5"}},"int"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1280"),s("span",{style:{color:"#24292E"}},", height: "),s("span",{style:{color:"#005CC5"}},"int"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"720"),s("span",{style:{color:"#24292E"}},", close: "),s("span",{style:{color:"#005CC5"}},"bool"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"True"),s("span",{style:{color:"#24292E"}},") -> "),s("span",{style:{color:"#005CC5"}},"dict"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        获取网页截屏")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param url: 网址")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param width: 页面宽度, defaults to 1280")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param height: 页面高度, defaults to 720")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param close: 完成后是否关闭网页, defaults to True")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :return: 字典{'file_name':截图文件名,'cn_name':中文名,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"                        'en_name':英文名,'full_name':格式化后的全名,'mod_url':模组链接}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},'        """')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"with"),s("span",{style:{color:"#24292E"}}," async_playwright() "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," p:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                browser "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," p.chromium.launch()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                page "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," browser.new_page()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page.set_viewport_size({"),s("span",{style:{color:"#032F62"}},"'width'"),s("span",{style:{color:"#24292E"}},": width, "),s("span",{style:{color:"#032F62"}},"'height'"),s("span",{style:{color:"#24292E"}},": height})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page.goto(mod_url)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page.wait_for_selector("),s("span",{style:{color:"#032F62"}},"'.class-title'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                class_title "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page.query_selector("),s("span",{style:{color:"#032F62"}},"'.class-title'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    h4 "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," class_title.query_selector("),s("span",{style:{color:"#032F62"}},"'h4'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    en_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," h4.get_property("),s("span",{style:{color:"#032F62"}},"'innerText'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    en_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," en_name.json_value()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                        h3 "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," class_title.query_selector("),s("span",{style:{color:"#032F62"}},"'h3'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                        cn_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," h3.get_property("),s("span",{style:{color:"#032F62"}},"'innerText'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                        cn_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," cn_name.json_value()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                        cn_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    en_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    cn_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                file_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," re.sub("),s("span",{style:{color:"#D73A49"}},"r"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#005CC5"}},"["),s("span",{style:{color:"#D73A49"}},"^"),s("span",{style:{color:"#005CC5"}},"a-zA-Z]"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#032F62"}},"''"),s("span",{style:{color:"#24292E"}},", en_name) "),s("span",{style:{color:"#D73A49"}},"+"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'.png'"),s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#6A737D"}},"# 以英文模组名(去除非法字符)保存截屏文件")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                full_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"cn_name"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}}," "),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"en_name"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#6A737D"}},"# 为了少开一次浏览器，干脆把模组名也顺便获取并返回")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"not"),s("span",{style:{color:"#24292E"}}," os.path.exists("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'./data/pics/"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"file_name"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page.screenshot("),s("span",{style:{color:"#E36209"}},"path"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'./data/pics/"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"file_name"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," close:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page.close()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," browser.close()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                record_flag "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".mod_data_record("),s("span",{style:{color:"#E36209"}},"mod_cn_name"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"cn_name,"),s("span",{style:{color:"#E36209"}},"mod_en_name"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"en_name,"),s("span",{style:{color:"#E36209"}},"mod_file_name"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"file_name,"),s("span",{style:{color:"#E36209"}},"mod_full_name"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"full_name,"),s("span",{style:{color:"#E36209"}},"mod_url"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"mod_url)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," record_flag:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    data_dict "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"self"),s("span",{style:{color:"#24292E"}},".mod_data_read("),s("span",{style:{color:"#E36209"}},"mod_url"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"mod_url)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," data_dict")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"else"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    logger.error("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'未能记录模组 "),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_url"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," {}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Exception"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," e:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.error("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'获取截屏 "),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_url"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}}," 失败!'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.error("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'错误:"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"e"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," close:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page.close()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," browser.close()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," {}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"get_mod_name"),s("span",{style:{color:"#24292E"}},"(self, url: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},", lang: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'full'"),s("span",{style:{color:"#24292E"}},", close: "),s("span",{style:{color:"#005CC5"}},"bool"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"True"),s("span",{style:{color:"#24292E"}},") -> "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        获取模组名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param url: mcmod的模组页面")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param lang: 要获取的模组名语言, defaults to 'full'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param close: 完成后是否关闭网页, defaults to True")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :return:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},'        """')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"with"),s("span",{style:{color:"#24292E"}}," async_playwright() "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," p:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                browser "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," p.chromium.launch()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                page "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," browser.new_page()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page.goto(url)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page.wait_for_selector("),s("span",{style:{color:"#032F62"}},"'.class-title'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                class_title "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page.query_selector("),s("span",{style:{color:"#032F62"}},"'.class-title'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    h4 "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," class_title.query_selector("),s("span",{style:{color:"#032F62"}},"'h4'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    en_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," h4.get_property("),s("span",{style:{color:"#032F62"}},"'innerText'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    en_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," en_name.json_value()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                        h3 "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," class_title.query_selector("),s("span",{style:{color:"#032F62"}},"'h3'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                        cn_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," h3.get_property("),s("span",{style:{color:"#032F62"}},"'innerText'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                        cn_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," cn_name.json_value()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                        cn_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    en_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    cn_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                full_nm "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"cn_name"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}}," "),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"en_name"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," close:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," page.close()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," browser.close()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," lang "),s("span",{style:{color:"#D73A49"}},"=="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'full'"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," full_nm")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"elif"),s("span",{style:{color:"#24292E"}}," lang "),s("span",{style:{color:"#D73A49"}},"=="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'cn'"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," cn_name")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"elif"),s("span",{style:{color:"#24292E"}}," lang "),s("span",{style:{color:"#D73A49"}},"=="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'en'"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," en_name")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"elif"),s("span",{style:{color:"#24292E"}}," lang "),s("span",{style:{color:"#D73A49"}},"=="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'dict'"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    name_dict "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {"),s("span",{style:{color:"#032F62"}},"'cn_name'"),s("span",{style:{color:"#24292E"}},":cn_name,"),s("span",{style:{color:"#032F62"}},"'en_name'"),s("span",{style:{color:"#24292E"}},":en_name,"),s("span",{style:{color:"#032F62"}},"'full_name'"),s("span",{style:{color:"#24292E"}},":full_nm}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," name_dict")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"else"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    logger.debug("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'lang不能为"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"lang"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Exception"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," e:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.error("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'获取模组名称 "),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"url"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}}," 失败!'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.error("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'错误:"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"e"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"''")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"mod_data_record"),s("span",{style:{color:"#24292E"}},"(self, mod_file_name: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},",mod_full_name: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},", mod_url: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},", mod_cn_name: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"''"),s("span",{style:{color:"#24292E"}},", mod_en_name: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"''"),s("span",{style:{color:"#24292E"}},",  mod_pic_path: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"''"),s("span",{style:{color:"#24292E"}},") ->"),s("span",{style:{color:"#005CC5"}},"bool"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},'"""')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        以json文件存储模组的信息,变量名定义与其他函数中一致")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param mod_file_name: 模组去除非法字符(包括空格)的英文全名+后缀名")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param mod_full_name: 格式化后的全名, ex: 植物魔法|Botania")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param mod_url: 模组链接")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param mod_cn_name: 模组中文名, defaults to ''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param mod_en_name: 模组英文名, defaults to ''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :param mod_pic_path: 模组页面截图路径, defaults to ''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},"        :return: 记录成功返回True,否则False")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#032F62"}},'        """')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        logger.debug("),s("span",{style:{color:"#032F62"}},"'调用:McMod.mod_data_record'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.debug("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'记录模组数据:"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_cn_name"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            mods_data_path "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'./data/mods_data.json'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"not"),s("span",{style:{color:"#24292E"}}," os.path.exists(mods_data_path):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"with"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"open"),s("span",{style:{color:"#24292E"}},"(mods_data_path, "),s("span",{style:{color:"#032F62"}},"'w'"),s("span",{style:{color:"#24292E"}},","),s("span",{style:{color:"#E36209"}},"encoding"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'utf-8'"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," f:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                    json.dump({}, f,"),s("span",{style:{color:"#E36209"}},"ensure_ascii"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#005CC5"}},"False"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                logger.debug("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'未找到数据文件路径,已新建'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"not"),s("span",{style:{color:"#24292E"}}," mod_pic_path:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                mod_pic_path "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'./data/pics/"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_file_name"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                logger.debug("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'未传入pic_path,使用默认:"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_pic_path"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            mod_data "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {mod_url: {"),s("span",{style:{color:"#032F62"}},"'file_name'"),s("span",{style:{color:"#24292E"}},": mod_file_name, "),s("span",{style:{color:"#032F62"}},"'cn_name'"),s("span",{style:{color:"#24292E"}},": mod_cn_name,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                                        "),s("span",{style:{color:"#032F62"}},"'en_name'"),s("span",{style:{color:"#24292E"}},": mod_en_name, "),s("span",{style:{color:"#032F62"}},"'full_name'"),s("span",{style:{color:"#24292E"}},": mod_full_name, "),s("span",{style:{color:"#032F62"}},"'mod_url'"),s("span",{style:{color:"#24292E"}},": mod_url, "),s("span",{style:{color:"#032F62"}},"'pic_path'"),s("span",{style:{color:"#24292E"}},": mod_pic_path}}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.debug("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'模组数据:"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_data"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"with"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"open"),s("span",{style:{color:"#24292E"}},"(mods_data_path,"),s("span",{style:{color:"#032F62"}},"'r'"),s("span",{style:{color:"#24292E"}},","),s("span",{style:{color:"#E36209"}},"encoding"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'utf-8'"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," f:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                data_content "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," json.load(f)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            data_content.update(mod_data)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"with"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"open"),s("span",{style:{color:"#24292E"}},"(mods_data_path,"),s("span",{style:{color:"#032F62"}},"'w'"),s("span",{style:{color:"#24292E"}},","),s("span",{style:{color:"#E36209"}},"encoding"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'utf-8'"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," f:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                json.dump(data_content,f,"),s("span",{style:{color:"#E36209"}},"indent"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#005CC5"}},"4"),s("span",{style:{color:"#24292E"}},","),s("span",{style:{color:"#E36209"}},"ensure_ascii"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#005CC5"}},"False"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.info("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'已记录模组数据:"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_data"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"True")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Exception"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," e:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.error("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'记录模组数据 "),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_url"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}}," 错误!'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.error("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'错误:"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"e"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"False")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"mod_data_read"),s("span",{style:{color:"#24292E"}},"(self,mod_url:"),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},") -> "),s("span",{style:{color:"#005CC5"}},"dict"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.debug("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'读取模组数据:"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_url"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            mods_data_path "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'./data/mods_data.json'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"with"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"open"),s("span",{style:{color:"#24292E"}},"(mods_data_path,"),s("span",{style:{color:"#032F62"}},"'r'"),s("span",{style:{color:"#24292E"}},","),s("span",{style:{color:"#E36209"}},"encoding"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'utf-8'"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," f:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                data "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," json.load(f)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," mod_url "),s("span",{style:{color:"#D73A49"}},"in"),s("span",{style:{color:"#24292E"}}," data:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                full_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," data[mod_url].get("),s("span",{style:{color:"#032F62"}},"'full_name'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                logger.info("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'该模组数据已记录:"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"full_name"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," data[mod_url]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"else"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                logger.debug("),s("span",{style:{color:"#032F62"}},"'该模组数据未记录'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"False")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Exception"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," e:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.error("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'读取模组数据 "),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_url"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}}," 错误!'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.error("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'错误:"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"e"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"False")])])])],-1),eo=s("p",null,[l("然后在 "),s("code",null,"bot.py"),l(" 中添加这一功能:")],-1),to=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"get_mcmod"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"update"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," Update"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"context"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," ContextTypes"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),s("span",{style:{color:"#545454","font-style":"italic"}},"自动获取mcmod上的模组信息"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    mod_urls "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," getWords"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"get_mcmod_url"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_message"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"text"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#EEFFFF"}}," mod_url "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#EEFFFF"}}," mod_urls"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        data_dict "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," mcmod"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"mod_data_read"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," data_dict"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"send_mod_data"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"update"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"context"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"context"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"data_dict"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"data_dict"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"continue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            data_dict "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," mcmod"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"screenshot"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"Exception"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," e"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            text "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'无法获取模组信息："),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"e"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"send_message"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_chat"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"text"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"continue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"not"),s("span",{style:{color:"#EEFFFF"}}," data_dict"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            text "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'无法找到模组信息："),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"mod_url"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"send_message"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_chat"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"text"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"continue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"send_mod_data"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"update"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"context"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"context"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"data_dict"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"data_dict"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"send_mod_data"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"update"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}},"Update"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"context"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}},"ContextTypes"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"DEFAULT_TYPE"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"data_dict"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#FFCB6B"}},"dict"),s("span",{style:{color:"#89DDFF"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),s("span",{style:{color:"#545454","font-style":"italic"}},"发送模组数据"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"try"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        file "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," data_dict"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"file_name"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        mod_url "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," data_dict"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"mod_url"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        full_name "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," data_dict"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"full_name"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"async"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"with"),s("span",{style:{color:"#EEFFFF"}}," aiofiles"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"open"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'./data/pics/"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"file"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"rb"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"as"),s("span",{style:{color:"#EEFFFF"}}," f"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            photo "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," f"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"read"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"except"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"FileNotFoundError"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        text "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'无法找到截图文件："),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"file"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"send_message"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_chat"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"text"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    text "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'找到了这个模组~"),s("span",{style:{color:"#EEFFFF"}},"\\n"),s("span",{style:{color:"#C3E88D"}},'<b><a href="'),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"mod_url"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},'">'),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"full_name"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"</a></b>'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"await"),s("span",{style:{color:"#EEFFFF"}}," context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"bot"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"send_photo"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"chat_id"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"update"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"effective_chat"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#F07178"}},"id"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"photo"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"photo"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"caption"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#82AAFF"}},"text"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"parse_mode"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"HTML"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"get_mcmod"),s("span",{style:{color:"#24292E"}},"(update: Update, context: ContextTypes."),s("span",{style:{color:"#005CC5"}},"DEFAULT_TYPE"),s("span",{style:{color:"#24292E"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},"'''自动获取mcmod上的模组信息'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    mod_urls "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," getWords.get_mcmod_url("),s("span",{style:{color:"#E36209"}},"text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update.effective_message.text)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"for"),s("span",{style:{color:"#24292E"}}," mod_url "),s("span",{style:{color:"#D73A49"}},"in"),s("span",{style:{color:"#24292E"}}," mod_urls:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        data_dict "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," mcmod.mod_data_read("),s("span",{style:{color:"#E36209"}},"mod_url"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"mod_url)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," data_dict:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," send_mod_data("),s("span",{style:{color:"#E36209"}},"update"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update, "),s("span",{style:{color:"#E36209"}},"context"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"context, "),s("span",{style:{color:"#E36209"}},"data_dict"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"data_dict)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"continue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            data_dict "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," mcmod.screenshot("),s("span",{style:{color:"#E36209"}},"mod_url"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"mod_url)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"Exception"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," e:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            text "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'无法获取模组信息："),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"e"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.send_message("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update.effective_chat.id, "),s("span",{style:{color:"#E36209"}},"text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"text)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"continue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"not"),s("span",{style:{color:"#24292E"}}," data_dict:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            text "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'无法找到模组信息："),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_url"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.send_message("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update.effective_chat.id, "),s("span",{style:{color:"#E36209"}},"text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"text)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"continue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," send_mod_data("),s("span",{style:{color:"#E36209"}},"update"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update, "),s("span",{style:{color:"#E36209"}},"context"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"context, "),s("span",{style:{color:"#E36209"}},"data_dict"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"data_dict)")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"send_mod_data"),s("span",{style:{color:"#24292E"}},"(update:Update, context:ContextTypes."),s("span",{style:{color:"#005CC5"}},"DEFAULT_TYPE"),s("span",{style:{color:"#24292E"}},", data_dict:"),s("span",{style:{color:"#005CC5"}},"dict"),s("span",{style:{color:"#24292E"}},"):")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},"'''发送模组数据'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"try"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#E36209"}},"file"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," data_dict["),s("span",{style:{color:"#032F62"}},"'file_name'"),s("span",{style:{color:"#24292E"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        mod_url "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," data_dict["),s("span",{style:{color:"#032F62"}},"'mod_url'"),s("span",{style:{color:"#24292E"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        full_name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," data_dict["),s("span",{style:{color:"#032F62"}},"'full_name'"),s("span",{style:{color:"#24292E"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"async"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"with"),s("span",{style:{color:"#24292E"}}," aiofiles.open("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'./data/pics/"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#E36209"}},"file"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#032F62"}},"'rb'"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"as"),s("span",{style:{color:"#24292E"}}," f:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            photo "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," f.read()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"except"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"FileNotFoundError"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        text "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'无法找到截图文件："),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#E36209"}},"file"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.send_message("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update.effective_chat.id, "),s("span",{style:{color:"#E36209"}},"text"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"text)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"return")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    text "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'找到了这个模组~"),s("span",{style:{color:"#005CC5"}},"\\n"),s("span",{style:{color:"#032F62"}},'<b><a href="'),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"mod_url"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},'">'),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"full_name"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"</a></b>'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"await"),s("span",{style:{color:"#24292E"}}," context.bot.send_photo("),s("span",{style:{color:"#E36209"}},"chat_id"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"update.effective_chat.id, "),s("span",{style:{color:"#E36209"}},"photo"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"photo, "),s("span",{style:{color:"#E36209"}},"caption"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"text, "),s("span",{style:{color:"#E36209"}},"parse_mode"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},"'HTML'"),s("span",{style:{color:"#24292E"}},")")])])])],-1),co=s("p",null,[l("我们还需要一个从消息中提取链接的函数,在 "),s("code",null,"words.py"),l(" 中:")],-1),Fo=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"def"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"get_mcmod_url"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#F07178","font-style":"italic"}},"self"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#EEFFFF","font-style":"italic"}},"text"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"->"),s("span",{style:{color:"#EEFFFF"}}," list"),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#FFCB6B"}},"str"),s("span",{style:{color:"#89DDFF"}},"]:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''"),s("span",{style:{color:"#545454","font-style":"italic"}},"返回句中的mcmod页面链接列表"),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        mod_nums "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," re"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"findall"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"r"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"www"),s("span",{style:{color:"#EEFFFF"}},"\\."),s("span",{style:{color:"#C3E88D"}},"mcmod"),s("span",{style:{color:"#EEFFFF"}},"\\."),s("span",{style:{color:"#C3E88D"}},"cn/class/"),s("span",{style:{color:"#89DDFF"}},"(["),s("span",{style:{color:"#C3E88D"}},"0-9"),s("span",{style:{color:"#89DDFF"}},']+)"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," text"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        urls "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"["),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},'"https://www.mcmod.cn/class/'),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#EEFFFF"}},"x"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},'"'),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#EEFFFF"}}," x "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"in"),s("span",{style:{color:"#EEFFFF"}}," mod_nums"),s("span",{style:{color:"#89DDFF"}},"]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," urls"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"info"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"f"),s("span",{style:{color:"#C3E88D"}},"'获取到mcmod链接"),s("span",{style:{color:"#F78C6C"}},"{"),s("span",{style:{color:"#82AAFF"}},"urls"),s("span",{style:{color:"#F78C6C"}},"}"),s("span",{style:{color:"#C3E88D"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," urls")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"else"),s("span",{style:{color:"#89DDFF"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            logger"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"info"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#C3E88D"}},"无mcmod链接"),s("span",{style:{color:"#89DDFF"}},"'"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"[]")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"def"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"get_mcmod_url"),s("span",{style:{color:"#24292E"}},"(self, text: "),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},") -> list["),s("span",{style:{color:"#005CC5"}},"str"),s("span",{style:{color:"#24292E"}},"]:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#032F62"}},"'''返回句中的mcmod页面链接列表'''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        mod_nums "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," re.findall("),s("span",{style:{color:"#D73A49"}},"r"),s("span",{style:{color:"#032F62"}},'"www'),s("span",{style:{color:"#22863A","font-weight":"bold"}},"\\."),s("span",{style:{color:"#032F62"}},"mcmod"),s("span",{style:{color:"#22863A","font-weight":"bold"}},"\\."),s("span",{style:{color:"#032F62"}},"cn/class/"),s("span",{style:{color:"#005CC5"}},"([0-9]"),s("span",{style:{color:"#D73A49"}},"+"),s("span",{style:{color:"#005CC5"}},")"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},", text)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        urls "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," ["),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},'"https://www.mcmod.cn/class/'),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"x"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"for"),s("span",{style:{color:"#24292E"}}," x "),s("span",{style:{color:"#D73A49"}},"in"),s("span",{style:{color:"#24292E"}}," mod_nums]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," urls:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.info("),s("span",{style:{color:"#D73A49"}},"f"),s("span",{style:{color:"#032F62"}},"'获取到mcmod链接"),s("span",{style:{color:"#005CC5"}},"{"),s("span",{style:{color:"#24292E"}},"urls"),s("span",{style:{color:"#005CC5"}},"}"),s("span",{style:{color:"#032F62"}},"'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," urls")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"else"),s("span",{style:{color:"#24292E"}},":")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            logger.info("),s("span",{style:{color:"#032F62"}},"'无mcmod链接'"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," []")])])])],-1),po=s("p",null,"这个函数返回一个列表,包含了消息中包含的所有 mcmod 模组页面的链接",-1),ro=s("p",null,"然后,还需要一个用于触发该功能的过滤器:",-1),yo=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"filter_mcmod "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," filters"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Regex"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#C792EA"}},"r"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"www.mcmod.cn/class"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"filter_mcmod "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," filters.Regex("),s("span",{style:{color:"#D73A49"}},"r"),s("span",{style:{color:"#032F62"}},'"www'),s("span",{style:{color:"#005CC5"}},"."),s("span",{style:{color:"#032F62"}},"mcmod"),s("span",{style:{color:"#005CC5"}},"."),s("span",{style:{color:"#032F62"}},'cn/class"'),s("span",{style:{color:"#24292E"}},")")])])])],-1),Do=s("p",null,"最后添加它的 handler 即可:",-1),io=s("div",{class:"language-python"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"get_mcmod_handler "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"MessageHandler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"filter_mcmod"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#82AAFF"}}," get_mcmod"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"application"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"add_handler"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#82AAFF"}},"get_mcmod_handler"),s("span",{style:{color:"#89DDFF"}},")")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"get_mcmod_handler "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," MessageHandler(filter_mcmod, get_mcmod)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"application.add_handler(get_mcmod_handler)")])])])],-1);function Eo(e,Ao,_o,uo,F,ho){const n=_,p=r;return d(),E(p,{frontmatter:F.frontmatter,data:F.data},{"main-content-md":o(()=>[h,s("h2",f,[l("前言 "),a(n,{class:"header-anchor",href:"#前言","aria-label":'Permalink to "前言"'},{default:o(()=>[l("​")]),_:1})]),C,s("p",null,[l("在这篇文章中，将使用 "),a(n,{href:"https://docs.python-telegram-bot.org",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("Python-Telegram-Bot")]),_:1}),l(" 最新版库，基于 Python 的新版异步特性与 Telegram 友好开放的 API，开发一个兼顾实用性和趣味的 bot ，并使用 Docker 在任何地方部署 bot")]),s("p",null,[l("Demo: "),a(n,{href:"https://github.com/krau/kmua-bot",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("kmua-bot")]),_:1})]),m,A(" more "),s("h2",g,[l("准备 "),a(n,{class:"header-anchor",href:"#准备","aria-label":'Permalink to "准备"'},{default:o(()=>[l("​")]),_:1})]),s("h3",b,[l("环境 "),a(n,{class:"header-anchor",href:"#环境","aria-label":'Permalink to "环境"'},{default:o(()=>[l("​")]),_:1})]),k,w,s("ul",null,[s("li",null,[l("PyYAML: "),a(n,{href:"https://zh.wikipedia.org/wiki/YAML",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("yaml")]),_:1}),l(" 配置文件相关包")]),x]),v,s("ul",null,[T,s("li",null,[l("parsel: 数据解析 "),s("s",null,[l("- pyppeteer: 浏览器爬虫包，"),a(n,{href:"https://github.com/puppeteer/puppeteer",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("puppeteer")]),_:1}),l(" 的 python 移植（问我为啥不用更好的 "),a(n,{href:"https://github.com/microsoft/playwright-python",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("playwright-python")]),_:1}),l(" ？被简中互联网上的文章坑了，以后会迁移过去。）")])]),B]),U,s("h3",P,[l("bot 申请 "),a(n,{class:"header-anchor",href:"#bot-申请","aria-label":'Permalink to "bot 申请"'},{default:o(()=>[l("​")]),_:1})]),s("p",null,[l("私聊 "),a(n,{href:"https://t.me/BotFather",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("@BotFather")]),_:1}),l("。发送 "),j,l("，根据提示一步步创建，记得妥善保存最后的 "),L,l("。")]),s("h3",N,[l("获取你的 id "),a(n,{class:"header-anchor",href:"#获取你的-id","aria-label":'Permalink to "获取你的 id"'},{default:o(()=>[l("​")]),_:1})]),s("p",null,[l("每个 tg 用户都有一串标识数字，即为 "),M,l("，可以私聊 "),a(n,{href:"https://t.me/userinfobot",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("@userinfobot")]),_:1}),l(" 来获取它")]),O,s("h2",H,[l("基础 "),a(n,{class:"header-anchor",href:"#基础","aria-label":'Permalink to "基础"'},{default:o(()=>[l("​")]),_:1})]),s("h3",R,[l("开始:响应/start "),a(n,{class:"header-anchor",href:"#开始-响应-start","aria-label":'Permalink to "开始:响应/start"'},{default:o(()=>[l("​")]),_:1})]),Y,$,G,S,q,W,I,K,s("blockquote",null,[s("p",null,[l("你注意到 这个函数使用了 async/await 语法，这是 python 新版的语法糖，详见 官方文档 "),a(n,{href:"https://docs.python.org/3/library/asyncio.html",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("asyncio")]),_:1})])]),Z,V,z,X,J,Q,ss,ls,os,ns,as,es,ts,cs,Fs,ps,rs,s("h3",ys,[l("授予群成员头衔 "),a(n,{class:"header-anchor",href:"#授予群成员头衔","aria-label":'Permalink to "授予群成员头衔"'},{default:o(()=>[l("​")]),_:1})]),Ds,is,Es,ds,As,_s,us,hs,fs,Cs,ms,gs,bs,ks,s("h3",ws,[l("响应未知命令 "),a(n,{class:"header-anchor",href:"#响应未知命令","aria-label":'Permalink to "响应未知命令"'},{default:o(()=>[l("​")]),_:1})]),xs,vs,Ts,Bs,Us,Ps,js,Ls,Ns,Ms,s("h3",Os,[l("简单的关键词回复 "),a(n,{class:"header-anchor",href:"#简单的关键词回复","aria-label":'Permalink to "简单的关键词回复"'},{default:o(()=>[l("​")]),_:1})]),Hs,Rs,Ys,$s,Gs,Ss,qs,Ws,Is,Ks,s("h2",Zs,[l("进阶 "),a(n,{class:"header-anchor",href:"#进阶","aria-label":'Permalink to "进阶"'},{default:o(()=>[l("​")]),_:1})]),s("h3",Vs,[l("定制日志系统 "),a(n,{class:"header-anchor",href:"#定制日志系统","aria-label":'Permalink to "定制日志系统"'},{default:o(()=>[l("​")]),_:1})]),zs,Xs,Js,Qs,sl,ll,ol,nl,al,s("h3",el,[l("使用 yml 文件配置 "),a(n,{class:"header-anchor",href:"#使用-yml-文件配置","aria-label":'Permalink to "使用 yml 文件配置"'},{default:o(()=>[l("​")]),_:1})]),tl,cl,Fl,pl,rl,yl,Dl,il,El,dl,Al,_l,ul,hl,fl,s("h3",Cl,[l("使用 json 存取词库 "),a(n,{class:"header-anchor",href:"#使用-json-存取词库","aria-label":'Permalink to "使用 json 存取词库"'},{default:o(()=>[l("​")]),_:1})]),ml,gl,bl,kl,wl,xl,vl,Tl,Bl,Ul,Pl,jl,Ll,s("h3",Nl,[l("使用 docker 部署 bot "),a(n,{class:"header-anchor",href:"#使用-docker-部署-bot","aria-label":'Permalink to "使用 docker 部署 bot"'},{default:o(()=>[l("​")]),_:1})]),Ml,s("h4",Ol,[l("本地构建 "),a(n,{class:"header-anchor",href:"#本地构建","aria-label":'Permalink to "本地构建"'},{default:o(()=>[l("​")]),_:1})]),Hl,Rl,Yl,$l,Gl,s("blockquote",null,[s("p",null,[l("关于 docker 构建镜像的更多帮助,可以参阅 "),a(n,{href:"https://yeasy.gitbook.io/docker_practice/image/build#gou-jian-jing-xiang",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("docker 从入门到实践")]),_:1})])]),Sl,s("h4",ql,[l("使用 GitHub action 自动构建 "),a(n,{class:"header-anchor",href:"#使用-github-action-自动构建","aria-label":'Permalink to "使用 GitHub action 自动构建"'},{default:o(()=>[l("​")]),_:1})]),Wl,Il,Kl,Zl,Vl,zl,Xl,Jl,Ql,s("h2",so,[l("附加 "),a(n,{class:"header-anchor",href:"#附加","aria-label":'Permalink to "附加"'},{default:o(()=>[l("​")]),_:1})]),s("h3",lo,[l("使用playwright查询mc模组信息并记录 "),a(n,{class:"header-anchor",href:"#使用playwright查询mc模组信息并记录","aria-label":'Permalink to "使用playwright查询mc模组信息并记录"'},{default:o(()=>[l("​")]),_:1})]),oo,s("p",null,[l("我们想要实现这样的功能: 当 bot 收到包含 "),a(n,{href:"https://www.mcmod.cn",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("mcmod")]),_:1}),l(" 页面链接的消息时,去主动打开链接,收集模组信息并截图,然后发送模组信息给用户.并且持久化保存这些信息,当再次收到同样的链接时,直接从已保存的数据中获取并返回给用户.")]),no,ao,eo,to,co,Fo,po,ro,yo,Do,io]),"main-header":o(()=>[t(e.$slots,"main-header")]),"main-header-after":o(()=>[t(e.$slots,"main-header-after")]),"main-nav":o(()=>[t(e.$slots,"main-nav")]),"main-content":o(()=>[t(e.$slots,"main-content")]),"main-content-after":o(()=>[t(e.$slots,"main-content-after")]),"main-nav-before":o(()=>[t(e.$slots,"main-nav-before")]),"main-nav-after":o(()=>[t(e.$slots,"main-nav-after")]),comment:o(()=>[t(e.$slots,"comment")]),footer:o(()=>[t(e.$slots,"footer")]),aside:o(()=>[t(e.$slots,"aside")]),"aside-custom":o(()=>[t(e.$slots,"aside-custom")]),default:o(()=>[t(e.$slots,"default")]),_:3},8,["frontmatter","data"])}const xo=y(u,[["render",Eo]]);export{wo as __pageData,xo as default};
