import{_ as p}from"./ValaxyMain.vue_vue_type_style_index_0_lang-bc47d8ab.js";import{_ as y,u as E,p as i,c as D,w as o,o as C,b as s,d as l,e,a as d,r as t,f as A}from"./app-75353cfc.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-40512001.js";import"./YunCard.vue_vue_type_script_setup_true_lang-4560dbb6.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-3207029f.js";import"./index-463abdac.js";const Js=JSON.parse('{"title":"Go 的 gRPC 和 Protocol Buffers---Quick Start","description":"","frontmatter":{"title":"Go 的 gRPC 和 Protocol Buffers---Quick Start","date":"2023-10-21T21:27:48.000Z","updated":"2023-10-21T21:27:48.000Z","tags":["代码","Go","gRPC","Protobuf"],"categories":"小技术","hide":null,"author":"Krau","copyright":true,"icon":null,"cover":null,"color":"#79d4fd","comment":true,"end":false,"encrypt":false},"headers":[{"level":2,"title":"Protocol Buffers","slug":"protocol-buffers","link":"#protocol-buffers","children":[{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":3,"title":"语法和规范","slug":"语法和规范","link":"#语法和规范","children":[]},{"level":3,"title":"编译生成 Go 代码","slug":"编译生成-go-代码","link":"#编译生成-go-代码","children":[]}]},{"level":2,"title":"gRPC","slug":"grpc","link":"#grpc","children":[{"level":3,"title":"安装","slug":"安装-1","link":"#安装-1","children":[]},{"level":3,"title":"定义 gRPC 服务和方法","slug":"定义-grpc-服务和方法","link":"#定义-grpc-服务和方法","children":[]},{"level":3,"title":"生成 Go 代码","slug":"生成-go-代码","link":"#生成-go-代码","children":[]},{"level":3,"title":"服务端实现","slug":"服务端实现","link":"#服务端实现","children":[]},{"level":3,"title":"客户端调用","slug":"客户端调用","link":"#客户端调用","children":[]}]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}],"relativePath":"pages/posts/grpc-and-protobuf-in-go-start.md","path":"/home/runner/work/blog-source-valaxy/blog-source-valaxy/pages/posts/grpc-and-protobuf-in-go-start.md","lastUpdated":1697949371000}'),r=JSON.parse('{"title":"Go 的 gRPC 和 Protocol Buffers---Quick Start","description":"","frontmatter":{"title":"Go 的 gRPC 和 Protocol Buffers---Quick Start","date":"2023-10-21T21:27:48.000Z","updated":"2023-10-21T21:27:48.000Z","tags":["代码","Go","gRPC","Protobuf"],"categories":"小技术","hide":null,"author":"Krau","copyright":true,"icon":null,"cover":null,"color":"#79d4fd","comment":true,"end":false,"encrypt":false},"headers":[{"level":2,"title":"Protocol Buffers","slug":"protocol-buffers","link":"#protocol-buffers","children":[{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":3,"title":"语法和规范","slug":"语法和规范","link":"#语法和规范","children":[]},{"level":3,"title":"编译生成 Go 代码","slug":"编译生成-go-代码","link":"#编译生成-go-代码","children":[]}]},{"level":2,"title":"gRPC","slug":"grpc","link":"#grpc","children":[{"level":3,"title":"安装","slug":"安装-1","link":"#安装-1","children":[]},{"level":3,"title":"定义 gRPC 服务和方法","slug":"定义-grpc-服务和方法","link":"#定义-grpc-服务和方法","children":[]},{"level":3,"title":"生成 Go 代码","slug":"生成-go-代码","link":"#生成-go-代码","children":[]},{"level":3,"title":"服务端实现","slug":"服务端实现","link":"#服务端实现","children":[]},{"level":3,"title":"客户端调用","slug":"客户端调用","link":"#客户端调用","children":[]}]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}],"relativePath":"pages/posts/grpc-and-protobuf-in-go-start.md","path":"/home/runner/work/blog-source-valaxy/blog-source-valaxy/pages/posts/grpc-and-protobuf-in-go-start.md","lastUpdated":1697949371000}'),g={name:"pages/posts/grpc-and-protobuf-in-go-start.md",data(){return{data:r,frontmatter:r.frontmatter,$frontmatter:r.frontmatter}},setup(){const a=E();a.meta.frontmatter=Object.assign(a.meta.frontmatter,r.frontmatter),i("pageData",r)}},u={id:"protocol-buffers",tabindex:"-1"},f=s("p",null,"Protocol Buffers (Protobuf) 是一种语言无关、平台无关、可扩展的序列化结构化数据的方法, 可以像 XML, json 等一样用于程序间数据通信. 而相较于上列二者, Protobuf 有更高的效率.",-1),h=s("p",null,[l("使用 Protobuf 需要在 "),s("code",null,".proto"),l(" 文件中定义数据结构, 并安装其编译器来生成对应语言的模型. 本文以 Go 为例.")],-1),k={id:"安装",tabindex:"-1"},m=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"TIP"),s("span",{lang:"zh-CN"},"提示")]),s("p",null,"本文环境:"),s("ul",null,[s("li",null,"Debian 12 amd64"),s("li",null,"Go 1.21.3"),s("li",null,"Protoc 24.4")])],-1),_=s("code",null,"PATH",-1),v=s("div",{class:"language-bash"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"wget"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"https://github.com/protocolbuffers/protobuf/releases/download/v24.4/protoc-24.4-linux-x86_64.zip")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"mkdir"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"protoc"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"&&"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"unzip"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"protoc-24.4-linux-x86_64.zip"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"-d"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"protoc")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"export"),s("span",{style:{color:"#EEFFFF"}}," PATH"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}},"$PATH"),s("span",{style:{color:"#C3E88D"}},":"),s("span",{style:{color:"#EEFFFF"}},"$PWD"),s("span",{style:{color:"#C3E88D"}},"/protoc/bin"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"# 将此行加入终端配置文件中")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"wget"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"https://github.com/protocolbuffers/protobuf/releases/download/v24.4/protoc-24.4-linux-x86_64.zip")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"mkdir"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"protoc"),s("span",{style:{color:"#24292E"}}," && "),s("span",{style:{color:"#6F42C1"}},"unzip"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"protoc-24.4-linux-x86_64.zip"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"-d"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"protoc")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"export"),s("span",{style:{color:"#24292E"}}," PATH"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}},"$PATH"),s("span",{style:{color:"#032F62"}},":"),s("span",{style:{color:"#24292E"}},"$PWD"),s("span",{style:{color:"#032F62"}},"/protoc/bin"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6A737D"}},"# 将此行加入终端配置文件中")])])])],-1),w=s("p",null,[l("为了在 Go 中使用 Protobuf 和默认使用 Protobuf 的 gRPC, 还需要安装 "),s("code",null,"protoc-gen-go"),l(" 和 "),s("code",null,"protoc-gen-go-grpc")],-1),b=s("div",{class:"language-bash"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"go"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"install"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"google.golang.org/protobuf/cmd/protoc-gen-go@latest")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"go"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"install"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#C792EA"}},"export"),s("span",{style:{color:"#EEFFFF"}}," PATH"),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#EEFFFF"}},"$PATH"),s("span",{style:{color:"#C3E88D"}},":"),s("span",{style:{color:"#89DDFF"}},"$("),s("span",{style:{color:"#FFCB6B"}},"go"),s("span",{style:{color:"#C3E88D"}}," env GOPATH"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#C3E88D"}},"/bin"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"# 把 GOBIN 加入 PATH")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"go"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"install"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"google.golang.org/protobuf/cmd/protoc-gen-go@latest")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"go"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"install"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"export"),s("span",{style:{color:"#24292E"}}," PATH"),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"$PATH"),s("span",{style:{color:"#032F62"}},":$("),s("span",{style:{color:"#6F42C1"}},"go"),s("span",{style:{color:"#032F62"}},' env GOPATH)/bin"'),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6A737D"}},"# 把 GOBIN 加入 PATH")])])])],-1),B={id:"语法和规范",tabindex:"-1"},P=s("p",null,"Protobuf 的主要语法很简单也很 Go, 下例:",-1),I=s("div",{class:"language-proto"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"proto"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"syntax"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},'"proto3"'),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 指定版本")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"option"),s("span",{style:{color:"#EEFFFF"}}," go_package "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},'"example/proto"'),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 指定 Go 代码生成的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"package"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"artwork"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 包名, 用于区分不同的 proto 文件. 注意此包名并不是 Go 中的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"message"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"ArtworkInfo"),s("span",{style:{color:"#EEFFFF"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," artworkID "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"string"),s("span",{style:{color:"#EEFFFF"}}," title "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"SourceName"),s("span",{style:{color:"#EEFFFF"}}," source "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 引用枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"repeated"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"string"),s("span",{style:{color:"#EEFFFF"}}," tags "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// repeated 表示为数组")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"bool"),s("span",{style:{color:"#EEFFFF"}}," r18 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"5"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"repeated"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"PictureInfo"),s("span",{style:{color:"#EEFFFF"}}," pictures "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"6"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 引用嵌套消息类型")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F78C6C"}},"enum"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"SourceName"),s("span",{style:{color:"#EEFFFF"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        Pixiv "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        Twitter "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#545454","font-style":"italic"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义嵌套消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F78C6C"}},"message"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"PictureInfo"),s("span",{style:{color:"#EEFFFF"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," pictureID "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," width "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," height "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"syntax"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},'"proto3"'),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 指定版本")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"option"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"go_package"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},'"example/proto"'),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 指定 Go 代码生成的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"package"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"artwork"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 包名, 用于区分不同的 proto 文件. 注意此包名并不是 Go 中的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// 定义消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"message"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ArtworkInfo"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," artworkID "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},"; ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"string"),s("span",{style:{color:"#24292E"}}," title "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"2"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"SourceName"),s("span",{style:{color:"#24292E"}}," source "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"3"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 引用枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"repeated"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"string"),s("span",{style:{color:"#24292E"}}," tags "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"4"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// repeated 表示为数组")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"bool"),s("span",{style:{color:"#24292E"}}," r18 "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"5"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"repeated"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"PictureInfo"),s("span",{style:{color:"#24292E"}}," pictures "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"6"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 引用嵌套消息类型")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"// 定义枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"enum"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"SourceName"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        Pixiv "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"0"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        Twitter "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#6A737D"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"// 定义嵌套消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"message"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"PictureInfo"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," pictureID "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," width "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"2"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," height "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"3"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),S=s("p",null,"可以看到 Proto 的消息定义和 Go 的结构体定义很像, 简要总结:",-1),G=s("ul",null,[s("li",null,[l("消息类型定义: "),s("code",null,"message"),l(" 关键字 + 消息名, 在大括号内定义字段")]),s("li",null,"字段定义: 字段类型, 字段名, 编号. 编号是不可省略且在同一消息定义下不可重复的. 可以理解成字段的唯一ID.")],-1),x=s("p",null,"在规范上, Protobuf 有如下约定:",-1),R=s("ul",null,[s("li",null,[l("包名应为小写, 且使用和目录结构一致的点分法, 如 "),s("code",null,"example.package")]),s("li",null,[l("使用驼峰命名法命名消息类型和服务, 如 "),s("code",null,"ExampleMessage"),l(", "),s("code",null,"ExampleService")]),s("li",null,[l("使用蛇形命名法命名字段, 如 "),s("code",null,"example_field")]),s("li",null,[l("使用双斜杠注释, 如 "),s("code",null,"// 注释内容")])],-1),N={id:"编译生成-go-代码",tabindex:"-1"},T=s("p",null,[l("在 "),s("code",null,".proto"),l(" 文件所在目录下执行:")],-1),q=s("div",{class:"language-bash"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"protoc"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"--go_out=."),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"example.proto")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"protoc"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"--go_out=."),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"example.proto")])])])],-1),$=s("p",null,[l("protoc 会在当前目录下生成 "),s("code",null,"proto/example.pb.go"),l(" 文件, 其中包含了 "),s("code",null,"example.proto"),l(" 中定义的消息类型, 并且提供了一些方便的方法.")],-1),L=s("p",null,[l("由 protoc 生成的文件不应直接修改, 如需更改, 应修改 "),s("code",null,".proto"),l(" 文件后重新编译生成.")],-1),H=s("p",null,"Protobuf 常与 gRPC 结合使用, 作为服务之间远程调用的数据传输格式.",-1),z={id:"grpc",tabindex:"-1"},O=s("p",null,[l("gRPC、 Protobuf 和 Go 都是由 Google 开发的, "),s("s",null,"这三者结合使用具有套装效果.")],-1),U={id:"安装-1",tabindex:"-1"},W=s("p",null,"在项目目录下执行:",-1),V=s("div",{class:"language-bash"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"go"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"get"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"-u"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"google.golang.org/grpc")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"go"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"get"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"-u"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"google.golang.org/grpc")])])])],-1),Q={id:"定义-grpc-服务和方法",tabindex:"-1"},Z=s("p",null,"定义一个服务, 并指定其可以被远程调用的方法, 以及方法的参数和返回值类型. 这即是 gRPc 定义服务的思想.",-1),M=s("p",null,[l("在上文的 "),s("code",null,"example.proto"),l(" 中定义一个服务:")],-1),j=s("div",{class:"language-proto"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"proto"),s("pre",{class:"shiki material-theme-darker has-diff vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"syntax"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},'"proto3"'),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 指定版本")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"option"),s("span",{style:{color:"#EEFFFF"}}," go_package "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},'"example/proto"'),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 指定 Go 代码生成的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"package"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"artwork"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 包名, 用于区分不同的 proto 文件. 注意此包名并不是 Go 中的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"message"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"ArtworkInfo"),s("span",{style:{color:"#EEFFFF"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," artworkID "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"string"),s("span",{style:{color:"#EEFFFF"}}," title "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"SourceName"),s("span",{style:{color:"#EEFFFF"}}," source "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 引用枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"repeated"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"string"),s("span",{style:{color:"#EEFFFF"}}," tags "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// repeated 表示为数组")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"bool"),s("span",{style:{color:"#EEFFFF"}}," r18 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"5"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"repeated"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"PictureInfo"),s("span",{style:{color:"#EEFFFF"}}," pictures "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"6"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 引用嵌套消息类型")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F78C6C"}},"enum"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"SourceName"),s("span",{style:{color:"#EEFFFF"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        Pixiv "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        Twitter "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#545454","font-style":"italic"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义嵌套消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F78C6C"}},"message"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"PictureInfo"),s("span",{style:{color:"#EEFFFF"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," pictureID "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," width "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," height "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#F78C6C"}},"message"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#EEFFFF"}}," { ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," artworkID "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#EEFFFF"}},"} ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义服务 ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#F78C6C"}},"service"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"ArtworkService"),s("span",{style:{color:"#EEFFFF"}}," { ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义方法 ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F78C6C"}},"rpc"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"GetArtworkInfo"),s("span",{style:{color:"#EEFFFF"}}," ("),s("span",{style:{color:"#FFCB6B"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#EEFFFF"}},") "),s("span",{style:{color:"#F78C6C"}},"returns"),s("span",{style:{color:"#EEFFFF"}}," ("),s("span",{style:{color:"#FFCB6B"}},"ArtworkInfo"),s("span",{style:{color:"#EEFFFF"}},")"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#EEFFFF"}},"} ")])])]),s("pre",{class:"shiki github-light has-diff vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"syntax"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},'"proto3"'),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 指定版本")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"option"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"go_package"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},'"example/proto"'),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 指定 Go 代码生成的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"package"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"artwork"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 包名, 用于区分不同的 proto 文件. 注意此包名并不是 Go 中的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// 定义消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"message"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ArtworkInfo"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," artworkID "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},"; ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"string"),s("span",{style:{color:"#24292E"}}," title "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"2"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"SourceName"),s("span",{style:{color:"#24292E"}}," source "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"3"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 引用枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"repeated"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"string"),s("span",{style:{color:"#24292E"}}," tags "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"4"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// repeated 表示为数组")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"bool"),s("span",{style:{color:"#24292E"}}," r18 "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"5"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"repeated"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"PictureInfo"),s("span",{style:{color:"#24292E"}}," pictures "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"6"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 引用嵌套消息类型")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"// 定义枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"enum"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"SourceName"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        Pixiv "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"0"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        Twitter "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#6A737D"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"// 定义嵌套消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"message"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"PictureInfo"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," pictureID "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," width "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"2"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," height "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"3"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#D73A49"}},"message"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#24292E"}}," { ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," artworkID "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},"; ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#24292E"}},"} ")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#6A737D"}},"// 定义服务 ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#D73A49"}},"service"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ArtworkService"),s("span",{style:{color:"#24292E"}}," { ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"// 定义方法 ")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"rpc"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"GetArtworkInfo"),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#6F42C1"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"returns"),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#6F42C1"}},"ArtworkInfo"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#24292E"}},"} ")])])])],-1),J={id:"grpc-方法",tabindex:"-1"},K=s("p",null,"gRPC 有四种方法类型:",-1),X=s("ol",null,[s("li",null,"一元方法"),s("li",null,"服务端流式方法"),s("li",null,"客户端流式方法"),s("li",null,"双向流式方法")],-1),Y={id:"一元方法",tabindex:"-1"},ss=s("p",null,"一元方法是最简单常用的方法. 客户端将请求消息作为参数发送给服务, 服务返回一个响应消息. 一元方法调用完成.",-1),ls=s("p",null,"在实际代码中, 一元方法的调用就像是调用一个普通的函数.",-1),os=s("p",null,[l("上文的 "),s("code",null,"GetArtworkInfo"),l(" 方法就是一个一元方法.")],-1),ns={id:"服务端流式方法",tabindex:"-1"},es=s("p",null,"服务端流式方法是指客户端发送一个请求消息, 服务端返回一个流式响应消息. 客户端从返回的流中读取响应消息, 直到没有消息为止.",-1),as=s("p",null,[l("定义流式方法, 需要在参数或返回值前加上 "),s("code",null,"stream"),l(" 关键字.")],-1),ts=s("p",null,[l("例如, 定义一个 "),s("code",null,"GetArtworkInfoList"),l(" 方法, 用于获取多个作品的信息:")],-1),rs=s("div",{class:"language-proto"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"proto"),s("pre",{class:"shiki material-theme-darker has-diff vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"syntax"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},'"proto3"'),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 指定版本")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"option"),s("span",{style:{color:"#EEFFFF"}}," go_package "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},'"example/proto"'),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 指定 Go 代码生成的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"package"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"artwork"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 包名, 用于区分不同的 proto 文件. 注意此包名并不是 Go 中的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"message"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"ArtworkInfo"),s("span",{style:{color:"#EEFFFF"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," artworkID "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"string"),s("span",{style:{color:"#EEFFFF"}}," title "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"SourceName"),s("span",{style:{color:"#EEFFFF"}}," source "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 引用枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"repeated"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"string"),s("span",{style:{color:"#EEFFFF"}}," tags "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"4"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// repeated 表示为数组")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"bool"),s("span",{style:{color:"#EEFFFF"}}," r18 "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"5"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"repeated"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"PictureInfo"),s("span",{style:{color:"#EEFFFF"}}," pictures "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"6"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 引用嵌套消息类型")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F78C6C"}},"enum"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"SourceName"),s("span",{style:{color:"#EEFFFF"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        Pixiv "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        Twitter "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#545454","font-style":"italic"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义嵌套消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F78C6C"}},"message"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"PictureInfo"),s("span",{style:{color:"#EEFFFF"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," pictureID "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," width "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"2"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," height "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"3"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"message"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#EEFFFF"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#C792EA"}},"uint64"),s("span",{style:{color:"#EEFFFF"}}," artworkID "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义服务")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F78C6C"}},"service"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"ArtworkService"),s("span",{style:{color:"#EEFFFF"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义方法")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F78C6C"}},"rpc"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"GetArtworkInfo"),s("span",{style:{color:"#EEFFFF"}}," ("),s("span",{style:{color:"#FFCB6B"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#EEFFFF"}},") "),s("span",{style:{color:"#F78C6C"}},"returns"),s("span",{style:{color:"#EEFFFF"}}," ("),s("span",{style:{color:"#FFCB6B"}},"ArtworkInfo"),s("span",{style:{color:"#EEFFFF"}},")"),s("span",{style:{color:"#89DDFF"}},";")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#F78C6C"}},"rpc"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"GetArtworkInfoList"),s("span",{style:{color:"#EEFFFF"}}," ("),s("span",{style:{color:"#FFCB6B"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#EEFFFF"}},") "),s("span",{style:{color:"#F78C6C"}},"returns"),s("span",{style:{color:"#EEFFFF"}}," ("),s("span",{style:{color:"#F78C6C"}},"stream"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"ArtworkInfo"),s("span",{style:{color:"#EEFFFF"}},")"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 定义流式方法 ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"}")])])]),s("pre",{class:"shiki github-light has-diff vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"syntax"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},'"proto3"'),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 指定版本")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"option"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"go_package"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},'"example/proto"'),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 指定 Go 代码生成的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"package"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"artwork"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 包名, 用于区分不同的 proto 文件. 注意此包名并不是 Go 中的包名")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// 定义消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"message"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ArtworkInfo"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," artworkID "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},"; ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"string"),s("span",{style:{color:"#24292E"}}," title "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"2"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"SourceName"),s("span",{style:{color:"#24292E"}}," source "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"3"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 引用枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"repeated"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"string"),s("span",{style:{color:"#24292E"}}," tags "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"4"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// repeated 表示为数组")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"bool"),s("span",{style:{color:"#24292E"}}," r18 "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"5"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"repeated"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"PictureInfo"),s("span",{style:{color:"#24292E"}}," pictures "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"6"),s("span",{style:{color:"#24292E"}},"; "),s("span",{style:{color:"#6A737D"}},"// 引用嵌套消息类型")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"// 定义枚举类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"enum"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"SourceName"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        Pixiv "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"0"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        Twitter "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#6A737D"}},"// ...")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"// 定义嵌套消息类型")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"message"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"PictureInfo"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," pictureID "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," width "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"2"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," height "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"3"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"message"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"uint64"),s("span",{style:{color:"#24292E"}}," artworkID "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// 定义服务")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"service"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ArtworkService"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"// 定义方法")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"rpc"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"GetArtworkInfo"),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#6F42C1"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"returns"),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#6F42C1"}},"ArtworkInfo"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line diff add"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"rpc"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"GetArtworkInfoList"),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#6F42C1"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"returns"),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#D73A49"}},"stream"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ArtworkInfo"),s("span",{style:{color:"#24292E"}},"); "),s("span",{style:{color:"#6A737D"}},"// 定义流式方法 ")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),cs={id:"客户端流式方法",tabindex:"-1"},Fs=s("p",null,"与服务端流式方法相反, 客户端向数据流中写入并发送一系列消息, 服务端从流中读取这些消息, 直到没有消息为止, 然后返回一个响应消息.",-1),ps=s("p",null,[l("在方法参数前加上 "),s("code",null,"stream"),l(" 关键字即可定义客户端流式方法.")],-1),ys={id:"双向流式方法",tabindex:"-1"},Es=s("p",null,"双向流式方法是指客户端和服务端都可以通过一个读写数据流来发送一系列消息. 这两个流独立运行, 因此客户端和服务端可以以任意顺序读写: 例如, 服务端可以在写入响应前等待接收所有客户端消息, 或者可以先读取一个消息, 然后再写入一个消息, 或者读取或写入多个消息, 甚至可以同时读写.",-1),is=s("p",null,[l("在方法参数和返回值前加上 "),s("code",null,"stream"),l(" 关键字即可定义双向流式方法.")],-1),Ds={id:"生成-go-代码",tabindex:"-1"},Cs=s("p",null,[l("上文所述的内容都还是在 "),s("code",null,"proto"),l(" 文件中完成, 要想在 Go 中使用, 还需要生成 Go 代码.")],-1),ds=s("p",null,"在项目目录下执行:",-1),As=s("div",{class:"language-bash"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#FFCB6B"}},"protoc"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"--go_out=."),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"--go-grpc_out=."),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C3E88D"}},"example.proto")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6F42C1"}},"protoc"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"--go_out=."),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"--go-grpc_out=."),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"example.proto")])])])],-1),gs=s("p",null,[l("protoc 会在当前目录下生成 "),s("code",null,"proto/example.pb.go"),l(" 和 "),s("code",null,"proto/example_grpc.pb.go"),l(" 两个文件, 前者包含了 "),s("code",null,"example.proto"),l(" 中定义的消息类型, 后者包含了 "),s("code",null,"example.proto"),l(" 中定义的服务和方法.")],-1),us={id:"服务端实现",tabindex:"-1"},fs=s("p",null,[l("实现上文定义的 "),s("code",null,"ArtworkService"),l(" 服务, 需要做两部分工作:")],-1),hs=s("ol",null,[s("li",null,[l("实现 "),s("code",null,"ArtworkService"),l(" 服务中定义的所有方法. 即实现 "),s("code",null,"example_grpc.pb.go"),l(" 中的 "),s("code",null,"ArtworkServiceServer"),l(" 接口.")]),s("li",null,"运行一个 gRPC 服务器, 监听来自客户端的请求并返回响应.")],-1),ks={id:"实现服务方法",tabindex:"-1"},ms=s("p",null,[l("打开 "),s("code",null,"example_grpc.pb.go"),l(" 文件, 可以看到 "),s("code",null,"ArtworkServiceServer"),l(" 接口的定义:")],-1),_s=s("div",{class:"language-go"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"go"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"// ArtworkServiceServer is the server API for ArtworkService service.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"// All implementations must embed UnimplementedArtworkServiceServer")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#545454","font-style":"italic"}},"// for forward compatibility")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"type"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"ArtworkServiceServer"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"interface"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"	"),s("span",{style:{color:"#82AAFF"}},"GetArtworkInfo"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"Context"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#EEFFFF"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"(*"),s("span",{style:{color:"#EEFFFF"}},"ArtworkInfo"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"error"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"	"),s("span",{style:{color:"#82AAFF"}},"GetArtworkInfoList"),s("span",{style:{color:"#89DDFF"}},"(*"),s("span",{style:{color:"#EEFFFF"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," ArtworkService_GetArtworkInfoListServer"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"error")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"	"),s("span",{style:{color:"#82AAFF"}},"mustEmbedUnimplementedArtworkServiceServer"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// ArtworkServiceServer is the server API for ArtworkService service.")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// All implementations must embed UnimplementedArtworkServiceServer")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// for forward compatibility")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"type"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ArtworkServiceServer"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"interface"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"	"),s("span",{style:{color:"#005CC5"}},"GetArtworkInfo"),s("span",{style:{color:"#24292E"}},"(context.Context, "),s("span",{style:{color:"#D73A49"}},"*"),s("span",{style:{color:"#24292E"}},"GetArtworkInfoRequest) ("),s("span",{style:{color:"#D73A49"}},"*"),s("span",{style:{color:"#24292E"}},"ArtworkInfo, "),s("span",{style:{color:"#D73A49"}},"error"),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"	"),s("span",{style:{color:"#005CC5"}},"GetArtworkInfoList"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#D73A49"}},"*"),s("span",{style:{color:"#24292E"}},"GetArtworkInfoRequest, ArtworkService_GetArtworkInfoListServer) "),s("span",{style:{color:"#D73A49"}},"error")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"	"),s("span",{style:{color:"#005CC5"}},"mustEmbedUnimplementedArtworkServiceServer"),s("span",{style:{color:"#24292E"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),vs=s("p",null,[l("在项目中导入 "),s("code",null,"example/proto"),l(" 包, 并实现 "),s("code",null,"ArtworkServiceServer"),l(" 接口:")],-1),ws=s("div",{class:"language-go"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"go"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"package"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"main")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"import"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"context"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"log"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"net"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"example/proto"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"google.golang.org/grpc"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"type"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"ArtworkServiceServer"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"struct"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"UnimplementedArtworkServiceServer "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 为了实现向前兼容, 需要嵌入此结构体")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"func"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"s "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#EEFFFF"}},"ArtworkServiceServer"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"GetArtworkInfo"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"ctx context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"Context"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," req "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#EEFFFF"}},"proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"(*"),s("span",{style:{color:"#EEFFFF"}},"proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"ArtworkInfo"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"error"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 实现")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#EEFFFF"}},"proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"ArtworkInfo"),s("span",{style:{color:"#89DDFF"}},"{},"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"func"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"s "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#EEFFFF"}},"ArtworkServiceServer"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"GetArtworkInfoList"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"req "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#EEFFFF"}},"proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," stream proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"ArtworkService_GetArtworkInfoListServer"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"error"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 实现")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#EEFFFF"}}," i "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," i "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," i"),s("span",{style:{color:"#89DDFF"}},"++"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        err "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," stream"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Send"),s("span",{style:{color:"#89DDFF"}},"(&"),s("span",{style:{color:"#EEFFFF"}},"proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"ArtworkInfo"),s("span",{style:{color:"#89DDFF"}},"{})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," err")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"var"),s("span",{style:{color:"#EEFFFF"}}," server "),s("span",{style:{color:"#89DDFF"}},"="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#EEFFFF"}},"ArtworkServiceServer"),s("span",{style:{color:"#89DDFF"}},"{}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"func"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"main"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"package"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"main")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," (")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"context"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"log"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"net"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"example/proto"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"google.golang.org/grpc"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"type"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"ArtworkServiceServer"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"struct"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    proto.UnimplementedArtworkServiceServer "),s("span",{style:{color:"#6A737D"}},"// 为了实现向前兼容, 需要嵌入此结构体")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"func"),s("span",{style:{color:"#24292E"}}," (s "),s("span",{style:{color:"#D73A49"}},"*"),s("span",{style:{color:"#24292E"}},"ArtworkServiceServer) "),s("span",{style:{color:"#6F42C1"}},"GetArtworkInfo"),s("span",{style:{color:"#24292E"}},"(ctx context.Context, req "),s("span",{style:{color:"#D73A49"}},"*"),s("span",{style:{color:"#24292E"}},"proto.GetArtworkInfoRequest) ("),s("span",{style:{color:"#D73A49"}},"*"),s("span",{style:{color:"#24292E"}},"proto.ArtworkInfo, "),s("span",{style:{color:"#D73A49"}},"error"),s("span",{style:{color:"#24292E"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"// 实现")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"&"),s("span",{style:{color:"#24292E"}},"proto.ArtworkInfo{}, "),s("span",{style:{color:"#005CC5"}},"nil")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"func"),s("span",{style:{color:"#24292E"}}," (s "),s("span",{style:{color:"#D73A49"}},"*"),s("span",{style:{color:"#24292E"}},"ArtworkServiceServer) "),s("span",{style:{color:"#6F42C1"}},"GetArtworkInfoList"),s("span",{style:{color:"#24292E"}},"(req "),s("span",{style:{color:"#D73A49"}},"*"),s("span",{style:{color:"#24292E"}},"proto.GetArtworkInfoRequest, stream proto.ArtworkService_GetArtworkInfoListServer) "),s("span",{style:{color:"#D73A49"}},"error"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"// 实现")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"for"),s("span",{style:{color:"#24292E"}}," i "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"0"),s("span",{style:{color:"#24292E"}},"; i "),s("span",{style:{color:"#D73A49"}},"<"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"10"),s("span",{style:{color:"#24292E"}},"; i"),s("span",{style:{color:"#D73A49"}},"++"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        err "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," stream."),s("span",{style:{color:"#005CC5"}},"Send"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#D73A49"}},"&"),s("span",{style:{color:"#24292E"}},"proto.ArtworkInfo{})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," err "),s("span",{style:{color:"#D73A49"}},"!="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"nil"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," err")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"nil")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"var"),s("span",{style:{color:"#24292E"}}," server "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"&"),s("span",{style:{color:"#24292E"}},"ArtworkServiceServer{}")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"func"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"main"),s("span",{style:{color:"#24292E"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),bs=s("p",null,"可以看到, 流式方法和一元方法的区别在于, 流式方法的参数或返回值是一个流, 需要向流中写入或读取消息.",-1),Bs=s("div",{class:"language-go"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"go"),s("pre",{class:"shiki material-theme-darker has-highlighted-lines vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"func"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"s "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#EEFFFF"}},"ArtworkServiceServer"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"GetArtworkInfoList"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"req "),s("span",{style:{color:"#89DDFF"}},"*"),s("span",{style:{color:"#EEFFFF"}},"proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," stream proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"ArtworkService_GetArtworkInfoListServer"),s("span",{style:{color:"#89DDFF"}},")"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#C792EA"}},"error"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 实现")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#EEFFFF"}}," i "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"0"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," i "),s("span",{style:{color:"#89DDFF"}},"<"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"10"),s("span",{style:{color:"#89DDFF"}},";"),s("span",{style:{color:"#EEFFFF"}}," i"),s("span",{style:{color:"#89DDFF"}},"++"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#EEFFFF"}},"        err "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," stream"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Send"),s("span",{style:{color:"#89DDFF"}},"(&"),s("span",{style:{color:"#EEFFFF"}},"proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"ArtworkInfo"),s("span",{style:{color:"#89DDFF"}},"{})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," err")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"return"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])]),s("pre",{class:"shiki github-light has-highlighted-lines vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"func"),s("span",{style:{color:"#24292E"}}," (s "),s("span",{style:{color:"#D73A49"}},"*"),s("span",{style:{color:"#24292E"}},"ArtworkServiceServer) "),s("span",{style:{color:"#6F42C1"}},"GetArtworkInfoList"),s("span",{style:{color:"#24292E"}},"(req "),s("span",{style:{color:"#D73A49"}},"*"),s("span",{style:{color:"#24292E"}},"proto.GetArtworkInfoRequest, stream proto.ArtworkService_GetArtworkInfoListServer) "),s("span",{style:{color:"#D73A49"}},"error"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"// 实现")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"for"),s("span",{style:{color:"#24292E"}}," i "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"0"),s("span",{style:{color:"#24292E"}},"; i "),s("span",{style:{color:"#D73A49"}},"<"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"10"),s("span",{style:{color:"#24292E"}},"; i"),s("span",{style:{color:"#D73A49"}},"++"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"        err "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," stream."),s("span",{style:{color:"#005CC5"}},"Send"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#D73A49"}},"&"),s("span",{style:{color:"#24292E"}},"proto.ArtworkInfo{})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," err "),s("span",{style:{color:"#D73A49"}},"!="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"nil"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," err")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"nil")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),Ps={id:"运行-grpc-服务器",tabindex:"-1"},Is=s("p",null,[l("在 "),s("code",null,"main"),l(" 函数中, 创建一个 gRPC 服务器, 并注册 "),s("code",null,"ArtworkServiceServer"),l(":")],-1),Ss=s("div",{class:"language-go"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"go"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"func"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"main"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    lis"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," net"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Listen"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"tcp"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},":8080"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        log"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Fatalf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"failed to listen: %v"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    s "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," grpc"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"NewServer"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"RegisterArtworkServiceServer"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"s"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," server"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," s"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Serve"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"lis"),s("span",{style:{color:"#89DDFF"}},");"),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        log"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Fatalf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"failed to serve: %v"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"func"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"main"),s("span",{style:{color:"#24292E"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    lis, err "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," net."),s("span",{style:{color:"#005CC5"}},"Listen"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"tcp"'),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#032F62"}},'":8080"'),s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," err "),s("span",{style:{color:"#D73A49"}},"!="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"nil"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        log."),s("span",{style:{color:"#005CC5"}},"Fatalf"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"failed to listen: '),s("span",{style:{color:"#005CC5"}},"%v"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},", err)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    s "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," grpc."),s("span",{style:{color:"#005CC5"}},"NewServer"),s("span",{style:{color:"#24292E"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    proto."),s("span",{style:{color:"#005CC5"}},"RegisterArtworkServiceServer"),s("span",{style:{color:"#24292E"}},"(s, server)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," err "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," s."),s("span",{style:{color:"#005CC5"}},"Serve"),s("span",{style:{color:"#24292E"}},"(lis); err "),s("span",{style:{color:"#D73A49"}},"!="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"nil"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        log."),s("span",{style:{color:"#005CC5"}},"Fatalf"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"failed to serve: '),s("span",{style:{color:"#005CC5"}},"%v"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},", err)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),Gs=s("div",{class:"warning custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"WARNING"),s("span",{lang:"zh-CN"},"注意")]),s("p",null,"此处没有使用任何安全措施")],-1),xs={id:"客户端调用",tabindex:"-1"},Rs=s("p",null,"在客户端调用 gRPC 服务, 只需要初始化连接, 并创建客户端, 然后直接调用定义的方法.",-1),Ns=s("div",{class:"language-go"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"go"),s("pre",{class:"shiki material-theme-darker vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"package"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"main")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"import"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"context"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"log"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"example/proto"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"google.golang.org/grpc"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"google.golang.org/grpc/credentials/insecure"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"func"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"main"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    conn"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," grpc"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Dial"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"localhost:8080"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," grpc"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"WithTransportCredentials"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"insecure"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"NewCredentials"),s("span",{style:{color:"#89DDFF"}},"()))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        log"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Fatalf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"did not connect: %v"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"defer"),s("span",{style:{color:"#EEFFFF"}}," conn"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Close"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    client "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"NewArtworkServiceClient"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"conn"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    resp"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," client"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"GetArtworkInfo"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Background"),s("span",{style:{color:"#89DDFF"}},"(),"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#EEFFFF"}},"proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#EEFFFF"}},"ArtworkID"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        log"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Fatalf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"could not get artwork info: %v"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    log"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Println"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"resp"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"package"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"main")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," (")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"context"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"log"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"example/proto"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"google.golang.org/grpc"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"google.golang.org/grpc/credentials/insecure"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"func"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"main"),s("span",{style:{color:"#24292E"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    conn, err "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," grpc."),s("span",{style:{color:"#005CC5"}},"Dial"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"localhost:8080"'),s("span",{style:{color:"#24292E"}},", grpc."),s("span",{style:{color:"#005CC5"}},"WithTransportCredentials"),s("span",{style:{color:"#24292E"}},"(insecure."),s("span",{style:{color:"#005CC5"}},"NewCredentials"),s("span",{style:{color:"#24292E"}},"()))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," err "),s("span",{style:{color:"#D73A49"}},"!="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"nil"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        log."),s("span",{style:{color:"#005CC5"}},"Fatalf"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"did not connect: '),s("span",{style:{color:"#005CC5"}},"%v"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},", err)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"defer"),s("span",{style:{color:"#24292E"}}," conn."),s("span",{style:{color:"#005CC5"}},"Close"),s("span",{style:{color:"#24292E"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    client "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," proto."),s("span",{style:{color:"#005CC5"}},"NewArtworkServiceClient"),s("span",{style:{color:"#24292E"}},"(conn)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    resp, err "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," client."),s("span",{style:{color:"#005CC5"}},"GetArtworkInfo"),s("span",{style:{color:"#24292E"}},"(context."),s("span",{style:{color:"#005CC5"}},"Background"),s("span",{style:{color:"#24292E"}},"(), "),s("span",{style:{color:"#D73A49"}},"&"),s("span",{style:{color:"#24292E"}},"proto.GetArtworkInfoRequest{ArtworkID: "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},"})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," err "),s("span",{style:{color:"#D73A49"}},"!="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"nil"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        log."),s("span",{style:{color:"#005CC5"}},"Fatalf"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"could not get artwork info: '),s("span",{style:{color:"#005CC5"}},"%v"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},", err)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    log."),s("span",{style:{color:"#005CC5"}},"Println"),s("span",{style:{color:"#24292E"}},"(resp)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),Ts=s("p",null,"而对于流式方法, 客户端需要从流中读取响应消息, 直到没有消息为止.",-1),qs=s("div",{class:"language-go"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"go"),s("pre",{class:"shiki material-theme-darker has-highlighted-lines vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"package"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#FFCB6B"}},"main")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"import"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"(")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"context"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"log"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"io"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"example/proto"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"google.golang.org/grpc"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#FFCB6B"}},"google.golang.org/grpc/credentials/insecure"),s("span",{style:{color:"#89DDFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"func"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#82AAFF"}},"main"),s("span",{style:{color:"#89DDFF"}},"()"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    conn"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," grpc"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Dial"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"localhost:8080"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," grpc"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"WithTransportCredentials"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"insecure"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"NewCredentials"),s("span",{style:{color:"#89DDFF"}},"()))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        log"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Fatalf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"did not connect: %v"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"defer"),s("span",{style:{color:"#EEFFFF"}}," conn"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Close"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    client "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"NewArtworkServiceClient"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"conn"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    stream"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," client"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"GetArtworkInfoList"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"context"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Background"),s("span",{style:{color:"#89DDFF"}},"(),"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"&"),s("span",{style:{color:"#EEFFFF"}},"proto"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"GetArtworkInfoRequest"),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#EEFFFF"}},"ArtworkID"),s("span",{style:{color:"#89DDFF"}},":"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#F78C6C"}},"1"),s("span",{style:{color:"#89DDFF"}},"})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        log"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Fatalf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"could not get artwork info: %v"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"for"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#EEFFFF"}},"        resp"),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},":="),s("span",{style:{color:"#EEFFFF"}}," stream"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Recv"),s("span",{style:{color:"#89DDFF"}},"()")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},"=="),s("span",{style:{color:"#EEFFFF"}}," io"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#EEFFFF"}},"EOF "),s("span",{style:{color:"#89DDFF"}},"{"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#545454","font-style":"italic"}},"// 判断是否已结束")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#EEFFFF"}},"            "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"break")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF","font-style":"italic"}},"if"),s("span",{style:{color:"#EEFFFF"}}," err "),s("span",{style:{color:"#89DDFF"}},"!="),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"nil"),s("span",{style:{color:"#EEFFFF"}}," "),s("span",{style:{color:"#89DDFF"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"            log"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Fatalf"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#C3E88D"}},"could not get artwork info: %v"),s("span",{style:{color:"#89DDFF"}},'"'),s("span",{style:{color:"#89DDFF"}},","),s("span",{style:{color:"#EEFFFF"}}," err"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"        log"),s("span",{style:{color:"#89DDFF"}},"."),s("span",{style:{color:"#82AAFF"}},"Println"),s("span",{style:{color:"#89DDFF"}},"("),s("span",{style:{color:"#EEFFFF"}},"resp"),s("span",{style:{color:"#89DDFF"}},")")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#EEFFFF"}},"    "),s("span",{style:{color:"#89DDFF"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#89DDFF"}},"}")])])]),s("pre",{class:"shiki github-light has-highlighted-lines vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"package"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"main")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"import"),s("span",{style:{color:"#24292E"}}," (")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"context"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"log"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"io"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"example/proto"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"google.golang.org/grpc"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#6F42C1"}},"google.golang.org/grpc/credentials/insecure"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},")")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"func"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"main"),s("span",{style:{color:"#24292E"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    conn, err "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," grpc."),s("span",{style:{color:"#005CC5"}},"Dial"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"localhost:8080"'),s("span",{style:{color:"#24292E"}},", grpc."),s("span",{style:{color:"#005CC5"}},"WithTransportCredentials"),s("span",{style:{color:"#24292E"}},"(insecure."),s("span",{style:{color:"#005CC5"}},"NewCredentials"),s("span",{style:{color:"#24292E"}},"()))")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," err "),s("span",{style:{color:"#D73A49"}},"!="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"nil"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        log."),s("span",{style:{color:"#005CC5"}},"Fatalf"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"did not connect: '),s("span",{style:{color:"#005CC5"}},"%v"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},", err)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"defer"),s("span",{style:{color:"#24292E"}}," conn."),s("span",{style:{color:"#005CC5"}},"Close"),s("span",{style:{color:"#24292E"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    client "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," proto."),s("span",{style:{color:"#005CC5"}},"NewArtworkServiceClient"),s("span",{style:{color:"#24292E"}},"(conn)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    stream, err "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," client."),s("span",{style:{color:"#005CC5"}},"GetArtworkInfoList"),s("span",{style:{color:"#24292E"}},"(context."),s("span",{style:{color:"#005CC5"}},"Background"),s("span",{style:{color:"#24292E"}},"(), "),s("span",{style:{color:"#D73A49"}},"&"),s("span",{style:{color:"#24292E"}},"proto.GetArtworkInfoRequest{ArtworkID: "),s("span",{style:{color:"#005CC5"}},"1"),s("span",{style:{color:"#24292E"}},"})")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," err "),s("span",{style:{color:"#D73A49"}},"!="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"nil"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        log."),s("span",{style:{color:"#005CC5"}},"Fatalf"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"could not get artwork info: '),s("span",{style:{color:"#005CC5"}},"%v"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},", err)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"for"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"        resp, err "),s("span",{style:{color:"#D73A49"}},":="),s("span",{style:{color:"#24292E"}}," stream."),s("span",{style:{color:"#005CC5"}},"Recv"),s("span",{style:{color:"#24292E"}},"()")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," err "),s("span",{style:{color:"#D73A49"}},"=="),s("span",{style:{color:"#24292E"}}," io.EOF { "),s("span",{style:{color:"#6A737D"}},"// 判断是否已结束")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"            "),s("span",{style:{color:"#D73A49"}},"break")]),l(`
`),s("span",{class:"line highlighted"},[s("span",{style:{color:"#24292E"}},"        }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," err "),s("span",{style:{color:"#D73A49"}},"!="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"nil"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            log."),s("span",{style:{color:"#005CC5"}},"Fatalf"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"could not get artwork info: '),s("span",{style:{color:"#005CC5"}},"%v"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},", err)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        log."),s("span",{style:{color:"#005CC5"}},"Println"),s("span",{style:{color:"#24292E"}},"(resp)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])])],-1),$s={id:"参考",tabindex:"-1"};function Ls(a,Hs,zs,Os,c,Us){const n=A,F=p;return C(),D(F,{frontmatter:c.frontmatter,data:c.data},{"main-content-md":o(()=>[s("h2",u,[l("Protocol Buffers "),e(n,{class:"header-anchor",href:"#protocol-buffers","aria-label":'Permalink to "Protocol Buffers"'},{default:o(()=>[l("​")]),_:1})]),f,h,d(" more "),s("h3",k,[l("安装 "),e(n,{class:"header-anchor",href:"#安装","aria-label":'Permalink to "安装"'},{default:o(()=>[l("​")]),_:1})]),m,s("p",null,[l("安装 Protobuf 编译器最简单的方法是在 "),e(n,{href:"https://github.com/protocolbuffers/protobuf/releases",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("Github Release")]),_:1}),l(" 页面下载对应平台的二进制文件, 并加入 "),_,l(" 环境变量.")]),v,w,b,s("h3",B,[l("语法和规范 "),e(n,{class:"header-anchor",href:"#语法和规范","aria-label":'Permalink to "语法和规范"'},{default:o(()=>[l("​")]),_:1})]),P,I,S,G,x,R,s("p",null,[l("关于 Protobuf 的数据类型和各语言中的对应, 可以参考 "),e(n,{href:"https://developers.google.com/protocol-buffers/docs/proto3#scalar",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("官方文档#scalar")]),_:1})]),s("h3",N,[l("编译生成 Go 代码 "),e(n,{class:"header-anchor",href:"#编译生成-go-代码","aria-label":'Permalink to "编译生成 Go 代码"'},{default:o(()=>[l("​")]),_:1})]),T,q,$,L,H,s("h2",z,[l("gRPC "),e(n,{class:"header-anchor",href:"#grpc","aria-label":'Permalink to "gRPC"'},{default:o(()=>[l("​")]),_:1})]),s("p",null,[e(n,{href:"https://grpc.io/",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("gRPC")]),_:1}),l(' 是一个基于 HTTP/2 的"高性能、开源和通用的 '),e(n,{href:"https://zh.wikipedia.org/wiki/%E8%BF%9C%E7%A8%8B%E8%BF%87%E7%A8%8B%E8%B0%83%E7%94%A8",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("RPC")]),_:1}),l(' 框架". gRPC 默认使用 Protobuf 作为接口定义语言和数据传输格式.')]),O,s("h3",U,[l("安装 "),e(n,{class:"header-anchor",href:"#安装-1","aria-label":'Permalink to "安装"'},{default:o(()=>[l("​")]),_:1})]),W,V,s("h3",Q,[l("定义 gRPC 服务和方法 "),e(n,{class:"header-anchor",href:"#定义-grpc-服务和方法","aria-label":'Permalink to "定义 gRPC 服务和方法"'},{default:o(()=>[l("​")]),_:1})]),Z,M,j,s("h4",J,[l("gRPC 方法 "),e(n,{class:"header-anchor",href:"#grpc-方法","aria-label":'Permalink to "gRPC 方法"'},{default:o(()=>[l("​")]),_:1})]),K,X,s("h5",Y,[l("一元方法 "),e(n,{class:"header-anchor",href:"#一元方法","aria-label":'Permalink to "一元方法"'},{default:o(()=>[l("​")]),_:1})]),ss,ls,os,s("h5",ns,[l("服务端流式方法 "),e(n,{class:"header-anchor",href:"#服务端流式方法","aria-label":'Permalink to "服务端流式方法"'},{default:o(()=>[l("​")]),_:1})]),es,as,ts,rs,s("h5",cs,[l("客户端流式方法 "),e(n,{class:"header-anchor",href:"#客户端流式方法","aria-label":'Permalink to "客户端流式方法"'},{default:o(()=>[l("​")]),_:1})]),Fs,ps,s("h5",ys,[l("双向流式方法 "),e(n,{class:"header-anchor",href:"#双向流式方法","aria-label":'Permalink to "双向流式方法"'},{default:o(()=>[l("​")]),_:1})]),Es,is,s("h3",Ds,[l("生成 Go 代码 "),e(n,{class:"header-anchor",href:"#生成-go-代码","aria-label":'Permalink to "生成 Go 代码"'},{default:o(()=>[l("​")]),_:1})]),Cs,ds,As,gs,s("h3",us,[l("服务端实现 "),e(n,{class:"header-anchor",href:"#服务端实现","aria-label":'Permalink to "服务端实现"'},{default:o(()=>[l("​")]),_:1})]),fs,hs,s("h4",ks,[l("实现服务方法 "),e(n,{class:"header-anchor",href:"#实现服务方法","aria-label":'Permalink to "实现服务方法"'},{default:o(()=>[l("​")]),_:1})]),ms,_s,vs,ws,bs,Bs,s("h4",Ps,[l("运行 gRPC 服务器 "),e(n,{class:"header-anchor",href:"#运行-grpc-服务器","aria-label":'Permalink to "运行 gRPC 服务器"'},{default:o(()=>[l("​")]),_:1})]),Is,Ss,Gs,s("h3",xs,[l("客户端调用 "),e(n,{class:"header-anchor",href:"#客户端调用","aria-label":'Permalink to "客户端调用"'},{default:o(()=>[l("​")]),_:1})]),Rs,Ns,Ts,qs,s("h2",$s,[l("参考 "),e(n,{class:"header-anchor",href:"#参考","aria-label":'Permalink to "参考"'},{default:o(()=>[l("​")]),_:1})]),s("ul",null,[s("li",null,[e(n,{href:"https://grpc.io/docs/",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("gRPC Docs")]),_:1})]),s("li",null,[e(n,{href:"https://protobuf.dev/programming-guides/proto3/",target:"_blank",rel:"noreferrer"},{default:o(()=>[l("Protocol Buffers Docs")]),_:1})])])]),"main-header":o(()=>[t(a.$slots,"main-header")]),"main-header-after":o(()=>[t(a.$slots,"main-header-after")]),"main-nav":o(()=>[t(a.$slots,"main-nav")]),"main-content":o(()=>[t(a.$slots,"main-content")]),"main-content-after":o(()=>[t(a.$slots,"main-content-after")]),"main-nav-before":o(()=>[t(a.$slots,"main-nav-before")]),"main-nav-after":o(()=>[t(a.$slots,"main-nav-after")]),comment:o(()=>[t(a.$slots,"comment")]),footer:o(()=>[t(a.$slots,"footer")]),aside:o(()=>[t(a.$slots,"aside")]),"aside-custom":o(()=>[t(a.$slots,"aside-custom")]),default:o(()=>[t(a.$slots,"default")]),_:3},8,["frontmatter","data"])}const Ks=y(g,[["render",Ls]]);export{Js as __pageData,Ks as default};
